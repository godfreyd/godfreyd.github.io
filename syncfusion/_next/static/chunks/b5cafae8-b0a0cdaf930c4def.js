"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{5070:(t,e,i)=>{i.d(e,{GS:()=>ts});var s=i(310),n=i(193),a=i(494),r=i(7945),o=i(1108),d=i(7816),h=i(4578),l=function(){var t=function(e,i){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),c=function(t,e,i,s){var n,a=arguments.length,r=a<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,s);else for(var o=t.length-1;o>=0;o--)(n=t[o])&&(r=(a<3?n(r):a>3?n(e,i,r):n(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r},p="e-treeview",u="e-control",f="e-icon-collapsible",g="e-icon-expandable",v="e-list-item",S="e-list-text",m="e-list-parent",y="e-hover",k="e-active",N="e-icons-spinner",C="e-process",x="e-icons",b="e-text-content",D="e-input",I="e-input-group",L="e-tree-input",A="e-editing",E="e-rtl",O="e-interaction",w="e-droppable",T="e-dragging",X="e-sibling",F="e-drop-in",M="e-drop-next",P="e-drop-out",R="e-no-drop",W="e-fullrow",_="e-selected",B="e-expanded",H="e-node-collapsed",j="e-disable",U="e-check",J="e-stop",Y="e-treeview-checkbox",q="e-frame",Q="e-ripple",z="e-node-focus",G="e-list-img",V="e-animation-active",K="e-disabled",$="e-prevent",Z={treeRole:"group",itemRole:"treeitem",listRole:"group",itemText:"",wrapperRole:""},tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),c([(0,s.mA)("child")],e.prototype,"child",void 0),c([(0,s.mA)([])],e.prototype,"dataSource",void 0),c([(0,s.mA)("expanded")],e.prototype,"expanded",void 0),c([(0,s.mA)("hasChildren")],e.prototype,"hasChildren",void 0),c([(0,s.mA)("htmlAttributes")],e.prototype,"htmlAttributes",void 0),c([(0,s.mA)("iconCss")],e.prototype,"iconCss",void 0),c([(0,s.mA)("id")],e.prototype,"id",void 0),c([(0,s.mA)("imageUrl")],e.prototype,"imageUrl",void 0),c([(0,s.mA)("isChecked")],e.prototype,"isChecked",void 0),c([(0,s.mA)("parentID")],e.prototype,"parentID",void 0),c([(0,s.mA)(null)],e.prototype,"query",void 0),c([(0,s.mA)("selectable")],e.prototype,"selectable",void 0),c([(0,s.mA)("selected")],e.prototype,"selected",void 0),c([(0,s.mA)(null)],e.prototype,"tableName",void 0),c([(0,s.mA)("text")],e.prototype,"text",void 0),c([(0,s.mA)("tooltip")],e.prototype,"tooltip",void 0),c([(0,s.mA)("navigateUrl")],e.prototype,"navigateUrl",void 0),e}(s.I1),te=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),c([(0,s.mA)("SlideDown")],e.prototype,"effect",void 0),c([(0,s.mA)(400)],e.prototype,"duration",void 0),c([(0,s.mA)("linear")],e.prototype,"easing",void 0),e}(s.I1),ti=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),c([(0,s.pr)({effect:"SlideUp",duration:400,easing:"linear"},te)],e.prototype,"collapse",void 0),c([(0,s.pr)({effect:"SlideDown",duration:400,easing:"linear"},te)],e.prototype,"expand",void 0),e}(s.I1),ts=function(t){var e;function i(e,i){var s=t.call(this,e,i)||this;return s.isRefreshed=!1,s.preventExpand=!1,s.checkedElement=[],s.disableNode=[],s.validArr=[],s.validNodes=[],s.expandChildren=[],s.isFieldChange=!1,s.changeDataSource=!1,s.hasTemplate=!1,s.isFirstRender=!1,s.isNodeDropped=!1,s.isInteracted=!1,s.isRightClick=!1,s.mouseDownStatus=!1,s.isDropIn=!1,s.OldCheckedData=[],s}return l(i,t),e=i,i.prototype.getModuleName=function(){return"treeview"},i.prototype.preRender=function(){var t=this;this.checkActionNodes=[],this.parentNodeCheck=[],this.dragStartAction=!1,this.isAnimate=!1,this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",shiftSpace:"shift+space",ctrlSpace:"ctrl+space"},this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:g,ariaAttributes:Z,expandIconPosition:"Left",itemCreated:function(e){t.beforeNodeCreate(e)},enableHtmlSanitizer:this.enableHtmlSanitizer,itemNavigable:this.fullRowNavigable},this.updateListProp(this.fields),this.aniObj=new s.X5({}),this.treeList=[],this.isLoaded=!1,this.isInitalExpand=!1,this.expandChildren=[],this.index=0,this.setTouchClass(),this.DDTTreeData=JSON.parse(JSON.stringify(this.fields.dataSource)),(0,s.hX)(this.selectedNodes)&&this.setProperties({selectedNodes:[]},!0),(0,s.hX)(this.checkedNodes)&&this.setProperties({checkedNodes:[]},!0),(0,s.hX)(this.expandedNodes)?this.setProperties({expandedNodes:[]},!0):this.isInitalExpand=!0},i.prototype.getPersistData=function(){return this.addOnPersist(["selectedNodes","checkedNodes","expandedNodes"])},i.prototype.render=function(){this.initialRender=!0,this.initialize(),this.setDataBinding(!1),this.setDisabledMode(),this.setExpandOnType(),this.disabled||this.setRipple(),this.wireEditingEvents(this.allowEditing),this.setDragAndDrop(this.allowDragAndDrop),this.disabled||this.wireEvents(),this.initialRender=!1,this.renderComplete()},i.prototype.initialize=function(){this.element.setAttribute("role","tree"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active"),this.setCssClass(null,this.cssClass),this.setEnableRtl(),this.setFullRow(this.fullRowSelect),this.setTextWrap(),this.nodeTemplateFn=this.templateComplier(this.nodeTemplate)},i.prototype.setDisabledMode=function(){this.disabled?(this.element.classList.add(K),this.element.setAttribute("aria-disabled","true")):(this.element.classList.remove(K),this.element.setAttribute("aria-disabled","false"))},i.prototype.setEnableRtl=function(){(this.enableRtl?s.iQ:s.vy)([this.element],E)},i.prototype.setRipple=function(){var t="."+W+",."+b;this.rippleFn=(0,s.CF)(this.element,{selector:t,ignore:"."+b+" > ."+x+",."+I+",."+D+", ."+Y}),this.rippleIconFn=(0,s.CF)(this.element,{selector:"."+b+" > ."+x,isCenterRipple:!0})},i.prototype.setFullRow=function(t){(t?s.iQ:s.vy)([this.element],"e-fullrow-wrap")},i.prototype.setMultiSelect=function(t){t?this.element.setAttribute("aria-multiselectable","true"):this.element.setAttribute("aria-multiselectable","false")},i.prototype.templateComplier=function(t){if(t){this.hasTemplate=!0,this.element.classList.add(O);try{if("function"!=typeof t&&document.querySelectorAll(t).length)return(0,s.wE)(document.querySelector(t).innerHTML.trim());return(0,s.wE)(t)}catch(e){return(0,s.wE)(t)}}this.element.classList.remove(O)},i.prototype.setDataBinding=function(t){var e=this;this.treeList.push("false"),this.fields.dataSource instanceof n.M?(this.isOffline=this.fields.dataSource.dataSource.offline,this.fields.dataSource.ready?this.fields.dataSource.ready.then(function(t){e.isOffline=e.fields.dataSource.dataSource.offline,e.fields.dataSource instanceof n.M&&e.isOffline&&(e.treeList.pop(),e.treeData=t.result,e.isNumberTypeId=e.getType(),e.setRootData(),e.renderItems(!0),0!==e.treeList.length||e.isLoaded||e.finalize())}).catch(function(t){e.trigger("actionFailure",{error:t})}):this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(function(i){e.treeList.pop(),e.treeData=i.result,e.isNumberTypeId=e.getType(),e.setRootData(),t&&(e.changeDataSource=!0),e.renderItems(!0),e.changeDataSource=!1,0!==e.treeList.length||e.isLoaded||e.finalize()}).catch(function(t){e.trigger("actionFailure",{error:t})})):(this.treeList.pop(),(0,s.hX)(this.fields.dataSource)?this.rootData=this.treeData=[]:(this.treeData=JSON.parse(JSON.stringify(this.fields.dataSource)),this.setRootData()),this.isNumberTypeId=this.getType(),this.renderItems(!1)),0!==this.treeList.length||this.isLoaded||this.finalize()},i.prototype.getQuery=function(t,e){void 0===e&&(e=null);var i,n=[];if(t.query)i=t.query.clone();else{i=new a.X;for(var o=this.getActualProperties(t),d=0,h=Object.keys(o);d<h.length;d++){var l=h[d];"dataSource"!==l&&"tableName"!==l&&"child"!==l&&t[""+l]&&"url"!==l&&-1===n.indexOf(t[""+l])&&n.push(t[""+l])}i.select(n),Object.prototype.hasOwnProperty.call(o,"tableName")&&i.from(t.tableName)}return r.iY.addSorting(this.sortOrder,t.text,i),(0,s.hX)(e)||(0,s.hX)(t.parentID)||i.where(t.parentID,"equal",this.isNumberTypeId?parseFloat(e):e),i},i.prototype.getType=function(){return!!this.treeData[0]&&"number"==typeof(0,s._W)(this.fields.id,this.treeData[0])},i.prototype.setRootData=function(){if(this.dataType=this.getDataType(this.treeData,this.fields),1===this.dataType){this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID);var t=this.getChildNodes(this.treeData,void 0,!0);(0,s.hX)(t)?this.rootData=[]:this.rootData=t}else this.rootData=this.treeData},i.prototype.isChildObject=function(){return"object"==typeof this.fields.child},i.prototype.renderItems=function(t){this.listBaseOption.ariaAttributes.level=1;var e=this.getSortedData(this.rootData);this.ulElement=r.iY.createList(this.createElement,t?this.rootData:e,this.listBaseOption),this.element.appendChild(this.ulElement);var i=this.ulElement.querySelectorAll(".e-list-item");if(!1===this.loadOnDemand)for(var n=0;n<i.length;)this.renderChildNodes(i[parseInt(n.toString(),10)],!0,null,!0),n++;(1===(0,s.Ub)("."+m,this.element).length&&i&&0!==i.length||this.loadOnDemand)&&this.finalizeNode(this.element),this.parentNodeCheck=[],this.parentCheckData=[],this.updateCheckedStateFromDS(),this.autoCheck&&this.showCheckBox&&!this.isLoaded&&this.updateParentCheckState()},i.prototype.updateCheckedStateFromDS=function(){if(this.validNodes=[],this.treeData&&this.showCheckBox){if(1===this.dataType){for(var t=this.fields,e=new n.M(this.treeData).executeLocal(new a.X().where(t.isChecked,"equal",!0,!1)),i=0;i<e.length;i++){var r=e[parseInt(i.toString(),10)][this.fields.id]?e[parseInt(i.toString(),10)][this.fields.id].toString():null;if(-1!==this.checkedNodes.indexOf(r)||this.isLoaded||this.checkDisabledState(r,e[i]),e[parseInt(i.toString(),10)][this.fields.hasChildren])for(var o=e[parseInt(i.toString(),10)][this.fields.id],d=new n.M(this.treeData).executeLocal(new a.X().where(t.parentID,"equal",o,!1)),h=0;h<d.length;h++){var l=d[parseInt(h.toString(),10)][this.fields.id]?d[parseInt(h.toString(),10)][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(l)&&this.autoCheck&&this.checkDisabledState(l,d[h])}}for(var i=0;i<this.checkedNodes.length;i++){var c=this.fields,p=new n.M(this.treeData).executeLocal(new a.X().where(c.id,"equal",this.checkedNodes[parseInt(i.toString(),10)],!0));if(p[0]&&this.autoCheck&&(this.getCheckedNodeDetails(c,p),this.checkIndeterminateState(p[0])),p.length>0){var u=p[0][this.fields.id]?p[0][this.fields.id].toString():null;this.checkedNodes.indexOf(u)>-1&&-1===this.validNodes.indexOf(u)&&this.validNodes.push(u)}for(var f=new n.M(this.treeData).executeLocal(new a.X().where(c.parentID,"equal",this.checkedNodes[parseInt(i.toString(),10)],!0)),g=0;g<f.length;g++){var u=f[parseInt(g.toString(),10)][this.fields.id]?f[parseInt(g.toString(),10)][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(u)&&this.autoCheck&&this.checkDisabledState(u,f[g]),this.checkedNodes.indexOf(u)>-1&&-1===this.validNodes.indexOf(u)&&this.validNodes.push(u)}}}else if(2===this.dataType||this.fields.dataSource instanceof n.M&&this.isOffline){for(var g=0;g<this.treeData.length;g++){var v=this.treeData[parseInt(g.toString(),10)][this.fields.id]?this.treeData[parseInt(g.toString(),10)][this.fields.id].toString():"";this.treeData[parseInt(g.toString(),10)][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(v)&&this.checkDisabledState(v,this.treeData[g]),this.checkedNodes.indexOf(v)>-1&&-1===this.validNodes.indexOf(v)&&this.validNodes.push(v);var S=(0,s._W)(this.fields.child.toString(),this.treeData[parseInt(g.toString(),10)]);S&&this.updateChildCheckState(S,this.treeData[parseInt(g.toString(),10)])}this.validNodes=this.enablePersistence?this.checkedNodes:this.validNodes}this.setProperties({checkedNodes:this.validNodes},!0)}},i.prototype.getCheckedNodeDetails=function(t,e){var i=e[0][this.fields.parentID]?e[0][this.fields.parentID].toString():null,r=0,o=this.element.querySelector('[data-uid="'+e[0][this.fields.id]+'"]'),d=this.element.querySelector('[data-uid="'+e[0][this.fields.parentID]+'"]');if(o||d)d&&!(0,s.Lt)("."+U,d)&&this.changeState(d,"indeterminate",null,!0,!0);else{-1===this.parentNodeCheck.indexOf(i)&&this.parentNodeCheck.push(i);for(var h=this.getChildNodes(this.treeData,i),l=0;l<h.length;l++){var c=h[parseInt(l.toString(),10)][this.fields.id]?h[parseInt(l.toString(),10)][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(c)&&r++,r===h.length&&-1===this.checkedNodes.indexOf(i)&&this.checkDisabledState(i)}var p=new n.M(this.treeData).executeLocal(new a.X().where(t.id,"equal",i,!0));this.getCheckedNodeDetails(t,p)}},i.prototype.updateParentCheckState=function(){var t,e=(0,s.Ub)("."+J,this.element),i=this.treeData;this.element.classList.contains("e-filtering")&&(i=this.DDTTreeData);for(var r=0;r<e.length;r++){var o=(0,s.kp)(e[parseInt(r.toString(),10)],"."+v),d=o.getAttribute("data-uid").toString(),h=void 0;this.element.classList.contains("e-filtering")&&(h=new n.M(this.OldCheckedData).executeLocal(new a.X().where("parentID","equal",d,!0)));var l=0;if(t=1===this.dataType?new n.M(i).executeLocal(new a.X().where(this.fields.parentID,"equal",d,!0)):this.getChildNodes(i,d)){for(var c=this,p=0;p<t.length;p++)!function(e){var i=t[parseInt(e.toString(),10)][c.fields.id].toString();-1!==c.checkedNodes.indexOf(i)?l++:c.element.classList.contains("e-filtering")&&-1!==h.findIndex(function(t){return t.id===i})&&l++}(p);if(l===t.length){var u=o.getAttribute("data-uid");-1===this.checkedNodes.indexOf(u)&&this.checkDisabledState(u),this.changeState(o,"check",null,!0,!0)}else 0===l&&0===this.checkedNodes.length&&this.changeState(o,"uncheck",null,!0,!0)}var f=(0,s.kp)(o,"."+m);(0,s.hX)(f)||this.ensureParentCheckState((0,s.kp)(f,"."+v))}},i.prototype.checkIndeterminateState=function(t){var e;(e=1===this.dataType?this.element.querySelector('[data-uid="'+t[this.fields.parentID]+'"]'):this.element.querySelector('[data-uid="'+t[this.fields.id]+'"]'))?"true"!==e.getAttribute("aria-checked")&&this.changeState(e,"indeterminate",null,!0,!0):2===this.dataType&&-1===this.parentNodeCheck.indexOf(t[this.fields.id].toString())&&this.parentNodeCheck.push(t[this.fields.id].toString())},i.prototype.updateChildCheckState=function(t,e){for(var i=0,n=e[this.fields.id]?e[this.fields.id].toString():"",a=0;a<t.length;a++){var r=t[parseInt(a.toString(),10)][this.fields.id]?t[parseInt(a.toString(),10)][this.fields.id].toString():"";t[parseInt(a.toString(),10)][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(r)&&this.checkDisabledState(r,t[a]),-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(r)&&this.autoCheck&&this.checkDisabledState(r,t[a]),-1!==this.checkedNodes.indexOf(r)&&this.autoCheck&&i++,this.checkedNodes.indexOf(r)>-1&&-1===this.validNodes.indexOf(r)&&this.validNodes.push(r);var o=(0,s._W)(this.fields.child.toString(),t[parseInt(a.toString(),10)]);o&&o.length&&(-1===this.parentCheckData.indexOf(e)&&this.parentCheckData.push(e),this.updateChildCheckState(o,t[parseInt(a.toString(),10)])),i===t.length&&this.autoCheck&&-1===this.checkedNodes.indexOf(n)&&this.checkDisabledState(n,e)}if(0!==i&&this.autoCheck){this.checkIndeterminateState(e);for(var d=0;d<this.parentCheckData.length;d++)e!==this.parentCheckData[parseInt(d.toString(),10)]&&this.parentCheckData[parseInt(d.toString(),10)]&&this.checkIndeterminateState(this.parentCheckData[parseInt(d.toString(),10)])}this.parentCheckData=[]},i.prototype.beforeNodeCreate=function(t){if(this.showCheckBox){var e=(0,o.OK)(this.createElement,!0,{cssClass:this.touchClass});e.classList.add(Y);var i=(0,s.Lt)("div."+g+", div."+f,t.item),n=t.item.getAttribute("data-uid");t.item.childNodes[0].insertBefore(e,t.item.childNodes[0].childNodes[(0,s.hX)(i)?0:1]);var a=(0,s._W)(t.fields.isChecked,t.curData);this.checkedNodes.indexOf(n)>-1?((0,s.Lt)("."+q,e).classList.add(U),t.item.setAttribute("aria-checked","true"),this.addCheck(t.item)):(0,s.hX)(a)||"true"!==a.toString()?t.item.setAttribute("aria-checked","false"):((0,s.Lt)("."+q,e).classList.add(U),t.item.setAttribute("aria-checked","true"),this.addCheck(t.item));var r=(0,s.Lt)("."+q,e);s.Jm.add(r,"mousedown",this.frameMouseHandler,this),s.Jm.add(r,"mouseup",this.frameMouseHandler,this)}this.fullRowSelect&&this.createFullRow(t.item),this.allowMultiSelection&&!t.item.classList.contains(_)&&t.item.setAttribute("aria-selected","false");var d=t.fields;if(this.addActionClass(t,d.selected,_),this.addActionClass(t,d.expanded,B),t.item.setAttribute("tabindex","-1"),s.Jm.add(t.item,"focus",this.focusIn,this),!(0,s.hX)(this.nodeTemplateFn)){var h=t.item.querySelector("."+S),l=t.item.getAttribute("data-uid");h.innerHTML="",this.renderNodeTemplate(t.curData,h,l)}var c={node:t.item,nodeData:t.curData,text:t.text};this.isRefreshed||(this.trigger("drawNode",c),!1!==t.curData[this.fields.selectable]||this.showCheckBox||(t.item.classList.add($),t.item.firstElementChild.setAttribute("style","cursor: not-allowed")))},i.prototype.frameMouseHandler=function(t){var e=(0,s.Lt)(".e-ripple-container",t.target.parentElement);(0,o.Wn)(t,e)},i.prototype.addActionClass=function(t,e,i){var n=t.curData,a=(0,s._W)(e,n);(0,s.hX)(a)||"false"===a.toString()||t.item.classList.add(i)},i.prototype.getDataType=function(t,e){if(this.fields.dataSource instanceof n.M){for(var i=0;i<t.length;i++)if(this.isOffline){if("string"==typeof e.child&&(0,s.hX)((0,s._W)(e.child,t[parseInt(i.toString(),10)]))&&!(0,s.hX)((0,s._W)(e.parentID,t[parseInt(i.toString(),10)])))return 1}else if("string"==typeof e.child&&(0,s.hX)((0,s._W)(e.child,t[parseInt(i.toString(),10)])))return 1;return 2}for(var i=0,a=t.length;i<a;i++){if("string"==typeof e.child&&(!(0,s.hX)((0,s._W)(e.child,t[parseInt(i.toString(),10)]))||Object.prototype.hasOwnProperty.call(t[parseInt(i.toString(),10)],e.child))||this.isChildObject())return 2;if(!(0,s.hX)((0,s._W)(e.parentID,t[parseInt(i.toString(),10)]))||!(0,s.hX)((0,s._W)(e.hasChildren,t[parseInt(i.toString(),10)])))break}return 1},i.prototype.getGroupedData=function(t,e){for(var i=new a.X().group(e),s=r.iY.getDataSource(t,i),n=[],o=0;o<s.length;o++){var d=s[parseInt(o.toString(),10)].items;n.push(d)}return n},i.prototype.getSortedData=function(t){return t&&"None"!==this.sortOrder&&(t=r.iY.getDataSource(t,r.iY.addSorting(this.sortOrder,this.fields.text))),t},i.prototype.finalizeNode=function(t,e,i){var a=this;if(e||this.updateAttributes(t),!i){var r=(0,s.Ub)("."+B,t);if(!this.loadOnDemand&&this.fields.dataSource instanceof n.M&&(this.isInitalExpand=this.treeData.filter(function(t){return!0===t[a.fields.expanded]}).length>0||this.isInitalExpand),!this.isInitalExpand)for(var o=0;o<r.length;o++)this.renderChildNodes(r[parseInt(o.toString(),10)]);(0,s.vy)(r,B)}e||this.updateList(),this.isLoaded&&this.updateCheckedProp()},i.prototype.updateAttributes=function(t){for(var e=(0,s.Ub)("."+G,t),i=0;i<e.length;i++)e[parseInt(i.toString(),10)].setAttribute("alt",G);if(this.isLoaded){for(var n=(0,s.Ub)("."+_,t),a=0;a<n.length;a++){this.selectNode(n[parseInt(a.toString(),10)],null);break}(0,s.vy)(n,_)}for(var r=(0,s.Ub)("."+v+":not(."+B+")",t),o=0;o<r.length;o++){var d=(0,s.Lt)("div."+x,r[parseInt(o.toString(),10)]);d&&d.classList.contains(g)&&this.disableExpandAttr(r[parseInt(o.toString(),10)])}},i.prototype.updateCheckedProp=function(){if(this.showCheckBox){var t=[].concat([],this.checkedNodes);this.setProperties({checkedNodes:t},!0)}},i.prototype.ensureIndeterminate=function(){if(this.autoCheck)for(var t=(0,s.Ub)("li",this.element),e=0;e<t.length;e++)t[parseInt(e.toString(),10)].classList.contains(v)&&((0,s.Lt)("."+m,t[parseInt(e.toString(),10)])?this.ensureParentCheckState(t[parseInt(e.toString(),10)]):this.ensureChildCheckState(t[parseInt(e.toString(),10)]));else for(var i=(0,s.Ub)("."+J,this.element),e=0;e<i.length;e++)i[parseInt(e.toString(),10)].classList.remove(J)},i.prototype.ensureParentCheckState=function(t){if(!(0,s.hX)(t)&&!t.classList.contains(p)){var e=t;t.classList.contains(v)&&(e=(0,s.Lt)("."+m,t));var i=(0,s.Ub)("."+Y+" ."+U,e),r=(0,s.Ub)("."+J,e),o=(0,s.Ub)(this.checkDisabledChildren?"."+v:"."+v+":not(."+j+")",e),d=t.getElementsByClassName(Y)[0],h=o.length,l=i.length,c=[],u=[],f=t.getAttribute("data-uid"),g=!0,S=!1;o.forEach(function(t){t instanceof HTMLElement&&("true"===t.getAttribute("aria-checked")?S=!0:g=!1)});var y=!1;if(this.element.classList.contains("e-filtering")){l=new n.M(this.OldCheckedData).executeLocal(new a.X().where("parentID","equal",f,!0)).length;var k=new n.M(this.OldCheckedData).executeLocal(new a.X().where("hasChildren","equal",!0,!0));k.length>0&&this.OldCheckedData.some(function(t){return t.id===f})&&S&&(l=k.length,y=!0);h=(1===this.dataType?new n.M(this.DDTTreeData).executeLocal(new a.X().where(this.fields.parentID,"equal",f,!0)):this.getChildNodes(this.DDTTreeData,f)).length}if(!this.autoCheck||!this.showCheckBox||this.fields.dataSource instanceof n.M||(c=this.getSelectedChildNodeDetails(f),u=new n.M(this.checkActionNodes).executeLocal(new a.X().where("parentID","equal",f,!0))),0!==h||0!==l){h===l||y&&h>0&&u.length===c.length&&0!==u.length&&0!==c.length&&g&&this.autoCheck&&this.showCheckBox?this.changeState(d,"check",null,!0,!0):l>0&&!y&&this.autoCheck&&this.showCheckBox?this.changeState(d,"indeterminate",null,!0,!0):l>0||r.length>0?this.changeState(d,"indeterminate",null,!0,!0):0===l&&this.changeState(d,"uncheck",null,!0,!0);var N=(0,s.kp)(t,"."+m);if(!(0,s.hX)(N)){var C=(0,s.kp)(N,"."+v);this.ensureParentCheckState(C)}}}},i.prototype.getSelectedChildNodeDetails=function(t){var e=this;return this.checkedNodes.map(function(t){return new n.M(e.DDTTreeData).executeLocal(new a.X().where("id","equal",t,!0))[0]}).filter(function(e){return!!e&&"object"==typeof e&&"pid"in e&&e.pid.toString()===t})},i.prototype.ensureChildCheckState=function(t,e,i){var n=this;if(!(0,s.hX)(t)){var a=(0,s.Lt)("."+m,t),r=void 0;if(!(0,s.hX)(a)){var o=Array.from(a.querySelectorAll("li"));r=(0,s.Ub)("."+Y,a),this.isFilter&&(r=Array.from(r).filter(function(t){var e=t.closest("li").getAttribute("data-uid");return null!==e&&-1!==n.checkedNodes.indexOf(e)}),o=Array.from(o).filter(function(t){var e=t.getAttribute("data-uid");return null!==e&&-1!==n.checkedNodes.indexOf(e)}),0===r.length&&(r=(0,s.Ub)("."+Y,a),o=Array.from(a.querySelectorAll("li"))));for(var d=t.getElementsByClassName(q)[0].classList.contains(U),h=t.getElementsByClassName(q)[0].classList.contains(J),l=void 0,c=0;c<r.length;c++){var p=o[parseInt(c.toString(),10)].getAttribute("data-uid");if((0,s.hX)(this.currentLoadData)||(0,s.hX)((0,s._W)(this.fields.isChecked,this.currentLoadData[parseInt(c.toString(),10)]))){var u=r[parseInt(c.toString(),10)].getElementsByClassName(q)[0].classList.contains(U);d?l="check":u&&!this.isLoaded?l="check":-1!==this.checkedNodes.indexOf(p)&&this.isLoaded&&(h||d)?l="check":o[parseInt(c.toString(),10)].classList.contains("e-has-child")&&!(0,s.b0)(this.parentNodeCheck)&&this.autoCheck&&(d||h)&&-1!==this.parentNodeCheck.indexOf(p)?(l="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(p),1)):1===this.dataType&&!(0,s.b0)(this.parentNodeCheck)&&this.autoCheck&&(d||h)&&-1!==this.parentNodeCheck.indexOf(p)?(l="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(p),1)):l="uncheck"}else l=(0,s._W)(this.fields.isChecked,this.currentLoadData[parseInt(c.toString(),10)])?"check":"uncheck",-1!==this.ele&&(l=d?"check":"uncheck"),"uncheck"===l&&!(0,s.b0)(this.parentNodeCheck)&&this.autoCheck&&-1!==this.parentNodeCheck.indexOf(p)&&(this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(p),1),l="indeterminate");this.changeState(r[parseInt(c.toString(),10)],l,e,!0,!0)}}this.autoCheck&&this.isLoaded&&!i&&this.updateParentCheckState()}},i.prototype.doCheckBoxAction=function(t,e){if((0,s.hX)(t)){var i=(0,s.Ub)("."+Y,this.element);if(this.loadOnDemand)for(var n=0;n<i.length;n++)this.updateFieldChecked(i[parseInt(n.toString(),10)],e),this.changeState(i[parseInt(n.toString(),10)],e?"check":"uncheck",null,null,null,e);else for(var n=0;n<i.length;n++)this.updateFieldChecked(i[parseInt(n.toString(),10)],e),this.changeState(i[parseInt(n.toString(),10)],e?"check":"uncheck")}else{t.reverse();for(var a=t.length-1;a>=0;a--){var r=this.getElement(t[parseInt(a.toString(),10)]);if((0,s.hX)(r)){var o=t[a-t.length]?t[a-t.length].toString():t[parseInt(a.toString(),10)]?t[parseInt(a.toString(),10)].toString():null;if(""!==o&&e&&o)this.setValidCheckedNode(o,t),this.dynamicCheckState(o,e);else if(-1!==this.checkedNodes.indexOf(o)&&""!==o&&!e){this.checkedNodes.splice(this.checkedNodes.indexOf(o),1);var d=this.getChildNodes(this.treeData,o);if(d){for(var h=0;h<d.length;h++){var l=d[parseInt(h.toString(),10)][this.fields.id]?d[parseInt(h.toString(),10)][this.fields.id].toString():null;if(-1!==this.checkedNodes.indexOf(l)){this.checkedNodes.splice(this.checkedNodes.indexOf(l),1);var c=this.element.querySelector('[data-uid="'+l+'"]');c&&this.changeState(c,"uncheck",null)}}-1!==this.parentNodeCheck.indexOf(o)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(o),1)}o&&this.dynamicCheckState(o,e),this.updateField(this.treeData,this.fields,o,"isChecked",null)}continue}var p=(0,s.Lt)("."+m+" ."+Y,r);this.validateCheckNode(p,!e,r,null)}}if(t)for(var u=0;u<t.length-1;u++){var o=t[parseInt(u.toString(),10)]?t[parseInt(u.toString(),10)].toString():"";e||this.updateField(this.treeData,this.fields,o,"isChecked",null)}this.autoCheck&&this.updateParentCheckState()},i.prototype.updateFieldChecked=function(t,e){var i=(0,s.kp)(t,"."+v),n=i.getAttribute("data-uid");"true"!==this.getNodeData(i).isChecked||e||this.updateField(this.treeData,this.fields,n,"isChecked",null)},i.prototype.dynamicCheckState=function(t,e){if(1===this.dataType){var i=0,r=new n.M(this.treeData).executeLocal(new a.X().where(this.fields.id,"equal",t,!0));if(r[0]){var o=r[0][this.fields.id]?r[0][this.fields.id].toString():null,d=r[0][this.fields.parentID]?r[0][this.fields.parentID].toString():null,h=this.element.querySelector('[data-uid="'+d+'"]'),l=this.element.querySelector('[data-uid="'+o+'"]'),c=this.getChildNodes(this.treeData,d);if(c)for(var p=0;p<c.length;p++){var u=c[parseInt(p.toString(),10)][this.fields.id]?c[parseInt(p.toString(),10)][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(u)&&i++}-1!==this.checkedNodes.indexOf(t)&&h&&o===t&&this.autoCheck?this.changeState(h,"indeterminate",null):-1===this.checkedNodes.indexOf(t)&&l&&o===t&&!e?this.changeState(l,"uncheck",null):-1!==this.checkedNodes.indexOf(t)&&l&&o===t&&e?this.changeState(l,"check",null):-1===this.checkedNodes.indexOf(t)&&!l&&h&&o===t&&this.autoCheck&&0!==i?this.changeState(h,"indeterminate",null):-1===this.checkedNodes.indexOf(t)&&!l&&h&&o===t&&this.autoCheck&&0===i?this.changeState(h,"uncheck",null):l||h||o!==t||!this.autoCheck||this.updateIndeterminate(t,e)}}else if(2===this.dataType||this.fields.dataSource instanceof n.M&&this.isOffline)for(var o=void 0,h=void 0,f=void 0,p=0;p<this.treeData.length;p++){o=this.treeData[parseInt(p.toString(),10)][this.fields.id]?this.treeData[parseInt(p.toString(),10)][this.fields.id].toString():"",f=(h=this.element.querySelector('[data-uid="'+o+'"]'))?(0,s.Lt)("."+U,h):null,-1===this.checkedNodes.indexOf(o)&&h&&f&&!e&&this.changeState(h,"uncheck",null);var g=(0,s._W)(this.fields.child.toString(),this.treeData[parseInt(p.toString(),10)]);g&&this.updateChildIndeterminate(g,o,t,e,o)}},i.prototype.updateIndeterminate=function(t,e){var i,s=this.getTreeData(t),n=0;1===this.dataType&&(i=s[0][this.fields.parentID]?s[0][this.fields.parentID].toString():null);var a=this.getChildNodes(this.treeData,i);if(a)for(var r=0;r<a.length;r++){var o=a[parseInt(r.toString(),10)][this.fields.id]?a[parseInt(r.toString(),10)][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(o)&&n++}var d=this.element.querySelector('[data-uid="'+i+'"]');d&&e?this.changeState(d,"indeterminate",null):!e&&d&&-1===this.parentNodeCheck.indexOf(i)&&0!==n?this.changeState(d,"indeterminate",null):!e&&d&&-1===this.parentNodeCheck.indexOf(i)&&0===n?this.changeState(d,"uncheck",null):d||(e||-1!==this.checkedNodes.indexOf(i)||-1===this.parentNodeCheck.indexOf(i)?e&&-1===this.checkedNodes.indexOf(i)&&-1===this.parentNodeCheck.indexOf(i)?this.parentNodeCheck.push(i):e||-1===this.checkedNodes.indexOf(i)||-1!==this.parentNodeCheck.indexOf(i)||0===n||this.parentNodeCheck.push(i):this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(i),1),this.updateIndeterminate(i,e),-1===this.checkedNodes.indexOf(i)||e||this.checkedNodes.splice(this.checkedNodes.indexOf(i),1))},i.prototype.updateChildIndeterminate=function(t,e,i,n,a){for(var r=0,o=0;o<t.length;o++){var d=t[parseInt(o.toString(),10)][this.fields.id]?t[parseInt(o.toString(),10)][this.fields.id].toString():"";-1!==this.checkedNodes.indexOf(d)&&r++;var h=this.element.querySelector('[data-uid="'+e+'"]'),l=h?(0,s.Lt)("."+J,h):null,c=h?(0,s.Lt)("."+U,h):null,p=this.element.querySelector('[data-uid="'+d+'"]'),u=p?(0,s.Lt)("."+U,p):null;if(-1!==this.checkedNodes.indexOf(i)&&h&&d===i&&this.autoCheck)this.changeState(h,"indeterminate",null);else if(-1!==this.checkedNodes.indexOf(i)||!h||p||d!==i||n){if(-1===this.checkedNodes.indexOf(i)&&p&&d===i&&!n)this.changeState(p,"uncheck",null);else if(-1===this.checkedNodes.indexOf(i)&&l&&d===i&&this.autoCheck&&0===r&&!n)l.classList.remove(J);else if(-1===this.checkedNodes.indexOf(i)&&!p&&c&&d===i&&0===r)this.changeState(h,"uncheck",null);else if(-1===this.checkedNodes.indexOf(d)&&p&&u&&0===r)this.changeState(p,"uncheck",null);else if(!p&&!h&&d===i||-1!==this.parentNodeCheck.indexOf(e)&&this.autoCheck){var f=this.element.querySelector('[data-uid="'+a+'"]');n&&0!==r?this.changeState(f,"indeterminate",null):n&&r===t.length&&-1===this.checkedNodes.indexOf(e)?this.checkDisabledState(e):n||0!==r||-1===this.parentNodeCheck.indexOf(e)||this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(e)),-1===this.parentNodeCheck.indexOf(e)&&this.parentNodeCheck.push(e)}}else this.autoCheck?this.changeState(h,"uncheck",null):0!==r?this.changeState(h,"indeterminate",null):this.changeState(h,"uncheck",null);var g=(0,s._W)(this.fields.child.toString(),t[parseInt(o.toString(),10)]);g&&this.updateChildIndeterminate(g,d,i,n,a)}},i.prototype.changeState=function(t,e,i,n,a,r){var o,d=this,h=(0,s.kp)(t,"."+v);!this.checkDisabledChildren&&h&&(h.classList.contains(j)||this.disableNode&&-1!==this.disableNode.indexOf(h.getAttribute("data-uid")))||(t===h&&(t=(0,s.Lt)("."+Y,h)),n?this.nodeCheckAction(t,e,h,o,i,n,a,r):(this.checkActionNodes=[],o=this.getCheckEvent(h,e,i),this.trigger("nodeChecking",o,function(s){s.cancel||d.nodeCheckAction(t,e,h,s,i,n,a,r)})))},i.prototype.nodeCheckAction=function(t,e,i,n,a,r,o,d){var h,l=t.getElementsByClassName(q)[0];if("check"!==e||l.classList.contains(U)?"uncheck"===e&&(l.classList.contains(U)||l.classList.contains(J))?((0,s.vy)([l],[U,J]),this.removeCheck(i),h="false"):"indeterminate"===e&&this.autoCheck&&(l.classList.remove(U),l.classList.add(J),this.removeCheck(i),h="mixed"):(l.classList.remove(J),l.classList.add(U),this.addCheck(i),h="true"),h="check"===e?"true":"uncheck"===e?"false":h,(0,s.hX)(h)||i.setAttribute("aria-checked",h),o){var c=[].concat([],this.checkActionNodes);n=this.getCheckEvent(i,e,a),(0,s.b0)(r)&&(n.data=c)}void 0!==d&&this.ensureStateChange(i,d),r||(0,s.hX)(h)||(i.setAttribute("aria-checked",h),n.data[0].checked=h,this.trigger("nodeChecked",n),this.checkActionNodes=[])},i.prototype.addCheck=function(t){var e=t.getAttribute("data-uid");(0,s.hX)(e)||-1!==this.checkedNodes.indexOf(e)||this.checkDisabledState(e)},i.prototype.removeCheck=function(t){var e=this.checkedNodes.indexOf(t.getAttribute("data-uid"));e>-1&&this.checkedNodes.splice(e,1)},i.prototype.getCheckEvent=function(t,e,i){this.checkActionNodes.push(this.getNodeData(t));var n=this.checkActionNodes;return{action:e,cancel:!1,isInteracted:!(0,s.hX)(i),node:t,data:n}},i.prototype.finalize=function(){var t=(0,s.Lt)("."+m,this.element);if(!(0,s.hX)(t)){t.setAttribute("role",Z.treeRole),this.setMultiSelect(this.allowMultiSelection);var e=(0,s.Lt)("."+v,this.element);e&&(e.setAttribute("tabindex","0"),this.updateIdAttr(null,e)),this.allowTextWrap&&this.updateWrap(),this.renderReactTemplates(),this.hasPid=!!this.rootData[0]&&Object.prototype.hasOwnProperty.call(this.rootData[0],this.fields.parentID),this.doExpandAction()}},i.prototype.setTextWrap=function(){(this.allowTextWrap?s.iQ:s.vy)([this.element],"e-text-wrap"),s.Pw.isIE&&(this.allowTextWrap?s.iQ:s.vy)([this.element],"e-ie-wrap")},i.prototype.updateWrap=function(t){if(this.fullRowSelect)for(var e=t?(0,s.Ub)("."+v,t):this.liList,i=e.length,n=0;n<i;n++)this.calculateWrap(e[parseInt(n.toString(),10)])},i.prototype.calculateWrap=function(t){var e=(0,s.Lt)("."+W,t);e&&e.nextElementSibling&&(e.style.height=this.allowTextWrap?e.nextElementSibling.offsetHeight+"px":"")},i.prototype.doExpandAction=function(){var t=this,e=this.expandedNodes;if(!this.loadOnDemand&&this.fields.dataSource instanceof n.M&&(this.isInitalExpand=this.treeData.filter(function(e){return!0===e[t.fields.expanded]}).length>0||this.isInitalExpand),this.isInitalExpand&&e.length>0){if(this.setProperties({expandedNodes:[]},!0),this.fields.dataSource instanceof n.M)this.expandGivenNodes(e);else{for(var i=0;i<e.length;i++){var a=(0,s.Lt)('[data-uid="'+e[parseInt(i.toString(),10)]+'"]',this.element);if((0,s.hX)(a)){e[parseInt(i.toString(),10)]&&-1===this.expandChildren.indexOf(e[parseInt(i.toString(),10)])&&this.expandChildren.push(e[parseInt(i.toString(),10)].toString());continue}var r=(0,s.Lt)("."+g,(0,s.Lt)("."+b,a));(0,s.hX)(r)||this.expandAction(a,r,null)}this.afterFinalized()}}else this.afterFinalized()},i.prototype.expandGivenNodes=function(t){var e=this;this.expandCallback(t[this.index],function(){e.index++,e.index<t.length?e.expandGivenNodes(t):e.afterFinalized()}),this.index>0&&(this.index=0)},i.prototype.expandCallback=function(t,e){var i=(0,s.Lt)('[data-uid="'+t+'"]',this.element);if((0,s.hX)(i))e();else{var n=(0,s.Lt)("."+g,(0,s.Lt)("."+b,i));(0,s.hX)(n)||this.expandAction(i,n,null,!1,e),e()}},i.prototype.afterFinalized=function(){if(this.doSelectionAction(),this.updateCheckedProp(),this.isAnimate=!0,this.isInitalExpand=!1,(!this.isLoaded||this.isFieldChange)&&!this.isNodeDropped){var t={data:this.treeData};this.trigger("dataBound",t)}this.isLoaded=!0,this.isNodeDropped=!1},i.prototype.doSelectionAction=function(){var t=(0,s.Ub)("."+_,this.element),e=this.selectedNodes;if(e.length>0){this.setProperties({selectedNodes:[]},!0);for(var i=0;i<e.length;i++){var n=(0,s.Lt)('[data-uid="'+e[parseInt(i.toString(),10)]+'"]',this.element);if(n&&!n.classList.contains("e-active")?this.selectNode(n,null,!0):this.selectedNodes.push(e[parseInt(i.toString(),10)]),!this.allowMultiSelection)break}}else this.selectGivenNodes(t);(0,s.vy)(t,_)},i.prototype.selectGivenNodes=function(t){for(var e=0;e<t.length&&(t[parseInt(e.toString(),10)].classList.contains("e-disable")||this.selectNode(t[parseInt(e.toString(),10)],null,!0),this.allowMultiSelection);e++);},i.prototype.clickHandler=function(t){var e=s.Pw.isDevice&&t.originalEvent.changedTouches&&!s.Pw.isIos?document.elementFromPoint(t.originalEvent.changedTouches[0].clientX,t.originalEvent.changedTouches[0].clientY):t.originalEvent.target;if(s.Jm.remove(this.element,"contextmenu",this.preventContextMenu),e&&!this.dragStartAction){var i=e.classList,n=(0,s.kp)(e,"."+v);if(!(!n||n.classList.contains($)&&!(i.contains(g)||i.contains(f)))){if(3!==t.originalEvent.which){var a=(0,s.Lt)(".e-ripple-element",n),r=(0,s.Lt)("."+x,n);if(this.removeHover(),this.setFocusElement(n),this.showCheckBox&&!n.classList.contains("e-disable")){var o=(0,s.kp)(e,"."+Y);if(!(0,s.hX)(o)){var d=(0,s.Lt)("."+q,o);this.validateCheckNode(o,d.classList.contains(U),n,t.originalEvent),this.triggerClickEvent(t.originalEvent,n);return}}i.contains(g)?this.expandAction(n,e,t):i.contains(f)?this.collapseNode(n,e,t):a&&r?r.classList.contains(Q)&&r.classList.contains(g)?this.expandAction(n,r,t):r.classList.contains(Q)&&r.classList.contains(f)?this.collapseNode(n,r,t):i.contains(m)||i.contains(v)||this.toggleSelect(n,t.originalEvent,!1):i.contains(m)||i.contains(v)||this.toggleSelect(n,t.originalEvent,!1)}3===t.originalEvent.which&&(this.isRightClick=!0),this.triggerClickEvent(t.originalEvent,n)}}},i.prototype.nodeCheckedEvent=function(t,e,i){var s=this.getCheckEvent(t,e?"uncheck":"check",i);s.data=s.data.splice(0,s.data.length-1),this.trigger("nodeChecked",s)},i.prototype.updateOldCheckedData=function(t){var e=this,i=new n.M(t),s=i.executeLocal(new a.X().where("isChecked","equal","true",!0)),r=i.executeLocal(new a.X().where("isChecked","equal","false",!0));if(r.length>0){var o=this.OldCheckedData.findIndex(function(t){return t.id===r[0].id});if(-1!==o){this.OldCheckedData.splice(o,1);var d=this.OldCheckedData.filter(function(t){return t.parentID===r[0].id});d.length>0&&d.forEach(function(t){var i=e.OldCheckedData.findIndex(function(e){return e.id===t.id});-1!==i&&e.OldCheckedData.splice(i,1)});return}}if(s.length>0){var o=this.OldCheckedData.findIndex(function(t){return t.id===s[0].id});if(-1===o){this.OldCheckedData.push(s[0]);return}}},i.prototype.triggerClickEvent=function(t,e){this.trigger("nodeClicked",{event:t,node:e})},i.prototype.expandNode=function(t,e,i){var a=this;if(this.renderReactTemplates(),e.classList.contains(N)&&this.hideSpinner(e),this.initialRender||e.classList.add("interaction"),!0!==i||!0===i&&t.classList.contains("e-expanded")){if(!0!==this.preventExpand){(0,s.vy)([e],g),(0,s.iQ)([e],f);var r=0,o=0,d=(0,s.Lt)("."+m,t);if(this.isAnimate&&!this.isRefreshed){this.setHeight(t,d);var h=(0,s.Lt)("."+v+"."+k,t);this.aniObj.animate(d,{name:this.animation.expand.effect,duration:0===this.animation.expand.duration&&"Enable"===s.QM?400:this.animation.expand.duration,timingFunction:this.animation.expand.easing,begin:function(){t.style.overflow="hidden",!(0,s.hX)(h)&&h instanceof HTMLElement&&h.classList.add(V),r=t.offsetHeight,o=(0,s.Lt)("."+b,t).offsetHeight},progress:function(t){t.element.style.display="block",a.animateHeight(t,r,o)},end:function(i){i.element.style.display="block",!(0,s.hX)(h)&&h instanceof HTMLElement&&h.classList.remove(V),a.expandedNode(t,d,e)}})}else this.expandedNode(t,d,e)}}else(0,s.Lt)("."+m,t).style.display="none",this.fields.dataSource instanceof n.M==!0&&(this.preventExpand=!1);this.initialRender&&e.classList.add("interaction")},i.prototype.expandedNode=function(t,e,i){e.style.display="block",t.style.display="block",t.style.overflow="",t.style.height="",(0,s.vy)([i],C),this.addExpand(t),this.allowTextWrap&&this.isLoaded&&this.isFirstRender&&(this.updateWrap(t),this.isFirstRender=!1),this.isLoaded&&this.expandArgs&&!this.isRefreshed&&(this.expandArgs=this.getExpandEvent(t,null),this.expandArgs.isInteracted=this.isInteracted,this.trigger("nodeExpanded",this.expandArgs))},i.prototype.addExpand=function(t){t.setAttribute("aria-expanded","true"),(0,s.vy)([t],H);var e=t.getAttribute("data-uid");(0,s.hX)(e)||-1!==this.expandedNodes.indexOf(e)||this.expandedNodes.push(e)},i.prototype.collapseNode=function(t,e,i){var n,a=this;e.classList.contains(C)||((0,s.iQ)([e],C),this.isLoaded?(n=this.getExpandEvent(t,i),this.isInteracted=n.isInteracted,this.trigger("nodeCollapsing",n,function(i){i.cancel?(0,s.vy)([e],C):a.nodeCollapseAction(t,e,i)})):this.nodeCollapseAction(t,e,n))},i.prototype.nodeCollapseAction=function(t,e,i){var n=this;(0,s.vy)([e],f),(0,s.iQ)([e],g);var a=0,r=0,o=(0,s.Lt)("."+m,t),d=(0,s.Lt)("."+v+"."+k,t);this.isAnimate?this.aniObj.animate(o,{name:this.animation.collapse.effect,duration:0===this.animation.collapse.duration&&"Enable"===s.QM?400:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing,begin:function(){t.style.overflow="hidden",!(0,s.hX)(d)&&d instanceof HTMLElement&&d.classList.add(V),a=(0,s.Lt)("."+b,t).offsetHeight,r=t.offsetHeight},progress:function(t){n.animateHeight(t,a,r)},end:function(a){a.element.style.display="none",!(0,s.hX)(d)&&d instanceof HTMLElement&&d.classList.remove(V),n.collapsedNode(t,o,e,i)}}):this.collapsedNode(t,o,e,i)},i.prototype.collapsedNode=function(t,e,i,n){e.style.display="none",t.style.overflow="",t.style.height="",(0,s.vy)([i],C),this.removeExpand(t),this.isLoaded&&((n=this.getExpandEvent(t,null)).isInteracted=this.isInteracted,this.trigger("nodeCollapsed",n))},i.prototype.removeExpand=function(t,e){e?t.removeAttribute("aria-expanded"):this.disableExpandAttr(t);var i=this.expandedNodes.indexOf(t.getAttribute("data-uid"));i>-1&&this.expandedNodes.splice(i,1)},i.prototype.disableExpandAttr=function(t){t.setAttribute("aria-expanded","false"),(0,s.iQ)([t],H)},i.prototype.setHeight=function(t,e){e.style.display="block",e.style.visibility="hidden",t.style.height=t.offsetHeight+"px",e.style.display="none",e.style.visibility=""},i.prototype.animateHeight=function(t,e,i){var s=(t.duration-t.timeStamp)/t.duration;t.element.parentElement.style.height=(i-e)*s+e+"px"},i.prototype.renderChildNodes=function(t,e,i,a,o){var d,h=this,l=(0,s.Lt)("div."+x,t);if(!(0,s.hX)(l)){if(this.showSpinner(l),this.fields.dataSource instanceof n.M){var c=this.parents(t,"."+m).length,p=this.getChildFields(this.fields,c,1);if((0,s.hX)(p)||(0,s.hX)(p.dataSource)){(0,s.Yo)(l),this.removeExpand(t,!0);return}this.treeList.push("false"),this.fields.dataSource instanceof n.M&&this.isOffline?(this.treeList.pop(),d=this.getChildNodes(this.treeData,t.getAttribute("data-uid")),this.loadChild(d,p,l,t,e,i,a)):p.dataSource.executeQuery(this.getQuery(p,t.getAttribute("data-uid"))).then(function(s){h.treeList.pop(),d=s.result,1===h.dataType&&(h.dataType=2),h.loadChild(d,p,l,t,e,i,a)}).catch(function(t){h.trigger("actionFailure",{error:t})})}else{if(d=this.getChildNodes(this.treeData,t.getAttribute("data-uid"),!1,parseFloat(t.getAttribute("aria-level"))+1),this.currentLoadData=this.getSortedData(d),(0,s.hX)(d)||0===d.length){(0,s.Yo)(l),l.classList.contains(N)&&this.hideSpinner(l),this.removeExpand(t,!0);return}this.listBaseOption.ariaAttributes.level=parseFloat(t.getAttribute("aria-level"))+1,t.appendChild(r.iY.createList(this.createElement,this.currentLoadData,this.listBaseOption)),this.expandNode(t,l,a),this.setSelectionForChildNodes(d),this.ensureCheckNode(t,o),this.finalizeNode(t,o,e),this.disableTreeNodes(d),this.renderSubChild(t,e,a,o)}}},i.prototype.loadChild=function(t,e,i,a,o,d,h){if(this.currentLoadData=t,(0,s.hX)(t)||0===t.length)(0,s.Yo)(i),this.removeExpand(a,!0);else{if(this.updateListProp(e),this.fields.dataSource instanceof n.M&&!this.isOffline){var l=a.getAttribute("data-uid"),c=this.getNodeObject(l);(0,s.KY)("child",t,c)}this.listBaseOption.ariaAttributes.level=parseFloat(a.getAttribute("aria-level"))+1,a.appendChild(r.iY.createList(this.createElement,t,this.listBaseOption)),this.expandNode(a,i,h),this.setSelectionForChildNodes(t),this.ensureCheckNode(a),this.finalizeNode(a),this.disableTreeNodes(t),this.renderSubChild(a,o,h)}d&&d(),o&&this.expandedNodes.push(a.getAttribute("data-uid")),0!==this.treeList.length||this.isLoaded||this.finalize()},i.prototype.disableTreeNodes=function(t){if(!(0,s.hX)(this.disableNode)&&0!==this.disableNode.length)for(var e=0;e<t.length;){var i=t[parseInt(e.toString(),10)][this.fields.id]?t[parseInt(e.toString(),10)][this.fields.id].toString():null;void 0!==this.disableNode&&-1!==this.disableNode.indexOf(i)&&this.doDisableAction([i]),e++}},i.prototype.setSelectionForChildNodes=function(t){if(!(0,s.hX)(this.selectedNodes)&&0!==this.selectedNodes.length)for(e=0;e<t.length;e++){var e,i=t[parseInt(e.toString(),10)][this.fields.id]?t[parseInt(e.toString(),10)][this.fields.id].toString():null;void 0!==this.selectedNodes&&-1!==this.selectedNodes.indexOf(i)&&this.doSelectionAction()}},i.prototype.ensureCheckNode=function(t,e){this.showCheckBox&&(this.ele=this.checkedElement?this.checkedElement.indexOf(t.getAttribute("data-uid")):null,this.autoCheck&&(this.ensureChildCheckState(t,null,e),(!e||(0,s.Lt)("."+U,this.element)||(0,s.Lt)("."+J,this.element))&&this.ensureParentCheckState(t))),this.currentLoadData=null},i.prototype.getFields=function(t,e,i){return e===i?t:this.getFields(this.getChildMapper(t),e,i+1)},i.prototype.getChildFields=function(t,e,i){return e===i?this.getChildMapper(t):this.getChildFields(this.getChildMapper(t),e,i+1)},i.prototype.getChildMapper=function(t){return"string"==typeof t.child||(0,s.hX)(t.child)?t:t.child},i.prototype.getChildNodes=function(t,e,i,n){var a,r=this;if(void 0===i&&(i=!1),(0,s.hX)(t))return a;if(1===this.dataType)return this.getChildGroup(this.groupedData,e,i);if("string"==typeof this.fields.child)return this.findChildNodes(t,this.fields.id,e)||this.findNestedChildNodes(t,e,n)||[];if(this.isChildObject()){for(var o=(0,s.hX)(n)?this.fields.child:this.fields,d=1;d<n&&!(0,s.hX)(o.child);)o=o.child,d++;this.updateListProp(o);var h=t.findIndex(function(t){return(0,s._W)(r.fields.id,t)&&(0,s._W)(r.fields.id,t).toString()===e});if(-1!==h)return(0,s._W)("child",t[parseInt(h.toString(),10)]);if(-1===h)for(var l=0,c=t.length;l<c;l++){var p=(0,s._W)("child",t[parseInt(l.toString(),10)]),u=(0,s.hX)(p)?-1:p.findIndex(function(t){return(0,s._W)(r.fields.child.id,t)&&(0,s._W)(r.fields.child.id,t).toString()===e});if(-1!==u)return(0,s._W)("child",p[parseInt(u.toString(),10)]);if(!(0,s.hX)(p)&&void 0!==(a=this.getChildNodes(p,e,!1,n)))break}}return a},i.prototype.findChildNodes=function(t,e,i){var n=t.findIndex(function(t){var n=(0,s._W)(e,t);return n&&n.toString()===i});return -1!==n?(0,s._W)(this.fields.child,t[n]):null},i.prototype.findNestedChildNodes=function(t,e,i){for(var n=0;n<t.length;n++){var a=t[n],r=(0,s._W)(this.fields.child,a);if(!(0,s.hX)(r)){var o=this.findChildNodes(r,this.fields.id,e);if(o)return o;var d=this.getChildNodes(r,e,!1,i);if(d&&d.length>0)return d}}},i.prototype.getChildGroup=function(t,e,i){var n;if((0,s.hX)(t))return n;for(var a=0,r=t.length;a<r;a++){if((0,s.hX)(t[parseInt(a.toString(),10)][0])||(0,s.hX)((0,s._W)(this.fields.parentID,t[parseInt(a.toString(),10)][0]))){if(i)return t[parseInt(a.toString(),10)];return[]}if((0,s._W)(this.fields.parentID,t[parseInt(a.toString(),10)][0]).toString()===e)return t[parseInt(a.toString(),10)]}return n},i.prototype.renderSubChild=function(t,e,i,n){if(e)for(var a=(0,s.Ub)("."+g,t),r=0,o=a.length;r<o;r++){var d=a[parseInt(r.toString(),10)];if(t.querySelector(".e-icons")!==a[parseInt(r.toString(),10)]){var h=(0,s.kp)(d,"."+v);this.expandArgs=this.getExpandEvent(h,null),!0!==i&&this.trigger("nodeExpanding",this.expandArgs),this.renderChildNodes(h,e,null,i,n)}}},i.prototype.toggleSelect=function(t,e,i){t.classList.contains("e-disable")||(this.allowMultiSelection&&(e&&e.ctrlKey||i)&&this.isActive(t)?this.unselectNode(t,e):this.selectNode(t,e,i))},i.prototype.isActive=function(t){return!!t.classList.contains(k)},i.prototype.selectNode=function(t,e,i){var n,a=this;if((0,s.hX)(t)||!this.allowMultiSelection&&this.isActive(t)&&!(0,s.hX)(e)){this.setFocusElement(t);return}this.isLoaded?(n=this.getSelectEvent(t,"select",e),this.trigger("nodeSelecting",n,function(s){s.cancel||s.node.classList.contains($)||a.nodeSelectAction(t,e,s,i)})):this.nodeSelectAction(t,e,n,i)},i.prototype.nodeSelectAction=function(t,e,i,n){if(this.allowMultiSelection&&(n||e&&(!e||e.ctrlKey||e.metaKey))||this.removeSelectAll(),this.allowMultiSelection&&e&&e.shiftKey){this.startNode||(this.startNode=t);var a=this.liList.indexOf(this.startNode),r=this.liList.indexOf(t);if(a>r){var o=a;a=r,r=o}for(var d=a;d<=r;d++){var h=this.liList[parseInt(d.toString(),10)];(0,s.zN)(h)&&!h.classList.contains("e-disable")&&this.addSelect(h)}}else this.startNode=t,this.addSelect(t);this.isLoaded&&(i.nodeData=this.getNodeData(t),this.trigger("nodeSelected",i),this.isRightClick=!1),this.isRightClick=!1},i.prototype.unselectNode=function(t,e){var i,s=this;this.isLoaded?(i=this.getSelectEvent(t,"un-select",e),this.trigger("nodeSelecting",i,function(e){e.cancel||s.nodeUnselectAction(t,e)})):this.nodeUnselectAction(t,i)},i.prototype.nodeUnselectAction=function(t,e){this.removeSelect(t),this.setFocusElement(t),this.isLoaded&&(e.nodeData=this.getNodeData(t),this.trigger("nodeSelected",e))},i.prototype.setFocusElement=function(t){if(!(0,s.hX)(t)){var e=this.getFocusedNode();e&&((0,s.vy)([e],z),e.setAttribute("tabindex","-1")),(0,s.iQ)([t],z),t.setAttribute("tabindex","0"),s.Jm.add(t,"blur",this.focusOut,this),this.updateIdAttr(e,t)}},i.prototype.addSelect=function(t){t.setAttribute("aria-selected","true"),(0,s.iQ)([t],k);var e=t.getAttribute("data-uid");(0,s.hX)(e)||-1!==this.selectedNodes.indexOf(e)||this.selectedNodes.push(e)},i.prototype.removeSelect=function(t){this.allowMultiSelection?t.setAttribute("aria-selected","false"):t.removeAttribute("aria-selected"),(0,s.vy)([t],k);var e=this.selectedNodes.indexOf(t.getAttribute("data-uid"));e>-1&&this.selectedNodes.splice(e,1)},i.prototype.removeSelectAll=function(){for(var t=this.element.querySelectorAll("."+k),e=0;e<t.length;e++){var i=t[e];this.allowMultiSelection?i.setAttribute("aria-selected","false"):i.removeAttribute("aria-selected")}(0,s.vy)(t,k),this.setProperties({selectedNodes:[]},!0)},i.prototype.getSelectEvent=function(t,e,i){var n=this.getNodeData(t);return{action:e,cancel:!1,isInteracted:!(0,s.hX)(i),node:t,nodeData:n}},i.prototype.setExpandOnType=function(){this.expandOnType="Auto"===this.expandOn?s.Pw.isDevice?"Click":"DblClick":this.expandOn},i.prototype.expandHandler=function(t){var e=t.originalEvent.target;!e||e.classList.contains(D)||e.classList.contains(p)||e.classList.contains(m)||e.classList.contains(v)||e.classList.contains(x)||this.showCheckBox&&(0,s.kp)(e,"."+Y)||this.expandCollapseAction((0,s.kp)(e,"."+v),t)},i.prototype.expandCollapseAction=function(t,e){var i=(0,s.Lt)("div."+x,t);if(!(!i||i.classList.contains(C))){var n=i.classList;n.contains(g)?this.expandAction(t,i,e):n.contains(f)&&this.collapseNode(t,i,e)}},i.prototype.expandAction=function(t,e,i,n,a,r){var o=this;e.classList.contains(C)||((0,s.iQ)([e],C),this.isLoaded&&!this.isRefreshed?(this.expandArgs=this.getExpandEvent(t,i),this.isInteracted=this.expandArgs.isInteracted,this.trigger("nodeExpanding",this.expandArgs,function(i){i.cancel?(0,s.vy)([e],C):o.nodeExpandAction(t,e,n,a,r)})):this.nodeExpandAction(t,e,n,a,r))},i.prototype.nodeExpandAction=function(t,e,i,n,a){var r=(0,s.Lt)("."+m,t);if(r&&"UL"===r.nodeName)this.expandNode(t,e);else{this.isFirstRender=!0,this.renderChildNodes(t,i,n,null,a);for(var o=(0,s.Ub)("."+v,t),d=0;d<o.length;d++){var h=this.getId(o[parseInt(d.toString(),10)]);if(-1!==this.expandChildren.indexOf(h)&&void 0!==this.expandChildren){var l=(0,s.Lt)("."+g,(0,s.Lt)("."+b,o[parseInt(d.toString(),10)]));(0,s.hX)(l)||this.expandAction(o[parseInt(d.toString(),10)],l,null),this.expandChildren.splice(this.expandChildren.indexOf(h),1)}}}},i.prototype.keyActionHandler=function(t){var e=this,i=t.target,n=this.getFocusedNode();if(i&&i.classList.contains(D)){"enter"===t.action?i.blur():"escape"===t.action&&(i.value=this.oldText,i.blur());return}t.preventDefault(),this.trigger("keyPress",{cancel:!1,event:t,node:n},function(i){if(!i.cancel)switch(t.action){case"space":e.showCheckBox?e.checkNode(t):e.toggleSelect(n,t);break;case"moveRight":e.openNode(!e.enableRtl,t);break;case"moveLeft":e.openNode(!!e.enableRtl,t);break;case"shiftDown":e.shiftKeySelect(!0,t);break;case"moveDown":case"ctrlDown":case"csDown":e.navigateNode(!0);break;case"shiftUp":e.shiftKeySelect(!1,t);break;case"moveUp":case"ctrlUp":case"csUp":e.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":e.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":e.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":case"shiftSpace":case"ctrlSpace":e.toggleSelect(n,t);break;case"f2":e.allowEditing&&!n.classList.contains("e-disable")&&e.createTextbox(n);break;case"ctrlA":if(e.allowMultiSelection){var a=(0,s.Ub)("."+v+":not(."+k+")",e.element);e.selectGivenNodes(a)}}})},i.prototype.navigateToFocus=function(t){var e=this.getFocusedNode().querySelector("."+b),i=e.getBoundingClientRect(),n=this.getScrollParent(this.element);if(!(0,s.hX)(n)){var a=n.getBoundingClientRect();i.bottom>a.bottom?n.scrollTop+=i.bottom-a.bottom:i.top<a.top&&(n.scrollTop-=a.top-i.top)}this.isVisibleInViewport(e)||e.scrollIntoView(t)},i.prototype.isVisibleInViewport=function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},i.prototype.getScrollParent=function(t){return(0,s.hX)(t)?null:t.scrollHeight>t.clientHeight?t:this.getScrollParent(t.parentElement)},i.prototype.shiftKeySelect=function(t,e){if(this.allowMultiSelection){var i=this.getFocusedNode(),s=t?this.getNextNode(i):this.getPrevNode(i);this.removeHover(),this.setFocusElement(s),this.toggleSelect(s,e,!1),this.navigateToFocus(!t)}else this.navigateNode(t)},i.prototype.checkNode=function(t){var e=this.getFocusedNode(),i=(0,s.Lt)("."+Y,e),n=(0,s.Lt)(" ."+q,i).classList.contains(U);e.classList.contains("e-disable")||0!==e.getElementsByClassName("e-checkbox-disabled").length||this.validateCheckNode(i,n,e,t)},i.prototype.validateCheckNode=function(t,e,i,n){var a=this,r=(0,s.kp)(t,"."+v);this.checkActionNodes=[];var o=e?"false":"true";(0,s.hX)(o)||r.setAttribute("aria-checked",o);var d=this.getCheckEvent(r,e?"uncheck":"check",n);this.trigger("nodeChecking",d,function(s){s.cancel||a.nodeCheckingAction(t,e,i,s,n)})},i.prototype.nodeCheckingAction=function(t,e,i,n,a){if(-1===this.checkedElement.indexOf(i.getAttribute("data-uid"))&&(this.checkedElement.push(i.getAttribute("data-uid")),this.autoCheck)){var r=this.getChildNodes(this.treeData,i.getAttribute("data-uid"));null!==r?this.allCheckNode(r,this.checkedElement,null,null,!1):r=null}if(this.changeState(t,e?"uncheck":"check",a,!0),this.autoCheck){this.ensureChildCheckState(i),this.updateOldCheckedData([this.getNodeData(i)]),this.ensureParentCheckState((0,s.kp)((0,s.kp)(i,"."+m),"."+v));var o=void 0;"check"===n.action?o=!0:"uncheck"===n.action&&(o=!1),this.ensureStateChange(i,o)}this.nodeCheckedEvent(t,e,a)},i.prototype.ensureStateChange=function(t,e){var i=this,r=(0,s.Lt)("."+m,t),o=t.getAttribute("data-uid"),d=this.fields;if(1===this.dataType&&this.autoCheck){var h=new n.M(this.treeData).executeLocal(new a.X().where(d.parentID,"equal",o,!0)),l=h.filter(function(t){return -1!==i.checkedNodes.indexOf(t[d.id].toString())},this);-1!==this.checkedNodes.indexOf(o)&&l.length!==h.length&&this.isFilter&&l.length>0&&(h=l);for(var c=0;c<h.length;c++){var p=h[parseInt(c.toString(),10)][this.fields.id]?h[parseInt(c.toString(),10)][this.fields.id].toString():null,u=h[parseInt(c.toString(),10)][this.fields.isChecked]?h[parseInt(c.toString(),10)][this.fields.isChecked].toString():null;if(-1!==this.checkedNodes.indexOf(o)&&-1===this.checkedNodes.indexOf(p)){this.checkDisabledState(p,h[c]);var f=this.getChildNodes(this.treeData,p);this.getChildItems(f,e),-1!==this.parentNodeCheck.indexOf(p)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(p),1)}else if(-1===this.checkedNodes.indexOf(o)&&null===r&&-1!==this.checkedNodes.indexOf(p)){if(this.checkedNodes.splice(this.checkedNodes.indexOf(p),1),"true"===u&&this.updateField(this.treeData,this.fields,p,"isChecked",null),-1===this.checkedNodes.indexOf(o)&&null===r||-1!==this.parentNodeCheck.indexOf(p)){var g=this.getChildNodes(this.treeData,p);this.getChildItems(g,e),-1!==this.parentNodeCheck.indexOf(p)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(p),1)}}else{var f=this.getChildNodes(this.treeData,p);this.getChildItems(f,e)}}}else if(1!==this.dataType||this.autoCheck){var f=this.getChildNodes(this.treeData,o);if(f){var v=f.filter(function(t){var e=String(t[Object.keys(t)[0]]);return -1!==i.checkedNodes.indexOf(e)});v.length>0&&f.length&&this.isFilter&&(f=v),this.childStateChange(f,o,r,e)}}else if(e)for(var c=0;c<this.treeData.length;c++){var S=this.treeData[parseInt(c.toString(),10)][this.fields.id]?this.treeData[parseInt(c.toString(),10)][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(S)&&this.checkDisabledState(S,this.treeData[c])}else{for(var y=new n.M(this.treeData).executeLocal(new a.X().where(d.isChecked,"equal",!0,!1)),c=0;c<y.length;c++){var k=y[parseInt(c.toString(),10)][this.fields.id]?y[parseInt(c.toString(),10)][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(k)&&this.checkedNodes.splice(this.checkedNodes.indexOf(k),1),this.updateField(this.treeData,this.fields,k,"isChecked",null)}this.checkedNodes=[]}},i.prototype.checkDisabledState=function(t,e){var i=this.checkDisabledChildren;if(!i){var n=!0;if(this.loadOnDemand&&this.fields.htmlAttributes&&(e=(0,s.hX)(e)?e:this.getNodeObject(t),!(0,s.hX)(e))){var a=e[this.fields.htmlAttributes];a&&!(0,s.hX)(a.class)&&-1!==a.class.indexOf(j)&&(n=!1)}var r=(0,s.Lt)('[data-uid="'+t+'"]',this.element);i=r?!r.classList.contains(j):-1===this.disableNode.indexOf(t)&&n}i&&this.checkedNodes.push(t)},i.prototype.getChildItems=function(t,e){for(var i=0;i<t.length;i++){var s=t[parseInt(i.toString(),10)][this.fields.id]?t[parseInt(i.toString(),10)][this.fields.id].toString():null,n=t[parseInt(i.toString(),10)][this.fields.isChecked]?t[parseInt(i.toString(),10)][this.fields.isChecked].toString():null;-1===this.checkedNodes.indexOf(s)||e||this.checkedNodes.splice(this.checkedNodes.indexOf(s),1),-1===this.checkedNodes.indexOf(s)&&e&&this.checkDisabledState(s,t[i]),"true"!==n||e||this.updateField(this.treeData,this.fields,s,"isChecked",null);var a=this.getChildNodes(this.treeData,s);a.length>0&&this.getChildItems(a,e)}},i.prototype.childStateChange=function(t,e,i,s){for(var n=0;n<t.length;n++){var a=t[parseInt(n.toString(),10)][this.fields.id]?t[parseInt(n.toString(),10)][this.fields.id].toString():"",r=t[parseInt(n.toString(),10)][this.fields.isChecked]?t[parseInt(n.toString(),10)][this.fields.isChecked].toString():null;this.autoCheck?-1!==this.checkedNodes.indexOf(e)&&-1===this.checkedNodes.indexOf(a)?(this.checkDisabledState(a,t[n]),-1!==this.parentNodeCheck.indexOf(a)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(a),1)):-1!==this.checkedNodes.indexOf(e)||-1===this.checkedNodes.indexOf(a)||s||(this.checkedNodes.splice(this.checkedNodes.indexOf(a),1),"true"===r&&this.updateField(this.treeData,this.fields,a,"isChecked",null)):this.autoCheck||(s?-1===this.checkedNodes.indexOf(a)&&this.checkDisabledState(a,t[n]):(-1!==this.checkedNodes.indexOf(a)&&this.checkedNodes.splice(this.checkedNodes.indexOf(a),1),this.updateField(this.treeData,this.fields,a,"isChecked",null),this.checkedNodes=[]));var o=this.getChildNodes([t[parseInt(n.toString(),10)]],a);o&&this.childStateChange(o,e,i,s)}},i.prototype.allCheckNode=function(t,e,i,n,a){if(t)for(var r=0;r<t.length;r++){var o=(0,s._W)(this.fields.id,t[parseInt(r.toString(),10)]),d=this.element.querySelector('[data-uid="'+o+'"]');!1===a||-1!==this.checkedElement.indexOf(o.toString())||(null!==d||(0,s.hX)(t[parseInt(r.toString(),10)][this.fields.isChecked])||-1!==e.indexOf(o.toString()))&&0!==n&&2!==i||(!1!==t[parseInt(r.toString(),10)][this.fields.isChecked]||2===i?e.push(o.toString()):n=null,n=!1!==t[parseInt(r.toString(),10)][this.fields.isChecked]||2===i?0:null),-1===e.indexOf(o.toString())&&(0,s.hX)(i)&&e.push(o.toString());var h=(0,s._W)(this.fields.child.toString(),t[parseInt(r.toString(),10)]);if(!0===(0,s._W)(this.fields.hasChildren,t[parseInt(r.toString(),10)])||h){var l=(0,s._W)(this.fields.id,t[parseInt(r.toString(),10)]),c=void 0;(c=1===this.dataType?this.getChildNodes(this.treeData,l.toString()):h)&&((0,s.hX)(a)?this.allCheckNode(c,e,i,n):this.allCheckNode(c,e,i,n,a),n=null)}n=null}},i.prototype.openNode=function(t,e){var i=this.getFocusedNode(),n=(0,s.Lt)("div."+x,i);if(t){if(!n)return;n.classList.contains(g)?this.expandAction(i,n,e):this.focusNextNode(i,!0)}else if(n&&n.classList.contains(f))this.collapseNode(i,n,e);else{var a=(0,s.kp)((0,s.kp)(i,"."+m),"."+v);if(!a)return;a.classList.contains("e-disable")||(this.setFocus(i,a),this.navigateToFocus(!0))}},i.prototype.navigateNode=function(t){var e=this.getFocusedNode();this.focusNextNode(e,t)},i.prototype.navigateRootNode=function(t){var e=this.getFocusedNode(),i=t?this.getRootNode():this.getEndNode();i.classList.contains("e-disable")||(this.setFocus(e,i),this.navigateToFocus(t))},i.prototype.getFocusedNode=function(){var t,e=(0,s.Lt)("."+v+'[tabindex="0"]',this.element);if(!(0,s.hX)(e)){var i=e.getAttribute("aria-checked");("mixed"===i||"false"===i)&&(this.isFilter=!1)}return(0,s.hX)(e)&&(t=(0,s.Lt)("."+v,this.element)),(0,s.hX)(e)?(0,s.hX)(t)?this.element.firstElementChild:t:e},i.prototype.focusNextNode=function(t,e){var i=e?this.getNextNode(t):this.getPrevNode(t);if(this.setFocus(t,i),this.navigateToFocus(!e),i.classList.contains("e-disable")){var s=i.lastChild;null==i.previousSibling&&i.classList.contains("e-level-1")?this.focusNextNode(i,!0):null==i.nextSibling&&i.classList.contains("e-node-collapsed")?this.focusNextNode(i,!1):null==i.nextSibling&&s.classList.contains(b)?this.focusNextNode(i,!1):this.focusNextNode(i,e)}},i.prototype.getNextNode=function(t){var e,i=this.liList.indexOf(t);do if(i++,e=this.liList[parseInt(i.toString(),10)],(0,s.hX)(e))return t;while(!(0,s.zN)(e));return e},i.prototype.getPrevNode=function(t){var e,i=this.liList.indexOf(t);do if(i--,e=this.liList[parseInt(i.toString(),10)],(0,s.hX)(e))return t;while(!(0,s.zN)(e));return e},i.prototype.getRootNode=function(){var t,e=0;do t=this.liList[parseInt(e.toString(),10)],e++;while(!(0,s.zN)(t));return t},i.prototype.getEndNode=function(){var t,e=this.liList.length-1;do t=this.liList[parseInt(e.toString(),10)],e--;while(!(0,s.zN)(t));return t},i.prototype.setFocus=function(t,e){(0,s.vy)([t],z),t.setAttribute("tabindex","-1"),e.classList.contains("e-disable")||((0,s.iQ)([e],z),e.setAttribute("tabindex","0"),e.focus(),s.Jm.add(e,"blur",this.focusOut,this),this.updateIdAttr(t,e))},i.prototype.updateIdAttr=function(t,e){this.element.removeAttribute("aria-activedescendant"),t&&t.removeAttribute("id"),e.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")},i.prototype.focusIn=function(){if(!this.mouseDownStatus){var t=this.getFocusedNode();t.classList.contains("e-disable")?(t.setAttribute("tabindex","-1"),this.navigateNode(!0)):(t.setAttribute("tabindex","0"),(0,s.iQ)([t],z),s.Jm.add(t,"blur",this.focusOut,this)),this.mouseDownStatus=!1}},i.prototype.focusOut=function(t){var e=this.getFocusedNode();t.target===e&&((0,s.vy)([e],z),s.Jm.remove(e,"blur",this.focusOut))},i.prototype.onMouseOver=function(t){if(!s.Pw.isDevice){var e=t.target,i=e.classList,n=(0,s.kp)(e,"."+v);if(!n||i.contains(m)||i.contains(v)){this.removeHover();return}n&&!n.classList.contains("e-disable")&&this.setHover(n)}},i.prototype.setHover=function(t){t.classList.contains(y)||t.classList.contains($)||(this.removeHover(),(0,s.iQ)([t],y))},i.prototype.onMouseLeave=function(){this.removeHover()},i.prototype.removeHover=function(){var t=(0,s.Ub)("."+y,this.element);t&&t.length&&(0,s.vy)(t,y)},i.prototype.getNodeData=function(t,e){if(!(0,s.hX)(t)&&t.classList.contains(v)&&!(0,s.hX)((0,s.kp)(t,"."+u))&&(0,s.kp)(t,"."+u).classList.contains(p)){var i=t.getAttribute("data-uid"),n=this.getText(t,e),a=(0,s.kp)(t.parentNode,"."+v),r=a?a.getAttribute("data-uid"):null,o=t.classList.contains(k),d=!t.classList.contains($),h="true"===t.getAttribute("aria-expanded"),l=null!==t.getAttribute("aria-expanded")||null!=((0,s.Lt)("."+g,t)||(0,s.Lt)("."+f,t)),c=null,S=(0,s.Lt)("."+Y,t);return this.showCheckBox&&S&&(c=t.getAttribute("aria-checked")),{id:i,text:n,parentID:r,selected:o,selectable:d,expanded:h,isChecked:c,hasChildren:l}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}},i.prototype.getText=function(t,e){if(e){var i=this.getNodeObject(t.getAttribute("data-uid")),n=parseFloat(t.getAttribute("aria-level")),a=this.getFields(this.fields,n,1);return(0,s._W)(a.text,i)}return(0,s.Lt)("."+S,t).textContent},i.prototype.getExpandEvent=function(t,e){var i=this.getNodeData(t);return{cancel:!1,isInteracted:!(0,s.hX)(e),node:t,nodeData:i,event:e}},i.prototype.renderNodeTemplate=function(t,e,i){var n=this.nodeTemplateFn(t,this,"nodeTemplate"+i,this.element.id+"nodeTemplate",this.isStringTemplate,void 0,e,this.root);n&&(n=Array.prototype.slice.call(n),(0,s.BC)(n,e))},i.prototype.destroyTemplate=function(t){this.clearTemplate(["nodeTemplate"+t.getAttribute("data-uid")])},i.prototype.reRenderNodes=function(){this.updateListProp(this.fields),s.Pw.isIE?(this.ulElement=this.element.querySelector(".e-list-parent.e-ul"),this.ulElement.parentElement.removeChild(this.ulElement)):this.element.innerHTML="",(0,s.hX)(this.nodeTemplateFn)||this.clearTemplate(),this.setTouchClass(),this.setProperties({selectedNodes:[],checkedNodes:[],expandedNodes:[]},!0),this.checkedElement=[],this.isLoaded=!1,this.setDataBinding(!0)},i.prototype.setCssClass=function(t,e){(0,s.hX)(t)||""===t||(0,s.vy)([this.element],t.split(" ")),(0,s.hX)(e)||""===e||(0,s.iQ)([this.element],e.split(" "))},i.prototype.editingHandler=function(t){var e=t.target;if(!(!e||e.classList.contains(p)||e.classList.contains(m)||e.classList.contains(v)||e.classList.contains(x)||e.classList.contains(D)||e.classList.contains(I))){var i=(0,s.kp)(e,"."+v);this.createTextbox(i)}},i.prototype.createTextbox=function(t){var e=this,i=(0,s.Lt)("."+L,this.element);i&&i.blur();var n=(0,s.Lt)("."+S,t);this.updateOldText(t);var a=this.createElement("input",{className:L,attrs:{value:this.oldText}}),r=this.getEditEvent(t,null,a.outerHTML);this.trigger("nodeEditing",r,function(i){if(!i.cancel){var a="width:"+(n.offsetWidth+5)+"px";(0,s.iQ)([t],A),(0,s.hX)(e.nodeTemplateFn)||e.destroyTemplate(t),e.isReact?setTimeout(function(){e.renderTextBox(r,n,a)},5):e.renderTextBox(r,n,a)}})},i.prototype.renderTextBox=function(t,e,i){e.innerHTML=t.innerHtml;var n=(0,s.Lt)("."+L,e);this.inputObj=d.pd.createInput({element:n,properties:{enableRtl:this.enableRtl}},this.createElement),this.inputObj.container.setAttribute("style",i),n.focus(),n.setSelectionRange(0,n.value.length),this.wireInputEvents(n)},i.prototype.updateOldText=function(t){var e=t.getAttribute("data-uid");this.editData=this.getNodeObject(e);var i=parseFloat(t.getAttribute("aria-level"));this.editFields=this.getFields(this.fields,i,1),this.oldText=(0,s._W)(this.editFields.text,this.editData)},i.prototype.inputFocusOut=function(t){if((0,s.Lt)("."+L,this.element)){var e=t.target,i=e.value,a=(0,s.kp)(e,"."+S),r=(0,s.kp)(e,"."+v);(0,s.Yo)(this.inputObj.container),d.pd.destroy({element:e,properties:this.properties}),this.fields.dataSource instanceof n.M&&!this.isOffline?this.crudOperation("update",null,r,i,null,null,!0):this.appendNewText(r,a,i,!0),s.Jm.remove(e,"blur",this.inputFocusOut),this.inputObj=null,(0,s.Yo)(e)}},i.prototype.appendNewText=function(t,e,i,s){var n=this,a=this.getEditEvent(t,i,null);this.trigger("nodeEdited",a,function(a){i=a.cancel?a.oldText:a.newText,n.updateText(t,e,i,s),a.oldText!==i&&n.triggerEvent("nodeEdited",[n.getNode(t)])})},i.prototype.updateText=function(t,e,i,n){var a=(0,s.KY)(this.editFields.text,i,this.editData);if((0,s.hX)(this.nodeTemplateFn))this.enableHtmlSanitizer?e.innerText=s.r4.sanitize(i):e.innerHTML=i;else{e.innerText="";var r=t.getAttribute("data-uid");this.renderNodeTemplate(a,e,r),this.renderReactTemplates()}n&&((0,s.vy)([t],A),t.focus(),s.Jm.add(t,"blur",this.focusOut,this),(0,s.iQ)([t],z)),this.allowTextWrap&&this.calculateWrap(t)},i.prototype.getElement=function(t){return(0,s.hX)(t)?null:"string"==typeof t?this.element.querySelector('[data-uid="'+t+'"]'):"object"==typeof t?(0,s.V6)(t):null},i.prototype.getId=function(t){return(0,s.hX)(t)?null:"string"==typeof t?t:"object"==typeof t?(0,s.V6)(t).getAttribute("data-uid"):null},i.prototype.getEditEvent=function(t,e,i){var s=this.getNodeData(t);return{cancel:!1,newText:e,node:t,nodeData:s,oldText:this.oldText,innerHtml:i}},i.prototype.getNodeObject=function(t){var e;if((0,s.hX)(t));else if(1!==this.dataType)return this.getChildNodeObject(this.treeData,this.fields,t);else for(var i=0,n=this.treeData.length;i<n;i++){var a=(0,s._W)(this.fields.id,this.treeData[parseInt(i.toString(),10)]);if(!(0,s.hX)(this.treeData[parseInt(i.toString(),10)])&&!(0,s.hX)(a)&&a.toString()===t)return this.treeData[parseInt(i.toString(),10)]}return e},i.prototype.getChildNodeObject=function(t,e,i){var a;if((0,s.hX)(t))return a;for(var r=0,o=t.length;r<o;r++){var d=(0,s._W)(e.id,t[parseInt(r.toString(),10)]);if(t[parseInt(r.toString(),10)]&&d&&d.toString()===i)return t[parseInt(r.toString(),10)];if("string"!=typeof e.child||(0,s.hX)((0,s._W)(e.child,t[parseInt(r.toString(),10)]))){if(this.fields.dataSource instanceof n.M&&!(0,s.hX)((0,s._W)("child",t[parseInt(r.toString(),10)]))){if(void 0!==(a=this.getChildNodeObject((0,s._W)("child",t[parseInt(r.toString(),10)]),this.getChildMapper(e),i)))break}else if(this.isChildObject()){var h=(0,s._W)("child",t[parseInt(r.toString(),10)]);if(void 0!==(a=this.getChildNodeObject(h,this.getChildMapper(e),i)))break}}else{var h=(0,s._W)(e.child,t[parseInt(r.toString(),10)]);if(void 0!==(a=this.getChildNodeObject(h,this.getChildMapper(e),i)))break}}return a},i.prototype.setDragAndDrop=function(t){t&&!this.disabled?this.initializeDrag():this.destroyDrag()},i.prototype.initializeDrag=function(){var t,e=this;this.dragObj=new s.sx(this.element,{enableTailMode:!0,enableAutoScroll:!0,dragArea:this.dragArea,dragTarget:"."+b,enableTapHold:!0,tapHoldThreshold:100,helper:function(i){e.dragTarget=i.sender.target;var n=(0,s.kp)(e.dragTarget,"."+p),a=(0,s.kp)(e.dragTarget,"."+b);if(e.dragLi=(0,s.kp)(e.dragTarget,"."+v),e.fullRowSelect&&!a&&e.dragTarget.classList.contains(W)&&(a=e.dragTarget.nextElementSibling),!e.dragTarget||!i.element.isSameNode(n)||!a||e.dragTarget.classList.contains(p)||e.dragTarget.classList.contains(m)||e.dragTarget.classList.contains(v)||e.dragLi.classList.contains("e-disable"))return!1;var r=a.cloneNode(!0);if((0,s.hX)((0,s.Lt)("div."+x,r))){var o=e.createElement("div",{className:x+" "+g});r.insertBefore(o,r.children[0])}var d="e-drag-item "+p+" "+e.cssClass+" "+(e.enableRtl?E:"");(t=e.createElement("div",{className:d})).appendChild(r);var h=e.selectedNodes.length;if(h>1&&e.allowMultiSelection&&e.dragLi.classList.contains(k)){var l=e.createElement("span",{className:"e-drop-count",innerHTML:""+h});t.appendChild(l)}return document.body.appendChild(t),document.body.style.cursor="",e.dragData=e.getNodeData(e.dragLi),t},dragStart:function(i){(0,s.iQ)([e.element],T);var n,a=(0,s.kp)(i.target,".e-list-item");a&&(n=parseInt(a.getAttribute("aria-level"),10));var r=e.getDragEvent(i.event,e,null,i.target,null,t,n);r.draggedNode.classList.contains(A)?(e.dragObj.intDestroy(i.event),e.dragCancelAction(t)):e.trigger("nodeDragStart",r,function(s){s.cancel?(e.dragObj.intDestroy(i.event),e.dragCancelAction(t)):e.dragStartAction=!0})},drag:function(i){e.dragObj.setProperties({cursorAt:{top:!(0,s.hX)(i.event.targetTouches)||s.Pw.isDevice?60:-20}}),e.dragAction(i,t)},dragStop:function(t){(0,s.vy)([e.element],T),t.target.classList.contains("e-sibling")||e.removeVirtualEle();var i,n=t.target,a=(0,s.kp)(n,"."+w);n&&a||((0,s.Yo)(t.helper),document.body.style.cursor="");var r=(0,s.kp)(n,".e-list-item");r&&(i=parseInt(r.getAttribute("aria-level"),10));var o=e.getDragEvent(t.event,e,n,n,null,t.helper,i);o.preventTargetExpand=!1,e.trigger("nodeDragStop",o,function(i){e.dragParent=i.draggedParentNode,e.preventExpand=i.preventTargetExpand,i.cancel&&(t.helper.parentNode&&(0,s.Yo)(t.helper),document.body.style.cursor="",n.classList.contains("e-sibling")&&e.removeVirtualEle()),e.dragStartAction=!1})}}),this.dropObj=new s.gL(this.element,{out:function(t){!(0,s.hX)(t)&&!t.target.classList.contains(X)&&e.dropObj.dragData.default&&e.dropObj.dragData.default.helper.classList.contains(p)&&(document.body.style.cursor="not-allowed")},over:function(){document.body.style.cursor=""},drop:function(t){e.dropAction(t),e.removeVirtualEle()}})},i.prototype.dragCancelAction=function(t){(0,s.Yo)(t),(0,s.vy)([this.element],T),this.dragStartAction=!1},i.prototype.getOffsetX=function(t,e){var i=t.changedTouches;return i&&i.length>0?i[0].clientX-e.getBoundingClientRect().left:t.offsetX},i.prototype.getOffsetY=function(t,e){var i=t.changedTouches;return i&&i.length>0?i[0].clientY-e.getBoundingClientRect().top:t.offsetY},i.prototype.dragAction=function(t,e){var i,n=(0,s.kp)(t.target,"."+w),a=(0,s.kp)(t.target,"."+b),r=(0,s.Lt)("div."+x,e);(0,s.vy)([r],[F,M,P,R]),this.isDropIn=!1,this.removeVirtualEle(),document.body.style.cursor="";var o=t.target.classList,d=t.event,h=this.getOffsetY(d,t.target),l=this.getOffsetX(d,t.target);if(this.fullRowSelect&&!a&&!(0,s.hX)(o)&&o.contains(W)&&(a=t.target.nextElementSibling),n){var c=(0,s.kp)(t.target,"."+v),u=(0,s.kp)(t.target,"."+Y),S=(0,s.kp)(t.target,"."+f),m=(0,s.kp)(t.target,"."+g);if(n.classList.contains(p)&&(!a||c.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,c)))"LI"!==t.target.nodeName||c.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,c)?t.target.classList.contains(X)?(0,s.iQ)([r],M):(0,s.iQ)([r],P):((0,s.iQ)([r],M),this.renderVirtualEle(t));else if(this.hasTemplate&&c){var y=(0,s.Lt)(this.fullRowSelect?"."+W:"."+b,c);if(t&&!m&&!S&&h<7&&!u||m&&h<5||S&&l<3){var k=this.fullRowSelect?1:0;this.appendIndicator(c,r,k)}else if(t&&!m&&!S&&!u&&y&&h>y.offsetHeight-10||m&&h>19||S&&l>19){var k=this.fullRowSelect?2:1;this.appendIndicator(c,r,k)}else(0,s.iQ)([r],F),this.isDropIn=!0}else if(c&&t&&!m&&!S&&h<7&&!u||m&&h<5||S&&l<3){var k=this.fullRowSelect?1:0;this.appendIndicator(c,r,k)}else if(c&&t&&!m&&!S&&t.target.offsetHeight>0&&h>t.target.offsetHeight-10&&!u||m&&h>19||S&&l>19){var k=this.fullRowSelect?2:1;this.appendIndicator(c,r,k)}else(0,s.iQ)([r],F),this.isDropIn=!0}else(0,s.iQ)([r],R),document.body.style.cursor="not-allowed";var N=(0,s.kp)(t.target,".e-list-item");N&&(i=parseInt(N.getAttribute("aria-level"),10));var C=this.getDragEvent(t.event,this,t.target,t.target,null,e,i);C.dropIndicator&&(0,s.vy)([r],C.dropIndicator),this.trigger("nodeDragging",C),C.dropIndicator&&(0,s.iQ)([r],C.dropIndicator)},i.prototype.appendIndicator=function(t,e,i){(0,s.iQ)([e],M);var n=this.createElement("div",{className:X});t.insertBefore(n,t.children[parseInt(i.toString(),10)])},i.prototype.dropAction=function(t){for(var i,a,r=t.event,o=this.getOffsetY(r,t.target),d=t.target,h=!1,l=[],c=[],u=t.dragData.draggable,f=0;f<u.ej2_instances.length;f++)if(u.ej2_instances[parseInt(f.toString(),10)]instanceof e){i=u.ej2_instances[parseInt(f.toString(),10)];break}if(i&&i.dragTarget){var g=i.dragTarget,S=(0,s.kp)(g,"."+v),m=(0,s.kp)(d,"."+v);if(c.push(S),null==m&&d.classList.contains(p)&&(m=d.firstElementChild),(0,s.Yo)(t.droppedElement),document.body.style.cursor="",!m||m.isSameNode(S)||this.isDescendant(S,m)){this.fields.dataSource instanceof n.M==!1&&(this.preventExpand=!1);return}if(i.allowMultiSelection&&S.classList.contains(k)){var y=(0,s.Ub)("."+k,i.element);if(c=y,t.target.offsetHeight<=33&&o>t.target.offsetHeight-10&&o>6)for(var f=y.length-1;f>=0;f--)m.isSameNode(y[parseInt(f.toString(),10)])||this.isDescendant(y[parseInt(f.toString(),10)],m)||this.appendNode(d,y[parseInt(f.toString(),10)],m,t,i,o);else for(var f=0;f<y.length;f++)m.isSameNode(y[parseInt(f.toString(),10)])||this.isDescendant(y[parseInt(f.toString(),10)],m)||this.appendNode(d,y[parseInt(f.toString(),10)],m,t,i,o)}else this.appendNode(d,S,m,t,i,o);a=parseInt(S.getAttribute("aria-level"),10),h=!0}this.fields.dataSource instanceof n.M==!1&&(this.preventExpand=!1);for(var f=0;f<c.length;f++)l.push(this.getNode(c[parseInt(f.toString(),10)]));this.trigger("nodeDropped",this.getDragEvent(t.event,i,d,t.target,t.dragData.draggedElement,null,a,h)),i.element.id!==this.element.id&&(i.triggerEvent("nodeDropped",l),this.isNodeDropped=!0,this.fields.dataSource=this.treeData),this.triggerEvent("nodeDropped",l)},i.prototype.appendNode=function(t,e,i,n,a,r){var o=(0,s.kp)(t,"."+Y),d=(0,s.kp)(n.target,"."+f),h=(0,s.kp)(n.target,"."+g);!e.classList.contains("e-disable")&&!o&&(h&&n.event.offsetY<5||d&&n.event.offsetX<3||h&&n.event.offsetY>19||d&&n.event.offsetX>19||!h&&!d)?"LI"===t.nodeName?this.dropAsSiblingNode(e,i,n,a):t.firstElementChild&&t.classList.contains(p)?"UL"===t.firstElementChild.nodeName&&this.dropAsSiblingNode(e,i,n,a):t.classList.contains("e-icon-collapsible")||t.classList.contains("e-icon-expandable")?this.dropAsSiblingNode(e,i,n,a):this.dropAsChildNode(e,i,a,null,n,r,null,t):this.dropAsChildNode(e,i,a,null,n,r,!0,t),this.showCheckBox&&this.ensureIndeterminate()},i.prototype.dropAsSiblingNode=function(t,e,i,n){var a,r=(0,s.kp)(e,"."+m),o=(0,s.kp)(t,"."+m),d=(0,s.kp)(o,"."+v);if(i.target.offsetHeight>0&&i.event.offsetY>i.target.offsetHeight-2?a=!1:i.event.offsetY<2?a=!0:(i.target.classList.contains("e-icon-expandable")||i.target.classList.contains("e-icon-collapsible"))&&(i.event.offsetY<5||i.event.offsetX<3?a=!0:(i.event.offsetY>15||i.event.offsetX>17)&&(a=!1)),i.target.classList.contains("e-icon-expandable")||i.target.classList.contains("e-icon-collapsible")){var h=i.target.closest("li");r.insertBefore(t,a?h:h.nextElementSibling)}else r.insertBefore(t,a?i.target:i.target.nextElementSibling);this.moveData(t,e,r,a,n),this.updateElement(o,d),this.updateAriaLevel(t),n.element.id===this.element.id?this.updateList():(n.updateInstance(),this.updateInstance())},i.prototype.dropAsChildNode=function(t,e,i,n,a,r,o,d){var h,l=(0,s.kp)(t,"."+m),c=(0,s.kp)(l,"."+v),p=(0,s.kp)(e,"."+m);if(a&&a.target&&(h=(0,s.Lt)(this.fullRowSelect?"."+W:"."+b,e)),a&&(r<7&&!d.classList.contains("e-sibling")||d.classList.contains("e-sibling")&&!e.lastChild.classList.contains("e-sibling"))&&!o)p.insertBefore(t,e),this.moveData(t,e,p,!0,i);else if(a&&a.target.offsetHeight>0&&r>a.target.offsetHeight-10&&!o&&!this.hasTemplate)p.insertBefore(t,e.nextElementSibling),this.moveData(t,e,p,!1,i);else if(this.hasTemplate&&h&&r>h.offsetHeight-10&&!o)p.insertBefore(t,e.nextElementSibling),this.moveData(t,e,p,!1,i);else{var u=this.expandParent(e),f=(0,s.hX)(n)?null:u.childNodes[parseInt(n.toString(),10)];u.insertBefore(t,f),this.moveData(t,f,u,!0,i)}this.updateElement(l,c),this.updateAriaLevel(t),i.element.id===this.element.id?this.updateList():(i.updateInstance(),this.updateInstance())},i.prototype.moveData=function(t,e,i,n,a){var r=(0,s.kp)(i,"."+v),o=this.getId(t),d=a.updateChildField(a.treeData,a.fields,o,null,null,!0),h=this.getId(e),l=this.getDataPos(this.treeData,this.fields,h),c=this.getId(r);if(1===this.dataType){this.updateField(this.treeData,this.fields,c,"hasChildren",!0);var p=(0,s.hX)(l)?this.treeData.length:n?l:l+1;if((0,s.hX)(c)&&!this.hasPid)delete d[0][this.fields.parentID];else{var u=this.isNumberTypeId?parseFloat(c):c;(0,s.KY)(this.fields.parentID,u,d[0])}if(this.treeData.splice(p,0,d[0]),a.element.id!==this.element.id){var f=a.removeChildNodes(o);p++;for(var g=0,S=f.length;g<S;g++)this.treeData.splice(p,0,f[parseInt(g.toString(),10)]),p++;a.groupedData=a.getGroupedData(a.treeData,a.fields.parentID)}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.addChildData(this.treeData,this.fields,c,d,n?l:l+1)},i.prototype.expandParent=function(t){var e=(0,s.Lt)("div."+g+", div."+f,t);e&&e.classList.contains(g)&&!0!==this.preventExpand&&this.expandAction(t,e,null);var i=(0,s.Lt)("."+m,t);if(!0===this.preventExpand&&!i&&e&&this.renderChildNodes(t),i=(0,s.Lt)("."+m,t),(0,s.hX)(i)||!0!==this.preventExpand||(i.style.display="none"),(0,s.hX)(i)||!1!==this.preventExpand||(i.style.display="block"),(0,s.hX)(i)&&!0===this.preventExpand){(0,s.hX)(e)&&r.iY.generateIcon(this.createElement,t,g,this.listBaseOption);var n=(0,s.Lt)("div."+g+", div."+f,t);n&&n.classList.add("e-icon-expandable"),i=r.iY.generateUL(this.createElement,[],null,this.listBaseOption),t.appendChild(i),n?(0,s.vy)([n],f):r.iY.generateIcon(this.createElement,t,g,this.listBaseOption),t.setAttribute("aria-expanded","false"),i.style.display="none"}if((0,s.hX)(i)){var a=this.expandArgs;((0,s.hX)(a)||a&&"nodeExpanding"!==a.name)&&this.trigger("nodeExpanding",this.getExpandEvent(t,null)),(0,s.hX)(e)&&r.iY.generateIcon(this.createElement,t,f,this.listBaseOption);var n=(0,s.Lt)("div."+g+", div."+f,t);n||(r.iY.generateIcon(this.createElement,t,f,this.listBaseOption),n=(0,s.Lt)("div."+x,t)),(0,s.vy)([n],g),i=r.iY.generateUL(this.createElement,[],null,this.listBaseOption),t.appendChild(i),this.addExpand(t),this.trigger("nodeExpanded",this.getExpandEvent(t,null))}var o=(0,s.Lt)("div."+f,t);return!(0,s.hX)(i)&&o&&this.preventExpand&&((0,s.vy)([o],f),t.setAttribute("aria-expanded","false"),(0,s.iQ)([o],g)),i},i.prototype.updateElement=function(t,e){if(e&&0===t.childElementCount){var i=(0,s.Lt)("div."+x,e);(0,s.Yo)(t),(0,s.Yo)(i);var n=this.getId(e);this.updateField(this.treeData,this.fields,n,"hasChildren",!1),this.removeExpand(e,!0)}},i.prototype.updateAriaLevel=function(t){var e=this.parents(t,"."+m).length;t.setAttribute("aria-level",""+e),this.updateChildAriaLevel((0,s.Lt)("."+m,t),e+1)},i.prototype.updateChildAriaLevel=function(t,e){if(!(0,s.hX)(t))for(var i=t.childNodes,n=0,a=i.length;n<a;n++){var r=i[parseInt(n.toString(),10)];r.setAttribute("aria-level",""+e),this.updateChildAriaLevel((0,s.Lt)("."+m,r),e+1)}},i.prototype.renderVirtualEle=function(t){var e,i=t.event,s=this.getOffsetY(i,t.target);s>t.target.offsetHeight-2?e=!1:s<2&&(e=!0);var n=this.createElement("div",{className:X}),a=this.fullRowSelect?e?1:2:e?0:1;t.target.insertBefore(n,t.target.children[parseInt(a.toString(),10)])},i.prototype.removeVirtualEle=function(){var t=(0,s.Lt)("."+X);t&&(0,s.Yo)(t)},i.prototype.destroyDrag=function(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())},i.prototype.getDragEvent=function(t,e,i,a,r,o,d,h){var l=i?(0,s.kp)(i,"."+v):null,c=l?this.getNodeData(l):null,u=e?e.dragLi:r,f=e?e.dragData:null,g=i?this.parents(i,"."+v):null,S=e.dragLi.parentElement,m=e.dragLi?(0,s.kp)(S,"."+v):null,y=null,k=null,N=[M,F,P,R],C=null,b=!0===h?u:l,D=b?(0,s.kp)(b,".e-list-parent"):null,I=0,L=null;if(m=e.dragLi&&null===m?(0,s.kp)(S,"."+p):m,m=!0===h?this.dragParent:m,o)for(;I<4;){if((0,s.Lt)("."+x,o).classList.contains(N[parseInt(I.toString(),10)])){C=N[parseInt(I.toString(),10)];break}I++}if(D){var A=0;for(I=0;I<D.childElementCount;I++){if(A=!0!==h&&D.children[parseInt(I.toString(),10)]===u&&l!==u?++A:A,!0!==h&&D.children[parseInt(I.toString(),10)].classList.contains("e-hover")){k=t.offsetY>=23?I+1:I;break}if(D.children[parseInt(I.toString(),10)]===b){t.offsetY,k=I;break}}k=0!==A?--k:k,L=this.isDropIn?"Inside":t.offsetY<7?"Before":"After"}if(i&&(y=0===g.length?null:i.classList.contains(v)?g[0]:g[1]),l===u&&(y=l),i&&a.offsetHeight<=33&&t.offsetY<a.offsetHeight-10&&t.offsetY>6&&(y=l,!0!==h)){d=++d;var E=y?(0,s.Lt)(".e-list-parent",y):null;if(k=E?E.children.length:0,!(this.fields.dataSource instanceof n.M)&&null===E&&y){var O=y.hasAttribute("data-uid")?this.getChildNodes(this.fields.dataSource,y.getAttribute("data-uid").toString()):null;k=O?O.length:0}}return{cancel:!1,clonedNode:o,event:t,draggedNode:u,draggedNodeData:f,droppedNode:l,droppedNodeData:c,dropIndex:k,dropLevel:d,draggedParentNode:m,dropTarget:y,dropIndicator:C,target:a,position:L}},i.prototype.addFullRow=function(t){var e=this.liList.length;if(t)for(var i=0;i<e;i++)this.createFullRow(this.liList[parseInt(i.toString(),10)]);else for(var i=0;i<e;i++){var n=(0,s.Lt)("."+W,this.liList[parseInt(i.toString(),10)]);(0,s.Yo)(n)}},i.prototype.createFullRow=function(t){var e=this.createElement("div",{className:W});t.insertBefore(e,t.childNodes[0])},i.prototype.addMultiSelect=function(t){if(t)for(var e=(0,s.Ub)("."+v+':not([aria-selected="true"])',this.element),i=0,n=e;i<n.length;i++){var a=n[i];a.setAttribute("aria-selected","false")}else for(var e=(0,s.Ub)("."+v+'[aria-selected="false"]',this.element),r=0,o=e;r<o.length;r++){var a=o[r];a.removeAttribute("aria-selected")}},i.prototype.collapseByLevel=function(t,e,i,n){if(n=(0,s.hX)(n)?1:n,e>0&&!(0,s.hX)(t))for(var a=this.getVisibleNodes(i,t.childNodes),r=0,o=a.length;r<o;r++){var d=a[parseInt(r.toString(),10)],h=(0,s.Lt)("."+f,(0,s.Lt)("."+b,d));n>=e&&!(0,s.hX)(h)&&this.collapseNode(d,h,null),this.collapseByLevel((0,s.Lt)("."+m,d),e,i,n+1)}},i.prototype.collapseAllNodes=function(t){for(var e=this.getVisibleNodes(t,(0,s.Ub)("."+f,this.element)),i=0,n=e.length;i<n;i++){var a=e[parseInt(i.toString(),10)],r=(0,s.kp)(a,"."+v);this.collapseNode(r,a,null)}},i.prototype.expandByLevel=function(t,e,i){if(e>0&&!(0,s.hX)(t))for(var n=this.getVisibleNodes(i,t.childNodes),a=0,r=n.length;a<r;a++){var o=n[parseInt(a.toString(),10)],d=(0,s.Lt)("."+g,(0,s.Lt)("."+b,o));(0,s.hX)(d)||this.expandAction(o,d,null),this.expandByLevel((0,s.Lt)("."+m,o),e-1,i)}},i.prototype.expandAllNodes=function(t){for(var e=this.getVisibleNodes(t,(0,s.Ub)("."+g,this.element)),i=0;i<e.length;i++){var n=e[i],a=(0,s.kp)(n,"."+v);this.expandAction(a,n,null,!0,null,!0)}},i.prototype.getVisibleNodes=function(t,e){var i=Array.prototype.slice.call(e);if(t)for(var n=0;n<i.length;n++)!(0,s.zN)(i[parseInt(n.toString(),10)])&&(i.splice(n,1),n--);return i},i.prototype.removeNode=function(t){var e=(0,s.kp)(t,"."+m),i=(0,s.kp)(e,"."+v);(0,s.hX)(this.nodeTemplateFn)||this.destroyTemplate(t),(0,s.Yo)(t),this.updateElement(e,i),this.removeData(t)},i.prototype.updateInstance=function(){this.updateList(),this.updateSelectedNodes(),this.updateExpandedNodes()},i.prototype.updateList=function(){this.liList=Array.prototype.slice.call((0,s.Ub)("."+v,this.element))},i.prototype.updateSelectedNodes=function(){this.setProperties({selectedNodes:[]},!0);var t=(0,s.Ub)("."+k,this.element);this.selectGivenNodes(t)},i.prototype.updateExpandedNodes=function(){this.setProperties({expandedNodes:[]},!0);for(var t=(0,s.Ub)('[aria-expanded="true"]',this.element),e=0,i=t.length;e<i;e++)this.addExpand(t[parseInt(e.toString(),10)])},i.prototype.removeData=function(t){if(1===this.dataType){var e=new n.M(this.treeData),i=this.getId(t),s={},a=this.isNumberTypeId?parseFloat(i):i;s[this.fields.id]=a,e.remove(this.fields.id,s),this.removeChildNodes(i)}else{var i=this.getId(t);this.updateChildField(this.treeData,this.fields,i,null,null,!0)}},i.prototype.removeChildNodes=function(t){var e=this.getChildGroup(this.groupedData,t,!1),i=[];if(e)for(var a=0,r=e.length;a<r;a++){var o=new n.M(this.treeData),d=(0,s._W)(this.fields.id,e[parseInt(a.toString(),10)]).toString(),h={},l=this.isNumberTypeId?parseFloat(d):d;h[this.fields.id]=l;var c=o.remove(this.fields.id,h);i.push(c[0]),this.removeChildNodes(d)}return i},i.prototype.doGivenAction=function(t,e,i){for(var n=0,a=t.length;n<a;n++){var r=this.getElement(t[parseInt(n.toString(),10)]);if(!(0,s.hX)(r)){var o=(0,s.Lt)("."+e,(0,s.Lt)("."+b,r));(0,s.hX)(o)||(i?this.expandAction(r,o,null):this.collapseNode(r,o,null))}}},i.prototype.addGivenNodes=function(t,e,i,n,a){if(0!==t.length){var o,d,h=this.getSortedData(t),l=e?parseFloat(e.getAttribute("aria-level"))+1:1;n&&this.updateMapper(l);var c=r.iY.createListItemFromJson(this.createElement,h,this.listBaseOption,l),p=this.getId(e);(0,s.hX)(e)||(o=(0,s.Lt)("div."+x,e)),1===this.dataType&&o&&o.classList.contains(g)&&this.preventExpand&&!(0,s.hX)(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")&&(this.preventExpand=!0),1!==this.dataType&&(this.addChildData(this.treeData,this.fields,p,t,i),this.isFirstRender=!1),d=a||(e?this.expandParent(e):(0,s.Lt)("."+m,this.element));var u=(0,s.hX)(i)?null:d.childNodes[parseInt(i.toString(),10)];if(!this.isFirstRender||1===this.dataType){var f=this.expandArgs;if(u||"None"===this.sortOrder){for(var v=0;v<c.length;v++)d.insertBefore(c[parseInt(v.toString(),10)],u);if(1===this.dataType&&!(0,s.hX)(e)&&!this.preventExpand&&!(0,s.hX)(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")){this.preventExpand=!1;var S=(0,s.Lt)("div."+x,e);S&&S.classList.contains(g)&&((0,s.hX)(f)||"nodeExpanding"!==f.name)&&this.expandAction(e,S,null)}}if(!u&&("Ascending"===this.sortOrder||"Descending"===this.sortOrder)){if(0===d.childNodes.length){for(var v=0;v<c.length;v++)d.insertBefore(c[parseInt(v.toString(),10)],u);if(1===this.dataType&&!(0,s.hX)(e)&&!this.preventExpand&&!(0,s.hX)(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")){this.preventExpand=!1;var S=(0,s.Lt)("div."+x,e);S&&S.classList.contains(g)&&((0,s.hX)(f)||"nodeExpanding"!==f.name)&&this.expandAction(e,S,null)}}else for(var y=d.childNodes,v=0;v<c.length;v++)for(var k=0;k<y.length;k++){if("Ascending"===this.sortOrder?y[parseInt(k.toString(),10)].textContent.toUpperCase()>c[parseInt(v.toString(),10)].innerText.toUpperCase():y[parseInt(k.toString(),10)].textContent.toUpperCase()<c[parseInt(v.toString(),10)].innerText.toUpperCase()){d.insertBefore(c[parseInt(v.toString(),10)],y[parseInt(k.toString(),10)]);break}d.insertBefore(c[parseInt(v.toString(),10)],y[y.length])}}}if(1===this.dataType){this.updateField(this.treeData,this.fields,p,"hasChildren",!0);for(var N=this.getId(u),C=(0,s.hX)(N)?this.treeData.length:this.getDataPos(this.treeData,this.fields,N),k=0;k<t.length;k++){if(!(0,s.hX)(p)){var b=this.isNumberTypeId?parseFloat(p):p;(0,s.KY)(this.fields.parentID,b,t[parseInt(k.toString(),10)])}this.treeData.splice(C,0,t[parseInt(k.toString(),10)]),C++}}this.finalizeNode(d)}},i.prototype.updateMapper=function(t){var e=1===t?this.fields:this.getChildFields(this.fields,t-1,1);this.updateListProp(e)},i.prototype.updateListProp=function(t){var e=this.getActualProperties(t);this.listBaseOption.fields=e,this.listBaseOption.fields.url=Object.prototype.hasOwnProperty.call(e,"navigateUrl")?e.navigateUrl:"navigateUrl"},i.prototype.getDataPos=function(t,e,i){for(var a=null,r=0,o=t.length;r<o;r++){var d=(0,s._W)(e.id,t[parseInt(r.toString(),10)]);if(t[parseInt(r.toString(),10)]&&d&&d.toString()===i)return r;if("string"!=typeof e.child||(0,s.hX)((0,s._W)(e.child,t[parseInt(r.toString(),10)]))){if(this.fields.dataSource instanceof n.M&&!(0,s.hX)((0,s._W)("child",t[parseInt(r.toString(),10)]))){var h=(0,s._W)("child",t[parseInt(r.toString(),10)]);if(null!==(a=this.getDataPos(h,this.getChildMapper(e),i)))break}}else{var l=(0,s._W)(e.child,t[parseInt(r.toString(),10)]);if(null!==(a=this.getDataPos(l,this.getChildMapper(e),i)))break}}return a},i.prototype.addChildData=function(t,e,i,a,r){var o;if((0,s.hX)(i)){r=(0,s.hX)(r)?t.length:r;for(var d=0,h=a.length;d<h;d++)t.splice(r,0,a[parseInt(d.toString(),10)]),r++;return o}for(var l=0,c=t.length;l<c;l++){var p=(0,s._W)(e.id,t[parseInt(l.toString(),10)]);if(t[parseInt(l.toString(),10)]&&p&&p.toString()===i){if("string"==typeof e.child&&Object.prototype.hasOwnProperty.call(t[parseInt(l.toString(),10)],e.child)&&null!==t[parseInt(l.toString(),10)][e.child]||this.fields.dataSource instanceof n.M&&Object.prototype.hasOwnProperty.call(t[parseInt(l.toString(),10)],"child")){var u="string"==typeof e.child?e.child:"child",f=(0,s._W)(u,t[parseInt(l.toString(),10)]);(0,s.hX)(f)&&(f=[]),r=(0,s.hX)(r)?f.length:r;for(var d=0,h=a.length;d<h;d++)f.splice(r,0,a[parseInt(d.toString(),10)]),r++}else{var u="string"==typeof e.child?e.child:"child";t[parseInt(l.toString(),10)][""+u]=a}return!0}if("string"!=typeof e.child||(0,s.hX)((0,s._W)(e.child,t[parseInt(l.toString(),10)]))){if(this.fields.dataSource instanceof n.M&&!(0,s.hX)((0,s._W)("child",t[parseInt(l.toString(),10)]))){var f=(0,s._W)("child",t[parseInt(l.toString(),10)]);if(void 0!==(o=this.addChildData(f,this.getChildMapper(e),i,a,r)))break}}else{var g=(0,s._W)(e.child,t[parseInt(l.toString(),10)]);if(void 0!==(o=this.addChildData(g,this.getChildMapper(e),i,a,r)))break}}return o},i.prototype.doDisableAction=function(t){var e=this.nodeType(t),i=this.checkValidId(e);this.validArr=[];for(var n=0,a=i.length;n<a;n++){var r=i[parseInt(n.toString(),10)][this.fields.id].toString();r&&-1===this.disableNode.indexOf(r)&&this.disableNode.push(r);var o=this.getElement(r);o&&(o.setAttribute("aria-disabled","true"),(0,s.iQ)([o],j))}},i.prototype.doEnableAction=function(t){for(var e=this.nodeType(t),i=0,n=e.length;i<n;i++){var a=this.getElement(e[parseInt(i.toString(),10)]),r=e[parseInt(i.toString(),10)];r&&-1!==this.disableNode.indexOf(r)&&this.disableNode.splice(this.disableNode.indexOf(r),1),a&&(a.removeAttribute("aria-disabled"),(0,s.vy)([a],j))}},i.prototype.nodeType=function(t){for(var e=[],i=0,s=t.length;i<s;i++){var n=void 0;"string"==typeof t[parseInt(i.toString(),10)]?n=t[parseInt(i.toString(),10)]?t[parseInt(i.toString(),10)].toString():null:"object"==typeof t[parseInt(i.toString(),10)]&&(n=t[parseInt(i.toString(),10)]?t[parseInt(i.toString(),10)].getAttribute("data-uid").toString():null),-1===e.indexOf(n)&&e.push(n)}return e},i.prototype.checkValidId=function(t){var e=this;if(1===this.dataType)this.validArr=this.treeData.filter(function(i){return -1!==t.indexOf(i[e.fields.id]?i[e.fields.id].toString():null)});else if(2===this.dataType)for(var i=0;i<this.treeData.length;i++){var n=this.treeData[parseInt(i.toString(),10)][this.fields.id]?this.treeData[parseInt(i.toString(),10)][this.fields.id].toString():null;-1!==t.indexOf(n)&&this.validArr.push(this.treeData[parseInt(i.toString(),10)]);var a=(0,s._W)(this.fields.child.toString(),this.treeData[parseInt(i.toString(),10)]);a&&this.filterNestedChild(a,t)}return this.validArr},i.prototype.filterNestedChild=function(t,e){for(var i=0;i<t.length;i++){var n=t[parseInt(i.toString(),10)][this.fields.id]?t[parseInt(i.toString(),10)][this.fields.id].toString():null;-1!==e.indexOf(n)&&this.validArr.push(t[parseInt(i.toString(),10)]);var a=(0,s._W)(this.fields.child.toString(),t[parseInt(i.toString(),10)]);a&&this.filterNestedChild(a,e)}},i.prototype.setTouchClass=function(){var t=(0,s.kp)(this.element,".e-bigger");this.touchClass=(0,s.hX)(t)?"":"e-small"},i.prototype.updatePersistProp=function(){this.removeField(this.treeData,this.fields,["selected","expanded"]);for(var t=this.selectedNodes,e=0,i=t.length;e<i;e++)this.updateField(this.treeData,this.fields,t[parseInt(e.toString(),10)],"selected",!0);for(var s=this.expandedNodes,n=0,a=s.length;n<a;n++)this.updateField(this.treeData,this.fields,s[parseInt(n.toString(),10)],"expanded",!0);if(this.showCheckBox){this.removeField(this.treeData,this.fields,["isChecked"]);for(var r=this.checkedNodes,o=0,a=r.length;o<a;o++)this.updateField(this.treeData,this.fields,r[parseInt(o.toString(),10)],"isChecked",!0)}},i.prototype.removeField=function(t,e,i){if(!((0,s.hX)(t)||(0,s.hX)(e)))for(var a=0,r=t.length;a<r;a++){for(var o=0;o<i.length;o++){var d=this.getMapperProp(e,i[parseInt(o.toString(),10)]);(0,s.hX)(t[parseInt(a.toString(),10)][""+d])||delete t[parseInt(a.toString(),10)][""+d]}"string"!=typeof e.child||(0,s.hX)((0,s._W)(e.child,t[parseInt(a.toString(),10)]))?this.fields.dataSource instanceof n.M&&!(0,s.hX)((0,s._W)("child",t[parseInt(a.toString(),10)]))&&this.removeField((0,s._W)("child",t[parseInt(a.toString(),10)]),this.getChildMapper(e),i):this.removeField((0,s._W)(e.child,t[parseInt(a.toString(),10)]),this.getChildMapper(e),i)}},i.prototype.getMapperProp=function(t,e){switch(e){case"selected":return(0,s.hX)(t.selected)?"selected":t.selected;case"expanded":return(0,s.hX)(t.expanded)?"expanded":t.expanded;case"isChecked":return(0,s.hX)(t.isChecked)?"isChecked":t.isChecked;case"hasChildren":return(0,s.hX)(t.hasChildren)?"hasChildren":t.hasChildren;default:return e}},i.prototype.updateField=function(t,e,i,r,o){if(!(0,s.hX)(i)){if(1===this.dataType){var d=this.isNumberTypeId?parseFloat(i):i,h=new n.M(this.treeData).executeLocal(new a.X().where(e.id,"equal",d,!1));(0,s.KY)(this.getMapperProp(e,r),o,h[0])}else this.updateChildField(t,e,i,r,o)}},i.prototype.updateChildField=function(t,e,i,a,r,o){var d;if((0,s.hX)(t))return d;for(var h=0,l=t.length;h<l;h++){var c=(0,s._W)(e.id,t[parseInt(h.toString(),10)]);if(t[parseInt(h.toString(),10)]&&!(0,s.hX)(c)&&c.toString()===i){o?d=t.splice(h,1):((0,s.KY)(this.getMapperProp(e,a),r,t[parseInt(h.toString(),10)]),d=[]);break}if("string"!=typeof e.child||(0,s.hX)((0,s._W)(e.child,t[parseInt(h.toString(),10)]))){if(this.fields.dataSource instanceof n.M&&!(0,s.hX)((0,s._W)("child",t[parseInt(h.toString(),10)]))){var p=(0,s._W)("child",t[parseInt(h.toString(),10)]);if(void 0!==(d=this.updateChildField(p,this.getChildMapper(e),i,a,r,o)))break}}else{var u=(0,s._W)(e.child,t[parseInt(h.toString(),10)]);if(void 0!==(d=this.updateChildField(u,this.getChildMapper(e),i,a,r,o)))break}}return d},i.prototype.triggerEvent=function(t,e){if(this.renderReactTemplates(),"addNodes"===t){for(var i=[],n=0;n<e.length;n++)i.push(this.getNode(this.getElement((0,s.hX)(e[parseInt(n.toString(),10)][this.fields.id])?(0,s._W)(this.fields.id,e[parseInt(n.toString(),10)]).toString():null)));e=i}var a={data:this.treeData,action:t,nodeData:e};this.trigger("dataSourceChanged",a)},i.prototype.wireInputEvents=function(t){s.Jm.add(t,"blur",this.inputFocusOut,this)},i.prototype.wireEditingEvents=function(t){var e=this;t&&!this.disabled?this.touchEditObj=new s.Up(this.element,{tap:function(t){e.isDoubleTapped(t)&&2===t.tapCount&&(t.originalEvent.preventDefault(),e.editingHandler(t.originalEvent))}}):this.touchEditObj&&this.touchEditObj.destroy()},i.prototype.wireClickEvent=function(t){var e=this;t?this.touchClickObj=new s.Up(this.element,{tap:function(t){e.clickHandler(t)}}):this.touchClickObj&&this.touchClickObj.destroy()},i.prototype.wireExpandOnEvent=function(t){var e=this;t?this.touchExpandObj=new s.Up(this.element,{tap:function(t){("Click"===e.expandOnType||"DblClick"===e.expandOnType&&e.isDoubleTapped(t)&&2===t.tapCount)&&3!==t.originalEvent.which&&e.expandHandler(t)}}):this.touchExpandObj&&this.touchExpandObj.destroy()},i.prototype.mouseDownHandler=function(t){this.mouseDownStatus=!0,(t.shiftKey||t.ctrlKey)&&t.preventDefault(),t.ctrlKey&&this.allowMultiSelection&&s.Jm.add(this.element,"contextmenu",this.preventContextMenu,this)},i.prototype.preventContextMenu=function(t){t.preventDefault()},i.prototype.wireEvents=function(){s.Jm.add(this.element,"mousedown",this.mouseDownHandler,this),this.wireClickEvent(!0),"None"!==this.expandOnType&&this.wireExpandOnEvent(!0),s.Jm.add(this.element,"mouseover",this.onMouseOver,this),s.Jm.add(this.element,"mouseout",this.onMouseLeave,this),this.keyboardModule=new s.j9(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},i.prototype.unWireEvents=function(){s.Jm.remove(this.element,"mousedown",this.mouseDownHandler),this.wireClickEvent(!1),this.wireExpandOnEvent(!1),s.Jm.remove(this.element,"mouseover",this.onMouseOver),s.Jm.remove(this.element,"mouseout",this.onMouseLeave),this.disabled||this.keyboardModule.destroy()},i.prototype.parents=function(t,e){for(var i=[],n=t.parentNode;!(0,s.hX)(n);)(0,s.cK)(n,e)&&i.push(n),n=n.parentNode;return i},i.prototype.isDoubleTapped=function(t){var e,i=t.originalEvent.target;return i&&t.tapCount&&(1===t.tapCount?this.firstTap=(0,s.kp)(i,"."+v):2===t.tapCount&&(e=(0,s.kp)(i,"."+v))),this.firstTap===e},i.prototype.isDescendant=function(t,e){for(var i=e.parentNode;!(0,s.hX)(i);){if(i===t)return!0;i=i.parentNode}return!1},i.prototype.showSpinner=function(t){(0,s.iQ)([t],N),(0,h.GF)({target:t,width:s.Pw.isDevice?16:14},this.createElement),(0,h.xc)(t)},i.prototype.hideSpinner=function(t){(0,h.W$)(t),t.innerHTML="",(0,s.vy)([t],N)},i.prototype.setCheckedNodes=function(t){(t=JSON.parse(JSON.stringify(t))).length>1&&"function"==typeof this.nodeChecked&&this.nodeChecked.length>0&&(this.isFilter=!0),this.uncheckAll(this.checkedNodes),this.setIndeterminate(t),t.length>0&&this.checkAll(t)},i.prototype.setValidCheckedNode=function(t,e){if(void 0===e&&(e=[]),1===this.dataType){var i=this.fields,r=new n.M(this.treeData).executeLocal(new a.X().where(i.id,"equal",t,!0));if(r[0]&&(this.setChildCheckState(r,t,r[0],e),this.autoCheck)){for(var o=r[0][this.fields.parentID]?r[0][this.fields.parentID].toString():null,d=this.getChildNodes(this.treeData,o),h=0,l=0;l<d.length;l++){var c=d[parseInt(l.toString(),10)][this.fields.id].toString();-1!==this.checkedNodes.indexOf(c)&&h++}h===d.length&&-1===this.checkedNodes.indexOf(o)&&o&&this.checkDisabledState(o)}}else if(2===this.dataType)for(var p=0;p<this.treeData.length;p++){if((this.treeData[parseInt(p.toString(),10)][this.fields.id]?this.treeData[parseInt(p.toString(),10)][this.fields.id].toString():"")===t&&-1===this.checkedNodes.indexOf(t)){this.checkDisabledState(t);break}var u=(0,s._W)(this.fields.child.toString(),this.treeData[parseInt(p.toString(),10)]);u&&this.setChildCheckState(u,t,this.treeData[parseInt(p.toString(),10)],e)}},i.prototype.setChildCheckState=function(t,e,i,n){void 0===n&&(n=[]);var a,r=0;if(1===this.dataType){i&&(a=i[this.fields.id]?i[this.fields.id].toString():null);for(var o=0;o<t.length;o++){var d=t[parseInt(o.toString(),10)][this.fields.id]?t[parseInt(o.toString(),10)][this.fields.id].toString():null;i&&a&&this.autoCheck&&-1!==this.checkedNodes.indexOf(a)&&-1===this.checkedNodes.indexOf(d)&&this.checkDisabledState(d,t[o]),d===e&&-1===this.checkedNodes.indexOf(e)&&this.checkDisabledState(e);var h=this.getChildNodes(this.treeData,d),l=1===n.length&&n[0]===d;(h.length===e.length||l)&&this.setChildCheckState(h,e,i)}}else{i&&(a=i[this.fields.id]?i[this.fields.id].toString():"");for(var o=0;o<t.length;o++){var c=t[parseInt(o.toString(),10)][this.fields.id]?t[parseInt(o.toString(),10)][this.fields.id].toString():"",l=0===n.length;i&&a&&this.autoCheck&&-1!==this.checkedNodes.indexOf(a)&&-1===this.checkedNodes.indexOf(c)&&(c===e||l)&&this.checkDisabledState(c,t[o]),c===e&&-1===this.checkedNodes.indexOf(e)&&this.checkDisabledState(e);var h=(0,s._W)(this.fields.child.toString(),t[parseInt(o.toString(),10)]);h&&this.setChildCheckState(h,e,t[parseInt(o.toString(),10)]),-1!==this.checkedNodes.indexOf(c)&&this.autoCheck&&r++,r===t.length&&-1===this.checkedNodes.indexOf(a)&&this.autoCheck&&this.checkDisabledState(a,i)}}},i.prototype.setIndeterminate=function(t){for(var e=0;e<t.length;e++)this.setValidCheckedNode(t[parseInt(e.toString(),10)],t)},i.prototype.updatePosition=function(t,e,i,s){if(1===this.dataType){var n=this.getDataPos(this.treeData,this.fields,t);if(this.treeData.splice(n,1,e),i){this.removeChildNodes(t);for(var a=0;a<s.length;a++)this.treeData.splice(n,0,s[parseInt(a.toString(),10)]),n++}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.updateChildPosition(this.treeData,this.fields,t,[e],void 0)},i.prototype.updateChildPosition=function(t,e,i,a,r){for(var o,d=0,h=t.length;d<h;d++){var l=(0,s._W)(e.id,t[parseInt(d.toString(),10)]);if(t[parseInt(d.toString(),10)]&&l&&l.toString()===i)return t[parseInt(d.toString(),10)]=a[0],!0;if("string"!=typeof e.child||(0,s.hX)((0,s._W)(e.child,t[parseInt(d.toString(),10)]))){if(this.fields.dataSource instanceof n.M&&!(0,s.hX)((0,s._W)("child",t[parseInt(d.toString(),10)]))){var c=(0,s._W)("child",t[parseInt(d.toString(),10)]);if(void 0!==(o=this.updateChildPosition(c,this.getChildMapper(e),i,a,r)))break}}else{var p=(0,s._W)(e.child,t[parseInt(d.toString(),10)]);if(void 0!==(o=this.updateChildPosition(p,this.getChildMapper(e),i,a,r)))break}}return o},i.prototype.dynamicState=function(){this.setDragAndDrop(this.allowDragAndDrop),this.wireEditingEvents(this.allowEditing),this.disabled?(this.unWireEvents(),this.rippleFn(),this.rippleIconFn()):(this.wireEvents(),this.setRipple())},i.prototype.crudOperation=function(t,e,i,n,a,r,o){var d,h=this,l=this.fields.dataSource,c=[],p=this.getQuery(this.fields),u=this.fields.id,f={addedRecords:[],deletedRecords:[],changedRecords:[]},g=[];e?g=this.nodeType(e):i&&("string"==typeof i?g[0]=i.toString():"object"==typeof i&&(g[0]=i.getAttribute("data-uid").toString()));for(var v=0,S=g.length;v<S;v++){var m=this.getElement(g[parseInt(v.toString(),10)]);if(!(0,s.hX)(m)){var y=this.getNodeObject(g[parseInt(v.toString(),10)]);c.push(y)}}switch(t){case"delete":1===e.length?d=l.remove(u,c[0],p.fromTable,p):(f.deletedRecords=c,d=l.saveChanges(f,u,p.fromTable,p)),d.then(function(){return h.deleteSuccess(g)}).catch(function(t){return h.dmFailure(t)});break;case"update":c[0][this.fields.text]=n,(d=l.update(u,c[0],p.fromTable,p)).then(function(){return h.editSucess(i,n,o)}).catch(function(t){return h.dmFailure(t,i,o)});break;case"insert":if(1===a.length)d=l.insert(a[0],p.fromTable,p);else{for(var k=[],v=0,S=a.length;v<S;v++)k.push(a[parseInt(v.toString(),10)]);f.addedRecords=k,d=l.saveChanges(f,u,p.fromTable,p)}d.then(function(){var t=h.getElement(i);h.addSuccess(a,t,r),h.preventExpand=!1}).catch(function(t){return h.dmFailure(t)})}},i.prototype.deleteSuccess=function(t){for(var e=[],i=0,n=t.length;i<n;i++){var a=this.getElement(t[parseInt(i.toString(),10)]);e.push(this.getNode(a)),(0,s.hX)(a)||this.removeNode(a)}this.updateInstance(),1===this.dataType&&(this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)),this.triggerEvent("removeNode",e)},i.prototype.editSucess=function(t,e,i){var n=this.getElement(t),a=(0,s.Lt)("."+S,n);this.appendNewText(n,a,e,i)},i.prototype.addSuccess=function(t,e,i){var s,n=this,a=e?e.querySelector("."+x):null;e&&a&&a.classList.contains(g)&&null===e.querySelector("."+m)?this.renderChildNodes(e,null,function(){s=e.querySelector("."+m),n.addGivenNodes(t,e,i,!0,s),n.triggerEvent("addNodes",t)}):(this.addGivenNodes(t,e,i,!0),this.triggerEvent("addNodes",t))},i.prototype.dmFailure=function(t,e,i){e&&this.updatePreviousText(e,i),this.trigger("actionFailure",{error:t})},i.prototype.updatePreviousText=function(t,e){var i=this.getElement(t),n=(0,s.Lt)("."+S,i);this.updateText(i,n,this.oldText,e)},i.prototype.getHierarchicalParentId=function(t,e,i){var n=this,a=e.findIndex(function(e){return e[n.fields.id]&&e[n.fields.id].toString()===t});if(-1===a)for(var r=0;r<e.length;r++){var o=(0,s._W)(this.fields.child.toString(),e[parseInt(r.toString(),10)]);if(!(0,s.hX)(o)){if(-1===(a=o.findIndex(function(e){return e[n.fields.id]&&e[n.fields.id].toString()===t})))this.getHierarchicalParentId(t,o,i);else{i.push(e[parseInt(r.toString(),10)][this.fields.id].toString()),this.getHierarchicalParentId(e[parseInt(r.toString(),10)][this.fields.id].toString(),this.treeData,i);break}}}return i},i.prototype.onPropertyChanged=function(t,e){for(var i=0,a=Object.keys(t);i<a.length;i++)switch(a[i]){case"allowDragAndDrop":this.setDragAndDrop(this.allowDragAndDrop);break;case"dragArea":this.allowDragAndDrop&&(this.dragObj.dragArea=this.dragArea);break;case"allowEditing":this.wireEditingEvents(this.allowEditing);break;case"allowMultiSelection":if(this.selectedNodes.length>1){var r=this.getElement(this.selectedNodes[0]);this.isLoaded=!1,this.removeSelectAll(),this.selectNode(r,null),this.isLoaded=!0}this.setMultiSelect(this.allowMultiSelection),this.addMultiSelect(this.allowMultiSelection);break;case"allowTextWrap":this.setTextWrap(),this.updateWrap();break;case"checkedNodes":this.showCheckBox&&(this.checkedNodes=e.checkedNodes,this.setCheckedNodes(t.checkedNodes));break;case"autoCheck":this.showCheckBox&&(this.autoCheck=t.autoCheck,this.ensureIndeterminate());break;case"cssClass":this.setCssClass(e.cssClass,t.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"expandedNodes":this.isAnimate=!1,this.setProperties({expandedNodes:[]},!0),this.collapseAll(),this.isInitalExpand=!0,this.setProperties({expandedNodes:(0,s.hX)(t.expandedNodes)?[]:t.expandedNodes},!0),this.doExpandAction(),this.isInitalExpand=!1,this.isAnimate=!0;break;case"expandOn":this.wireExpandOnEvent(!1),this.setExpandOnType(),"None"===this.expandOnType||this.disabled||this.wireExpandOnEvent(!0);break;case"disabled":this.setDisabledMode(),this.dynamicState();break;case"fields":this.isAnimate=!1,this.isFieldChange=!0,this.initialRender=!0,this.isReact&&(!this.isReact||this.fields.dataSource instanceof n.M)||(this.element.classList.contains("e-filtering")||(this.DDTTreeData=JSON.parse(JSON.stringify(this.fields.dataSource))),this.reRenderNodes()),this.initialRender=!1,this.isAnimate=!0,this.isFieldChange=!1;break;case"fullRowSelect":this.setFullRow(this.fullRowSelect),this.addFullRow(this.fullRowSelect),this.allowTextWrap&&(this.setTextWrap(),this.updateWrap());break;case"loadOnDemand":if(!1===this.loadOnDemand&&!this.onLoaded){for(var o=this.element.querySelectorAll("li"),d=0;d<o.length;)"true"!==o[parseInt(d.toString(),10)].getAttribute("aria-expanded")&&this.renderChildNodes(o[parseInt(d.toString(),10)],!0,null,!0),d++;this.onLoaded=!0}break;case"nodeTemplate":this.hasTemplate=!1,this.nodeTemplateFn=this.templateComplier(this.nodeTemplate),this.reRenderNodes();break;case"selectedNodes":this.removeSelectAll(),this.setProperties({selectedNodes:t.selectedNodes},!0),this.doSelectionAction();break;case"showCheckBox":case"checkDisabledChildren":case"sortOrder":this.reRenderNodes();break;case"fullRowNavigable":this.setProperties({fullRowNavigable:t.fullRowNavigable},!0),this.listBaseOption.itemNavigable=t.fullRowNavigable,this.reRenderNodes()}},i.prototype.destroy=function(){this.clearTemplate(),this.element.removeAttribute("aria-activedescendant"),this.unWireEvents(),this.wireEditingEvents(!1),this.disabled||(this.rippleFn(),this.rippleIconFn()),this.setCssClass(this.cssClass,null),this.setDragAndDrop(!1),this.setFullRow(!1),this.ulElement&&this.ulElement.parentElement&&this.ulElement.parentElement.removeChild(this.ulElement),this.ulElement=null,this.liList=null,this.startNode=null,this.firstTap=null,this.expandArgs=null,this.dragLi=null,this.dragTarget=null,this.dragParent=null,this.dragObj=null,this.dropObj=null,this.inputObj=null,this.touchEditObj=null,this.touchExpandObj=null,this.touchClickObj=null,t.prototype.destroy.call(this)},i.prototype.addNodes=function(t,e,i,a){if(!(0,s.hX)(t)){t=JSON.parse(JSON.stringify(t));var r=this.getElement(e);if(this.preventExpand=a,this.fields.dataSource instanceof n.M)this.isOffline?this.addSuccess(t,r,i):this.crudOperation("insert",null,e,null,t,i,this.preventExpand);else if(2===this.dataType)this.addGivenNodes(t,r,i);else{if(r)this.addGivenNodes(t,r,i);else{t=this.getSortedData(t);for(var o=0;o<t.length;o++){var d=(0,s._W)(this.fields.parentID,t[parseInt(o.toString(),10)]);r=d?this.getElement(d.toString()):d,!(0,s.hX)(d)&&(0,s.hX)(r)&&(this.preventExpand=!1,this.ensureVisible(d),this.preventExpand=a,r=this.getElement(d.toString())),this.addGivenNodes([t[parseInt(o.toString(),10)]],r,i)}}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}this.updateCheckedStateFromDS(),this.showCheckBox&&r&&this.ensureParentCheckState(r),this.fields.dataSource instanceof n.M==!1&&(this.preventExpand=!1,this.triggerEvent("addNodes",t))}},i.prototype.beginEdit=function(t){var e=this.getElement(t);(0,s.hX)(e)||this.disabled||this.createTextbox(e)},i.prototype.checkAll=function(t){this.showCheckBox&&this.doCheckBoxAction(t,!0)},i.prototype.collapseAll=function(t,e,i){(0,s.hX)(t)?e>0?this.collapseByLevel((0,s.Lt)("."+m,this.element),e,i):this.collapseAllNodes(i):this.doGivenAction(t,f,!1)},i.prototype.disableNodes=function(t){(0,s.hX)(t)||this.doDisableAction(t)},i.prototype.enableNodes=function(t){(0,s.hX)(t)||this.doEnableAction(t)},i.prototype.ensureVisible=function(t){var e=[];if(1===this.dataType)for(var i=this.getTreeData(t);0!==i.length&&!(0,s.hX)(i[0][this.fields.parentID]);)e.push(i[0][this.fields.parentID].toString()),i=this.getTreeData(i[0][this.fields.parentID].toString());else 2===this.dataType&&(e=this.getHierarchicalParentId(t,this.treeData,e));this.expandAll(e.reverse());var n=this.getElement(t);if(!(0,s.hX)(n)){if("object"==typeof t){var a=this.parents(n,"."+v);this.expandAll(a)}setTimeout(function(){n.scrollIntoView({behavior:"smooth"})},450)}},i.prototype.expandAll=function(t,e,i,n){this.isAnimate=!n,(0,s.hX)(t)?e>0?this.expandByLevel((0,s.Lt)("."+m,this.element),e,i):(this.expandAllNodes(i),this.loadOnDemand||(this.updateAttributes(this.element),this.updateList())):this.doGivenAction(t,g,!0),this.isAnimate=!0},i.prototype.getAllCheckedNodes=function(){return this.checkedNodes},i.prototype.getDisabledNodes=function(){return this.disableNode},i.prototype.getNode=function(t){var e=this.getElement(t);return this.getNodeData(e,!0)},i.prototype.getTreeData=function(t){var e=this.getId(t);if(this.updatePersistProp(),(0,s.hX)(e))return this.treeData;var i=this.getNodeObject(e);return(0,s.hX)(i)?[]:[i]},i.prototype.moveNodes=function(t,e,i,a){var r=this.getElement(e),o=[];if(!(0,s.hX)(r)){for(var d=0;d<t.length;d++){var h=this.getElement(t[parseInt(d.toString(),10)]);o.push(this.getNode(h)),(0,s.hX)(h)||r.isSameNode(h)||this.isDescendant(h,r)||(this.preventExpand=a,this.dropAsChildNode(h,r,this,i,null,null,null,r))}this.fields.dataSource instanceof n.M==!1&&(this.preventExpand=!1),this.triggerEvent("moveNodes",o)}},i.prototype.refreshNode=function(t,e){if(!((0,s.hX)(t)||(0,s.hX)(e))){var i,n,a=!1;if(1===this.dataType&&e.length>1)a=!0;else if(2===this.dataType&&1===e.length){var o=(0,s._W)(this.fields.child.toString(),e[0]);(0,s.hX)(o)||(a=!0)}var d=this.getElement(t),h=d?d.getAttribute("data-uid"):t?t.toString():null;if(this.refreshData=this.getNodeObject(h),e=JSON.parse(JSON.stringify(e)),1===this.dataType&&a){for(var l=0;l<e.length;l++)if((0,s.hX)(e[parseInt(l.toString(),10)][this.fields.parentID])){n=e[parseInt(l.toString(),10)],e.splice(l,1);break}i=(0,s.X$)({},this.refreshData,n)}else i=(0,s.X$)({},this.refreshData,e[0]);if((0,s.hX)(d)){this.updatePosition(h,i,a,e);return}this.isRefreshed=!0;var c=parseFloat(d.getAttribute("aria-level")),p=r.iY.createListItemFromJson(this.createElement,[i],this.listBaseOption,c),u=(0,s.Lt)("."+m,d),v=(0,s._W)(this.fields.child.toString(),i);if(a&&u||a&&!(0,s.hX)(v)){var S=d.parentElement,y=Array.prototype.indexOf.call(S.childNodes,d);(0,s.TF)(d),S.insertBefore(p[0],S.childNodes[parseInt(y.toString(),10)]),this.updatePosition(h,i,a,e),a&&u&&this.expandAll([h])}else{var N=(0,s.Lt)("."+b,d),C=(0,s.Lt)("."+b,p[0]),D=(0,s.Lt)("div."+x,N),I=(0,s.Lt)("div."+x,C);D&&I&&(I.classList.contains(g)&&D.classList.contains(f)?((0,s.vy)([I],g),(0,s.iQ)([I],f)):I.classList.contains(f)&&D.classList.contains(g)?((0,s.vy)([I],f),(0,s.iQ)([I],g)):D.classList.contains("interaction")&&(0,s.iQ)([I],"interaction")),(0,s.TF)(N);var L=(0,s.Lt)("."+W,d);L.parentNode.insertBefore(C,L.nextSibling),this.updatePosition(h,i,a,e)}if(d=this.getElement(t),i[this.fields.tooltip]&&d.setAttribute("title",i[this.fields.tooltip]),Object.prototype.hasOwnProperty.call(i,this.fields.htmlAttributes)&&i[this.fields.htmlAttributes]){var A={};(0,s.h1)(A,i[this.fields.htmlAttributes]),A.class?((0,s.iQ)([d],A.class.split(" ")),delete A.class):(0,s.uK)(d,A)}-1!==this.selectedNodes.indexOf(h)&&(d.setAttribute("aria-selected","true"),(0,s.iQ)([d],k)),this.isRefreshed=!1,this.triggerEvent("refreshNode",[this.getNode(d)])}},i.prototype.removeNodes=function(t){(0,s.hX)(t)||(this.fields.dataSource instanceof n.M&&!this.isOffline?this.crudOperation("delete",t):this.deleteSuccess(t))},i.prototype.updateNode=function(t,e){var i=this;if(!((0,s.hX)(t)||(0,s.hX)(e))&&this.allowEditing){var a=this.getElement(t);if(!(0,s.hX)(a)){var r=(0,s.Lt)("."+S,a);this.updateOldText(a);var o=this.getEditEvent(a,null,null);this.trigger("nodeEditing",o,function(s){s.cancel||(i.fields.dataSource instanceof n.M&&!i.isOffline?i.crudOperation("update",null,t,e,null,null,!1):i.appendNewText(a,r,e,!1))})}}},i.prototype.uncheckAll=function(t){this.showCheckBox&&this.doCheckBoxAction(t,!1)},c([(0,s.mA)(!1)],i.prototype,"allowDragAndDrop",void 0),c([(0,s.mA)(!1)],i.prototype,"allowEditing",void 0),c([(0,s.mA)(!1)],i.prototype,"allowMultiSelection",void 0),c([(0,s.mA)(!1)],i.prototype,"allowTextWrap",void 0),c([(0,s.pr)({},ti)],i.prototype,"animation",void 0),c([(0,s.mA)()],i.prototype,"checkedNodes",void 0),c([(0,s.mA)(!0)],i.prototype,"checkDisabledChildren",void 0),c([(0,s.mA)("")],i.prototype,"cssClass",void 0),c([(0,s.mA)(!1)],i.prototype,"disabled",void 0),c([(0,s.mA)(null)],i.prototype,"dragArea",void 0),c([(0,s.mA)(!0)],i.prototype,"enableHtmlSanitizer",void 0),c([(0,s.mA)(!1)],i.prototype,"enablePersistence",void 0),c([(0,s.mA)()],i.prototype,"expandedNodes",void 0),c([(0,s.mA)("Auto")],i.prototype,"expandOn",void 0),c([(0,s.pr)({},tt)],i.prototype,"fields",void 0),c([(0,s.mA)(!0)],i.prototype,"fullRowSelect",void 0),c([(0,s.mA)(!0)],i.prototype,"loadOnDemand",void 0),c([(0,s.mA)()],i.prototype,"locale",void 0),c([(0,s.mA)()],i.prototype,"nodeTemplate",void 0),c([(0,s.mA)()],i.prototype,"selectedNodes",void 0),c([(0,s.mA)("None")],i.prototype,"sortOrder",void 0),c([(0,s.mA)(!1)],i.prototype,"showCheckBox",void 0),c([(0,s.mA)(!0)],i.prototype,"autoCheck",void 0),c([(0,s.mA)(!1)],i.prototype,"fullRowNavigable",void 0),c([(0,s.Jh)()],i.prototype,"actionFailure",void 0),c([(0,s.Jh)()],i.prototype,"created",void 0),c([(0,s.Jh)()],i.prototype,"dataBound",void 0),c([(0,s.Jh)()],i.prototype,"dataSourceChanged",void 0),c([(0,s.Jh)()],i.prototype,"drawNode",void 0),c([(0,s.Jh)()],i.prototype,"destroyed",void 0),c([(0,s.Jh)()],i.prototype,"keyPress",void 0),c([(0,s.Jh)()],i.prototype,"nodeChecked",void 0),c([(0,s.Jh)()],i.prototype,"nodeChecking",void 0),c([(0,s.Jh)()],i.prototype,"nodeClicked",void 0),c([(0,s.Jh)()],i.prototype,"nodeCollapsed",void 0),c([(0,s.Jh)()],i.prototype,"nodeCollapsing",void 0),c([(0,s.Jh)()],i.prototype,"nodeDragging",void 0),c([(0,s.Jh)()],i.prototype,"nodeDragStart",void 0),c([(0,s.Jh)()],i.prototype,"nodeDragStop",void 0),c([(0,s.Jh)()],i.prototype,"nodeDropped",void 0),c([(0,s.Jh)()],i.prototype,"nodeEdited",void 0),c([(0,s.Jh)()],i.prototype,"nodeEditing",void 0),c([(0,s.Jh)()],i.prototype,"nodeExpanded",void 0),c([(0,s.Jh)()],i.prototype,"nodeExpanding",void 0),c([(0,s.Jh)()],i.prototype,"nodeSelected",void 0),c([(0,s.Jh)()],i.prototype,"nodeSelecting",void 0),i=e=c([s.kc],i)}(s.uA)}}]);