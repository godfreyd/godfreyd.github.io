"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[377],{782:(t,e,i)=>{i.d(e,{O:()=>v,k:()=>m});var s=i(310),l=i(4578),n=i(2437),o=i(9994),a=i(7816),h=i(2324),r=i(5401),u=i(193),p=i(494),c=function(){var t=function(e,i){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}(),d=function(t,e,i,s){var l,n=arguments.length,o=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(l=t[a])&&(o=(n<3?l(o):n>3?l(e,i,o):l(e,i))||o);return n>3&&o&&Object.defineProperty(e,i,o),o},m={root:"e-dropdownlist",hover:r.fu.hover,selected:r.fu.selected,rtl:r.fu.rtl,li:r.fu.li,disable:r.fu.disabled,base:r.fu.root,focus:r.fu.focus,content:r.fu.content,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden",virtualList:"e-list-item e-virtual-list"},f={container:null,buttons:[]},v=function(t){function e(e,i){var s=t.call(this,e,i)||this;return s.isListSearched=!1,s.preventChange=!1,s.isTouched=!1,s.isFocused=!1,s.autoFill=!1,s}return c(e,t),e.prototype.preRender=function(){this.valueTempElement=null,this.element.style.opacity="0",this.initializeData(),t.prototype.preRender.call(this),this.activeIndex=this.index,this.queryString=""},e.prototype.initializeData=function(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initialRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.actionData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.previousValue=null,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"},this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount}},e.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},e.prototype.requiredModules=function(){var t=[];return this.enableVirtualization&&t.push({args:[this],member:"VirtualScroll"}),t},e.prototype.renderList=function(e,i){t.prototype.render.call(this,e,i),this.dataSource instanceof u.M||(this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0),this.enableVirtualization&&this.isFiltering()&&"combobox"===this.getModuleName()&&(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+r.fu.li),this.ulElement=this.list.querySelector("ul")),this.unWireListEvents(),this.wireListEvents()},e.prototype.floatLabelChange=function(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){var t=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?(0,s.pP)(t,["e-label-top"],["e-label-bottom"]):(0,s.pP)(t,["e-label-bottom"],["e-label-top"])}},e.prototype.resetHandler=function(t){t.preventDefault(),this.clearAll(t),this.enableVirtualization&&(this.list.scrollTop=0,this.virtualListInfo=null,this.previousStartIndex=0,this.previousEndIndex=0)},e.prototype.resetFocusElement=function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()&&!(0,s.hX)(this.ulElement)){var t=this.fields.disabled?this.ulElement.querySelector("."+m.li+":not(.e-disabled)"):this.ulElement.querySelector("."+m.li);this.enableVirtualization&&(t=this.liCollections[this.skeletonCount]),t&&t.classList.add(m.focus)}},e.prototype.clearAll=function(t,e){this.previousItemData=(0,s.hX)(this.itemData)?null:this.itemData,((0,s.hX)(e)||!(0,s.hX)(e)&&((0,s.hX)(e.dataSource)||!(e.dataSource instanceof u.M)&&0===e.dataSource.length))&&(this.isActive=!0,this.resetSelection(e));var i=this.getItemData();!(!this.allowObjectBinding&&this.previousValue===i.value||this.allowObjectBinding&&this.previousValue&&this.isObjectInArray(this.previousValue,[this.allowCustom?this.value?this.value:i:i.value?this.getDataByValue(i.value):i]))&&(this.onChangeEvent(t),this.checkAndResetCache(),this.enableVirtualization&&this.updateInitialData())},e.prototype.resetSelection=function(t){this.list&&(!(0,s.hX)(t)&&((0,s.hX)(t.dataSource)||!(t.dataSource instanceof u.M)&&0===t.dataSource.length)?(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(t.dataSource)):(this.allowFiltering&&"autocomplete"!==this.getModuleName()&&!(0,s.hX)(this.actionCompleteData.ulElement)&&!(0,s.hX)(this.actionCompleteData.list)&&this.actionCompleteData.list.length>0&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement())),(0,s.hX)(this.hiddenElement)||(this.hiddenElement.innerHTML=""),(0,s.hX)(this.inputElement)||(this.inputElement.value=""),this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&((0,s.Yo)(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()},e.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];if("class"===i){var l=this.htmlAttributes[""+i].replace(/\s+/g," ").trim();""!==l&&(0,s.iQ)([this.inputWrapper.container],l.split(" "))}else if("disabled"===i&&"disabled"===this.htmlAttributes[""+i])this.enabled=!1,this.setEnable();else if("readonly"!==i||(0,s.hX)(this.htmlAttributes[""+i])){if("style"===i)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[""+i]);else if("aria-label"===i)"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.readonly?"dropdownlist"===this.getModuleName()&&this.inputWrapper.container.setAttribute("aria-label",this.htmlAttributes[""+i]):this.inputElement.setAttribute("aria-label",this.htmlAttributes[""+i]);else{var n=["title","id","placeholder","role","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],o=["name","required"];("autocomplete"===this.getModuleName()||"combobox"===this.getModuleName())&&n.push("tabindex"),o.indexOf(i)>-1||0===i.indexOf("data")?this.hiddenElement.setAttribute(i,this.htmlAttributes[""+i]):n.indexOf(i)>-1?"placeholder"===i?a.pd.setPlaceholder(this.htmlAttributes[""+i],this.inputElement):this.inputElement.setAttribute(i,this.htmlAttributes[""+i]):this.inputWrapper.container.setAttribute(i,this.htmlAttributes[""+i])}}else this.readonly=!0,this.dataBind()}("autocomplete"===this.getModuleName()||"combobox"===this.getModuleName())&&this.inputWrapper.container.removeAttribute("tabindex")},e.prototype.getAriaAttributes=function(){return{"aria-disabled":"false",role:"combobox","aria-expanded":"false","aria-live":"polite","aria-labelledby":this.hiddenElement.id}},e.prototype.setEnableRtl=function(){a.pd.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},e.prototype.setEnable=function(){a.pd.setEnabled(this.enabled,this.inputElement),this.enabled?((0,s.vy)([this.inputWrapper.container],m.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex),this.inputWrapper&&this.inputWrapper.container&&(this.inputWrapper.container.setAttribute("aria-disabled","false"),this.inputWrapper.container.removeAttribute("disabled"))):(this.hidePopup(),(0,s.iQ)([this.inputWrapper.container],m.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1,this.inputWrapper&&this.inputWrapper.container&&(this.inputWrapper.container.setAttribute("aria-disabled","true"),this.inputWrapper.container.setAttribute("disabled","")))},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.getLocaleName=function(){return"drop-down-list"},e.prototype.preventTabIndex=function(t){"dropdownlist"===this.getModuleName()&&(t.tabIndex=-1)},e.prototype.targetElement=function(){return(0,s.hX)(this.inputWrapper)?null:this.inputWrapper.container},e.prototype.getNgDirective=function(){return"EJS-DROPDOWNLIST"},e.prototype.getElementByText=function(t){return this.getElementByValue(this.getValueByText(t))},e.prototype.getElementByValue=function(t){for(var e,i=this.getItems(),s=0;s<i.length;s++){var l=i[s];if(this.getFormattedValue(l.getAttribute("data-value"))===t){e=l;break}}return e},e.prototype.initValue=function(){this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.itemCount,this.renderList(),this.dataSource instanceof u.M?this.initialRemoteRender=!0:this.updateValues()},e.prototype.isDisableItemValue=function(t){if("object"==typeof t){var e=JSON.parse(JSON.stringify(t))[this.fields.value];return this.isDisabledItemByIndex(this.getIndexByValue(e))}return this.isDisabledItemByIndex(this.getIndexByValue(t))},e.prototype.updateValues=function(){if(this.fields.disabled&&(null!=this.value&&(this.value=this.isDisableItemValue(this.value)?null:this.value),null!=this.text&&(this.text=this.isDisabledItemByIndex(this.getIndexByValue(this.getValueByText(this.text)))?null:this.text),null!=this.index&&(this.index=this.isDisabledItemByIndex(this.index)?null:this.index,this.activeIndex=this.index)),this.selectedValueInfo=this.viewPortInfo,(0,s.hX)(this.value)){if(this.text&&(0,s.hX)(this.value)){var t=this.getElementByText(this.text);if((0,s.hX)(t)){this.setProperties({text:null});return}this.setSelection(t,null)}else this.setSelection(this.liCollections[this.activeIndex],null)}else{var e=this.allowObjectBinding&&!(0,s.hX)(this.value)?(0,s._W)(this.fields.value?this.fields.value:"",this.value):this.value;this.setSelection(this.getElementByValue(e),null)}this.setHiddenValue(),a.pd.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.onBlurHandler=function(t){if(this.enabled){var e=t.relatedTarget,i=t.target,l=this.isPreventBlur;if(this.isPreventBlur=!1,l&&!this.isDocumentClick&&this.isPopupOpen&&(!(0,s.hX)(i)||!this.isFilterLayout()&&(0,s.hX)(e))){"dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus();return}if(this.isDocumentClick||!(0,s.hX)(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(m.mobileFilter)){this.beforePopupOpen||(this.isDocumentClick=!1);return}("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&e!==this.inputElement&&(document.activeElement!==e||document.activeElement===e&&i.classList.contains(m.inputFocus))||(0,s.hX)(e)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&i!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(e)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(t),this.isTabKey=!1),!this.isRequested||this.isPopupOpen||this.isPreventBlur||(this.isActive=!1,this.beforePopupOpen=!1),this.isFocused=!1}},e.prototype.focusOutAction=function(t){this.isInteracted=!1,this.focusOut(t),this.onFocusOut(t)},e.prototype.onFocusOut=function(t){this.enabled&&(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(t)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),"dropdownlist"===this.getModuleName()&&"INPUT"!==this.element.tagName&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&(0,s.iQ)([this.inputWrapper.clearButton],m.clearIconHide),this.trigger("blur"))},e.prototype.onFocus=function(t){this.isInteracted||(this.isInteracted=!0,this.trigger("focus",{isInteracted:!!t,event:t})),this.updateIconState(),this.isFocused=!0},e.prototype.resetValueHandler=function(t){var e=(0,s.kp)(this.inputElement,"form");if(e&&t.target===e){var i=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=i}},e.prototype.wireEvent=function(){s.Jm.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),s.Jm.add(this.inputWrapper.container,"focus",this.focusIn,this),s.Jm.add(this.inputWrapper.container,"keypress",this.onSearch,this),s.Jm.add(window,"resize",this.windowResize,this),this.bindCommonEvent()},e.prototype.bindCommonEvent=function(){s.Jm.add(this.targetElement(),"blur",this.onBlurHandler,this);var t=(0,s.kp)(this.inputElement,"form");t&&s.Jm.add(t,"reset",this.resetValueHandler,this),s.Pw.isDevice?this.keyboardModule=new s.j9(this.targetElement(),{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.keyboardModule=new s.j9(this.targetElement(),{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()},e.prototype.windowResize=function(){this.isPopupOpen&&this.popupObj.refreshPosition(this.inputWrapper.container)},e.prototype.bindClearEvent=function(){this.showClearButton&&s.Jm.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},e.prototype.unBindCommonEvent=function(){!(0,s.hX)(this.inputWrapper)&&this.targetElement()&&s.Jm.remove(this.targetElement(),"blur",this.onBlurHandler);var t=this.inputElement&&(0,s.kp)(this.inputElement,"form");t&&s.Jm.remove(t,"reset",this.resetValueHandler),s.Pw.isDevice||this.keyboardModule.destroy(),this.showClearButton&&s.Jm.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)},e.prototype.updateIconState=function(){this.showClearButton&&(""===this.inputElement.value||this.readonly?(0,s.iQ)([this.inputWrapper.clearButton],m.clearIconHide):(0,s.vy)([this.inputWrapper.clearButton],m.clearIconHide))},e.prototype.wireListEvents=function(){(0,s.hX)(this.list)||(s.Jm.add(this.list,"click",this.onMouseClick,this),s.Jm.add(this.list,"mouseover",this.onMouseOver,this),s.Jm.add(this.list,"mouseout",this.onMouseLeave,this))},e.prototype.onSearch=function(t){32!==t.charCode&&13!==t.charCode&&(void 0===this.list&&this.renderList(),this.searchKeyEvent=t,this.onServerIncrementalSearch(t))},e.prototype.onServerIncrementalSearch=function(t){this.isRequested||(0,s.hX)(this.list)||(0,s.hX)(this.list.querySelector("li"))||!this.enabled||this.readonly||this.incrementalSearch(t)},e.prototype.onMouseClick=function(t){var e=t.target;this.keyboardEvent=null;var i=(0,s.kp)(e,"."+r.fu.li);!this.isValidLI(i)||this.isDisabledElement(i)||(this.setSelection(i,t),s.Pw.isDevice&&this.isFilterLayout()?history.back():this.closePopup(100,t))},e.prototype.onMouseOver=function(t){var e=(0,s.kp)(t.target,"."+r.fu.li);this.setHover(e)},e.prototype.setHover=function(t){this.enabled&&this.isValidLI(t)&&!t.classList.contains(r.fu.hover)&&(this.removeHover(),(0,s.iQ)([t],r.fu.hover))},e.prototype.onMouseLeave=function(){this.removeHover()},e.prototype.removeHover=function(){if(this.list){var t=this.list.querySelectorAll("."+r.fu.hover);t&&t.length&&(0,s.vy)(t,r.fu.hover)}},e.prototype.isValidLI=function(t){return t&&t.hasAttribute("role")&&"option"===t.getAttribute("role")},e.prototype.updateIncrementalItemIndex=function(t,e){this.incrementalStartIndex=t,this.incrementalEndIndex=e},e.prototype.incrementalSearch=function(t){if(this.liCollections.length>0){if(this.enableVirtualization){var e=!1,i=!1,l=this.ulElement.getElementsByClassName("e-active")[0],n=l?l.textContent:null;""===this.incrementalQueryString?(this.incrementalQueryString=String.fromCharCode(t.charCode),this.incrementalPreQueryString=this.incrementalQueryString):String.fromCharCode(t.charCode).toLocaleLowerCase()===this.incrementalPreQueryString.toLocaleLowerCase()?i=!0:this.incrementalQueryString=String.fromCharCode(t.charCode),(this.viewPortInfo.endIndex>=this.incrementalEndIndex&&this.incrementalEndIndex<=this.totalItemCount||0===this.incrementalEndIndex)&&(e=!0,this.incrementalStartIndex=this.incrementalEndIndex,0===this.incrementalEndIndex?this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100:this.incrementalEndIndex=this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),e=!0),(0!==this.viewPortInfo.startIndex||e)&&this.updateIncrementalView(0,this.itemCount);for(var o=(0,h.Ft)(t.charCode,this.incrementalLiCollections,this.activeIndex,!0,this.element.id,i,n,!0);(0,s.hX)(o)&&this.incrementalEndIndex<this.totalItemCount&&(this.updateIncrementalItemIndex(this.incrementalEndIndex,this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100),this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),e=!0,(0!==this.viewPortInfo.startIndex||e)&&this.updateIncrementalView(0,this.itemCount),o=(0,h.Ft)(t.charCode,this.incrementalLiCollections,0,!0,this.element.id,i,n,!0,!0),(0,s.hX)(o));)if((0,s.hX)(o)&&this.incrementalEndIndex>=this.totalItemCount){this.updateIncrementalItemIndex(0,100>this.totalItemCount?this.totalItemCount:100);break}(0,s.hX)(o)&&this.incrementalEndIndex>=this.totalItemCount&&(this.updateIncrementalItemIndex(0,100>this.totalItemCount?this.totalItemCount:100),this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),e=!0,(0!==this.viewPortInfo.startIndex||e)&&this.updateIncrementalView(0,this.itemCount),o=(0,h.Ft)(t.charCode,this.incrementalLiCollections,0,!0,this.element.id,i,n,!0,!0));var a=o&&this.getIndexByValue(o.getAttribute("data-value"));if(a)a-=this.skeletonCount;else for(var u=0;u<this.incrementalLiCollections.length;u++)if(!(0,s.hX)(o)&&!(0,s.hX)(o.getAttribute("data-value"))&&this.incrementalLiCollections[u].getAttribute("data-value")===o.getAttribute("data-value").toString()){a=u,a=this.incrementalStartIndex+a;break}if(a&&(!(this.viewPortInfo.startIndex>=a)||!(a>=this.viewPortInfo.endIndex))){var p=a-(this.itemCount/2-2)>0?a-(this.itemCount/2-2):0,c=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(p,c)}if((0,s.hX)(o))this.updateIncrementalView(0,this.itemCount),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.list.scrollTop=0;else{if(this.getIndexByValue(o.getAttribute("data-value"))-this.skeletonCount>this.itemCount/2){var p=this.viewPortInfo.startIndex+(this.itemCount/2-2)<this.totalItemCount?this.viewPortInfo.startIndex+(this.itemCount/2-2):this.totalItemCount,c=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(p,c)}if(o=this.getElementByValue(o.getAttribute("data-value")),this.setSelection(o,t),this.setScrollPosition(),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.enableVirtualization&&!this.fields.groupBy){var d=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;this.list.scrollTop=d-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}this.incrementalPreQueryString=this.incrementalQueryString}}else{var o=void 0;if(this.fields.disabled){var m=this.list.querySelectorAll("."+r.fu.li+":not(.e-disabled)");o=(0,h.Ft)(t.charCode,m,this.activeIndex,!0,this.element.id)}else o=(0,h.Ft)(t.charCode,this.liCollections,this.activeIndex,!0,this.element.id);(0,s.hX)(o)||(this.setSelection(o,t),this.setScrollPosition())}}},e.prototype.hideSpinner=function(){(0,s.hX)(this.spinnerElement)||((0,l.W$)(this.spinnerElement),(0,s.vy)([this.spinnerElement],m.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)},e.prototype.showSpinner=function(){(0,s.hX)(this.spinnerElement)&&(this.spinnerElement=s.Pw.isDevice&&!(0,s.hX)(this.filterInputObj)&&this.filterInputObj.buttons[1]||!(0,s.hX)(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],(0,s.iQ)([this.spinnerElement],m.disableIcon),(0,l.GF)({target:this.spinnerElement,width:s.Pw.isDevice?"16px":"14px"},this.createElement),(0,l.xc)(this.spinnerElement))},e.prototype.keyActionHandler=function(t){if(this.enabled){this.keyboardEvent=t,this.isPreventKeyAction&&this.enableVirtualization&&t.preventDefault();var e="pageUp"===t.action||"pageDown"===t.action,i="dropdownlist"!==this.getModuleName()&&("home"===t.action||"end"===t.action);this.isEscapeKey="escape"===t.action,this.isTabKey=!this.isPopupOpen&&"tab"===t.action;var l="down"===t.action||"up"===t.action||"pageUp"===t.action||"pageDown"===t.action||"home"===t.action||"end"===t.action;if((!this.isEditTextBox()&&!e&&!i||this.isPopupOpen)&&!this.readonly){var n="tab"===t.action||"close"===t.action;if(!(0,s.hX)(this.list)||this.isRequested||n||"escape"===t.action||(this.searchKeyEvent=t,(!this.enableVirtualization||this.enableVirtualization&&"autocomplete"!==this.getModuleName()&&"mousedown"!==t.type&&(40===t.keyCode||38===t.keyCode))&&(this.renderList(t),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+r.fu.li),this.ulElement=this.list.querySelector("ul"))),(0,s.hX)(this.list)||!(0,s.hX)(this.liCollections)&&l&&0===this.liCollections.length||this.isRequested)return;switch((n&&"autocomplete"!==this.getModuleName()&&this.isPopupOpen||"escape"===t.action)&&t.preventDefault(),this.isSelected="escape"!==t.action&&this.isSelected,this.isTyped=!l&&"escape"!==t.action&&this.isTyped,t.action){case"down":case"up":this.updateUpDownAction(t);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),t),t.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),t),t.preventDefault();break;case"home":case"end":this.isMouseScrollAction=!0,this.updateHomeEndAction(t);break;case"space":"dropdownlist"!==this.getModuleName()||this.beforePopupOpen||(this.showPopup(),t.preventDefault());break;case"open":this.showPopup(t);break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(t),this.focusDropDown(t);break;case"enter":this.selectCurrentItem(t);break;case"tab":this.selectCurrentValueOnTab(t);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(t),this.focusDropDown(t))}}}},e.prototype.updateUpDownAction=function(t,e){if(!this.fields.disabled||!this.list||0!==this.list.querySelectorAll(".e-list-item:not(.e-disabled)").length){if(this.allowFiltering&&!this.enableVirtualization&&"autocomplete"!==this.getModuleName()){var i,l=this.getItemData().value;(0,s.hX)(l)&&(l="null");var n=this.getIndexByValue(l);(0,s.hX)(n)||(this.activeIndex=n)}var o=this.list.querySelector("."+m.focus);if(this.isSelectFocusItem(o)&&!e){if(this.setSelection(o,t),this.enableVirtualization){var a=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;this.fields.groupBy&&(a=this.virtualListInfo&&0===this.virtualListInfo.startIndex?this.selectedLI.offsetHeight-a:a-this.selectedLI.offsetHeight),this.list.scrollTop=a-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}}else if(!(0,s.hX)(this.liCollections)){var h=this.activeIndex,u="down"===t.action?this.activeIndex+1:this.activeIndex-1;u=e?h:u;var p=0;"autocomplete"===this.getModuleName()&&(p="down"===t.action&&(0,s.hX)(this.activeIndex)?0:this.liCollections.length-1,u=u<0?this.liCollections.length-1:u===this.liCollections.length?0:u);var c=void 0;if("autocomplete"!==this.getModuleName()||"autocomplete"===this.getModuleName()&&this.isPopupOpen){if(this.enableVirtualization){if(e){if("autocomplete"===this.getModuleName()){var l=this.getFormattedValue(this.selectedLI.getAttribute("data-value"));c=this.getElementByValue(l)}else c=this.getElementByValue(this.getItemData().value)}else c=(0,s.hX)(this.activeIndex)?this.liCollections[this.skeletonCount]:this.liCollections[u],c=(0,s.hX)(c)||c.classList.contains("e-virtual-list")?null:c}else c=(0,s.hX)(this.activeIndex)?this.liCollections[p]:this.liCollections[u]}if((0,s.hX)(c)){if(this.enableVirtualization&&!this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&(this.viewPortInfo.endIndex!==this.totalItemCount&&"down"===t.action||0!==this.viewPortInfo.startIndex&&"up"===t.action)){if("down"===t.action){this.viewPortInfo.startIndex=this.viewPortInfo.startIndex+this.itemCount<this.totalItemCount-this.itemCount?this.viewPortInfo.startIndex+this.itemCount:this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.viewPortInfo.startIndex+this.itemCount,this.updateVirtualItemIndex(),this.isCustomFilter="combobox"===this.getModuleName()||this.isCustomFilter,this.resetList(this.dataSource,this.fields,this.query),this.isCustomFilter="combobox"!==this.getModuleName()&&this.isCustomFilter;var l="null"!==this.liCollections[0].getAttribute("data-value")?this.getFormattedValue(this.liCollections[0].getAttribute("data-value")):null,d=this.getDataByValue(l);d&&(this.itemData=d)}else if("up"===t.action){this.viewPortInfo.startIndex=this.viewPortInfo.startIndex-this.itemCount>0?this.viewPortInfo.startIndex-this.itemCount:0,this.viewPortInfo.endIndex=this.viewPortInfo.startIndex+this.itemCount,this.updateVirtualItemIndex(),this.isCustomFilter="combobox"===this.getModuleName()||this.isCustomFilter,this.resetList(this.dataSource,this.fields,this.query),this.isCustomFilter="combobox"!==this.getModuleName()&&this.isCustomFilter;var l="null"!==this.liCollections[this.liCollections.length-1].getAttribute("data-value")?this.getFormattedValue(this.liCollections[this.liCollections.length-1].getAttribute("data-value")):null,d=this.getDataByValue(l);d&&(this.itemData=d)}this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+r.fu.li),this.ulElement=this.list.querySelector("ul"),this.handleVirtualKeyboardActions(t,this.pageCount)}}else{var f=this.liCollections[this.skeletonCount]&&this.liCollections[this.skeletonCount].classList.contains("e-item-focus");if(this.setSelection(c,t),f&&this.enableVirtualization&&"autocomplete"===this.getModuleName()&&!e){var a=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;a=this.virtualListInfo&&0===this.virtualListInfo.startIndex&&this.fields.groupBy?this.selectedLI.offsetHeight-a:a-this.selectedLI.offsetHeight,this.list.scrollTop=a-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}}}if(this.allowFiltering&&!this.enableVirtualization&&"autocomplete"!==this.getModuleName()){var l=this.getItemData().value,n=this.getIndexByValueFilter(l,this.actionCompleteData.ulElement);(0,s.hX)(n)||(this.activeIndex=n)}this.allowFiltering&&"dropdownlist"===this.getModuleName()&&this.filterInput&&((0,s.hX)(this.ulElement)||(0,s.hX)(this.ulElement.getElementsByClassName("e-item-focus")[0])?(0,s.hX)(this.ulElement)||(0,s.hX)(this.ulElement.getElementsByClassName("e-active")[0])||(0,s.uK)(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):(0,s.uK)(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}));for(var u=0;u<this.liCollections.length;u++)if(this.liCollections[u].classList.contains(m.focus)||this.liCollections[u].classList.contains(m.selected)){i=u;break}null!=i&&this.isDisabledElement(this.liCollections[i])&&("autocomplete"!==this.getModuleName()&&(this.liCollections.length-1===i&&"down"===t.action&&(t.action="up"),0===i&&"up"===t.action&&(t.action="down")),this.updateUpDownAction(t)),t.preventDefault()}},e.prototype.updateHomeEndAction=function(t,e){if("dropdownlist"===this.getModuleName()){var i=0;if("home"===t.action?(i=0,this.enableVirtualization&&this.isPopupOpen?i=this.skeletonCount:this.enableVirtualization&&!this.isPopupOpen&&0!==this.viewPortInfo.startIndex&&(this.viewPortInfo.startIndex=0,this.viewPortInfo.endIndex=this.itemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query))):(this.enableVirtualization&&!this.isPopupOpen&&this.viewPortInfo.endIndex!==this.totalItemCount&&(this.viewPortInfo.startIndex=this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.totalItemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query)),i=this.getItems().length-1),t.preventDefault(),this.activeIndex===i){e&&this.setSelection(this.liCollections[i],t);return}this.setSelection(this.liCollections[i],t)}},e.prototype.selectCurrentValueOnTab=function(t){"autocomplete"===this.getModuleName()?this.selectCurrentItem(t):this.isPopupOpen&&(this.hidePopup(t),this.focusDropDown(t))},e.prototype.mobileKeyActionHandler=function(t){!(!this.enabled||this.isEditTextBox()&&!this.isPopupOpen)&&!this.readonly&&(void 0!==this.list||this.isRequested||(this.searchKeyEvent=t,this.renderList()),!(0,s.hX)(this.list)&&((0,s.hX)(this.liCollections)||0!==this.liCollections.length)&&!this.isRequested&&"enter"===t.action&&this.selectCurrentItem(t))},e.prototype.handleVirtualKeyboardActions=function(t,e){switch(t.action){case"down":case"up":(null!=this.itemData||"autocomplete"===this.getModuleName())&&this.updateUpDownAction(t,!0);break;case"pageUp":this.activeIndex="autocomplete"===this.getModuleName()?this.getIndexByValue(this.selectedLI.getAttribute("data-value"))+this.getPageCount()-1:this.getIndexByValue(this.previousValue),this.pageUpSelection(this.activeIndex-this.getPageCount(),t,!0),t.preventDefault();break;case"pageDown":this.activeIndex="autocomplete"===this.getModuleName()?this.getIndexByValue(this.selectedLI.getAttribute("data-value"))-this.getPageCount():this.getIndexByValue(this.previousValue),this.pageDownSelection((0,s.hX)(this.activeIndex)?2*this.getPageCount():this.activeIndex+this.getPageCount(),t,!0),t.preventDefault();break;case"home":case"end":this.isMouseScrollAction=!0,this.updateHomeEndAction(t,!0)}this.keyboardEvent=null},e.prototype.selectCurrentItem=function(t){if(this.isPopupOpen){var e=this.list.querySelector("."+m.focus);this.isDisabledElement(e)||(e&&(this.setSelection(e,t),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(t)),this.hidePopup(t),this.focusDropDown(t))}else this.showPopup()},e.prototype.isSelectFocusItem=function(t){return!(0,s.hX)(t)},e.prototype.pageUpSelection=function(t,e,i){var l=t>=0?this.liCollections[t+1]:this.liCollections[0];this.enableVirtualization&&null==this.activeIndex&&(l=this.liCollections.length>=t&&t>=0?this.liCollections[t+this.skeletonCount+1]:this.liCollections[0]),!(0,s.hX)(l)&&l.classList.contains("e-virtual-list")&&(l=this.liCollections[this.skeletonCount]),this.PageUpDownSelection(l,e),!this.allowFiltering||"dropdownlist"!==this.getModuleName()||((0,s.hX)(this.ulElement)||(0,s.hX)(this.ulElement.getElementsByClassName("e-item-focus")[0])?(0,s.hX)(this.ulElement)||(0,s.hX)(this.ulElement.getElementsByClassName("e-active")[0])||(0,s.uK)(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):(0,s.uK)(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}))},e.prototype.PageUpDownSelection=function(t,e){this.enableVirtualization&&((0,s.hX)(t)||("autocomplete"===this.getModuleName()||t.classList.contains("e-active"))&&("autocomplete"!==this.getModuleName()||t.classList.contains("e-item-focus")))||this.setSelection(t,e)},e.prototype.pageDownSelection=function(t,e,i){var l=this.getItems(),n=t<=l.length?this.liCollections[t-1]:this.liCollections[l.length-1];this.enableVirtualization&&this.skeletonCount>0&&(n=(t="dropdownlist"===this.getModuleName()&&this.allowFiltering?t+1:t)<l.length?this.liCollections[t]:this.liCollections[l.length-1]),this.enableVirtualization&&null==this.activeIndex&&(n=t<=l.length?this.liCollections[t+this.skeletonCount-1]:this.liCollections[l.length-1]),this.PageUpDownSelection(n,e),!this.allowFiltering||"dropdownlist"!==this.getModuleName()||((0,s.hX)(this.ulElement)||(0,s.hX)(this.ulElement.getElementsByClassName("e-item-focus")[0])?(0,s.hX)(this.ulElement)||(0,s.hX)(this.ulElement.getElementsByClassName("e-active")[0])||(0,s.uK)(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):(0,s.uK)(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}))},e.prototype.unWireEvent=function(){(0,s.hX)(this.inputWrapper)||(s.Jm.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),s.Jm.remove(this.inputWrapper.container,"keypress",this.onSearch),s.Jm.remove(this.inputWrapper.container,"focus",this.focusIn),s.Jm.remove(window,"resize",this.windowResize)),this.unBindCommonEvent()},e.prototype.unWireListEvents=function(){this.list&&(s.Jm.remove(this.list,"click",this.onMouseClick),s.Jm.remove(this.list,"mouseover",this.onMouseOver),s.Jm.remove(this.list,"mouseout",this.onMouseLeave))},e.prototype.checkSelector=function(t){return'[id="'+t.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")+'"]'},e.prototype.onDocumentClick=function(t){var e=t.target;if(!(0,s.hX)(this.popupObj)&&(0,s.kp)(e,this.checkSelector(this.popupObj.element.id))||(0,s.hX)(this.inputWrapper)||this.inputWrapper.container.contains(t.target))e===this.inputElement||this.allowFiltering&&e===this.filterInput||"combobox"===this.getModuleName()&&!this.allowFiltering&&s.Pw.isDevice&&e===this.inputWrapper.buttons[0]||(this.isPreventBlur=(s.Pw.isIE||"edge"===s.Pw.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),t.preventDefault());else if(this.inputWrapper.container.classList.contains(m.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var i=this.isRequested;"combobox"===this.getModuleName()&&this.isTyped&&(this.isInteracted=!1),this.hidePopup(t),this.isInteracted=!1,i||(this.onFocusOut(t),this.inputWrapper.container.classList.remove(m.inputFocus))}},e.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(m.inputFocus))},e.prototype.focusDropDown=function(t){!this.initial&&this.isFilterLayout()&&this.focusIn(t)},e.prototype.dropDownClick=function(t){if(3!==t.which&&2!==t.button&&(this.keyboardEvent=null,!this.targetElement().classList.contains(m.disable)&&this.inputWrapper.clearButton!==t.target)){var e=t.target;if(e===this.inputElement||this.allowFiltering&&e===this.filterInput||"combobox"===this.getModuleName()||t.preventDefault(),this.readonly)this.focusIn(t);else{this.isPopupOpen?(this.hidePopup(t),this.isFilterLayout()&&this.focusDropDown(t)):(this.focusIn(t),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup(t));var i=this,s=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(function(){i.cloneElements(),i.isSecondClick=!0},s)}}},e.prototype.cloneElements=function(){if(this.list){var t=this.list.querySelector("ul");t&&(t=t.cloneNode?t.cloneNode(!0):t,this.actionCompleteData.ulElement=t)}},e.prototype.updateSelectedItem=function(t,e,i,l){var n=this;this.removeSelection(),t.classList.add(r.fu.selected),this.removeHover();var o=null!==t.getAttribute("data-value")?this.getFormattedValue(t.getAttribute("data-value")):null,a=this.getDataByValue(o);if(this.initial||i||(0,s.hX)(e))this.selectEventCallback(t,e,i,a,o),l&&this.setSelectOptions(t,e);else{var h=this.detachChanges(a);this.isSelected=!0,this.trigger("select",{e:e,item:t,itemData:h,isInteracted:!!e,cancel:!1},function(s){s.cancel?t.classList.remove(r.fu.selected):(n.selectEventCallback(t,e,i,a,o),l&&n.setSelectOptions(t,e))})}},e.prototype.selectEventCallback=function(t,e,i,l,n){this.previousItemData=(0,s.hX)(this.itemData)?null:this.itemData,this.itemData!==l&&(this.previousValue=(0,s.hX)(this.itemData)?null:"object"!=typeof this.itemData||this.allowObjectBinding?this.itemData:this.checkFieldValue(this.itemData,this.fields.value.split("."))),this.item=t,this.itemData=l;var o=this.list.querySelector("."+r.fu.focus);if(o&&(0,s.vy)([o],r.fu.focus),t.setAttribute("aria-selected","true"),(0,s.hX)(n)&&(n="null"),this.allowFiltering&&!this.enableVirtualization&&"autocomplete"!==this.getModuleName()){var a=this.getIndexByValueFilter(n,this.actionCompleteData.ulElement);(0,s.hX)(a)?this.activeIndex=this.getIndexByValue(n):this.activeIndex=a}else this.enableVirtualization&&null==this.activeIndex&&this.dataSource instanceof u.M&&(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+r.fu.li),this.ulElement=this.list.querySelector("ul")),this.activeIndex=this.getIndexByValue(n)},e.prototype.activeItem=function(t){this.isValidLI(t)&&!t.classList.contains(r.fu.selected)&&(this.removeSelection(),t.classList.add(r.fu.selected),this.removeHover(),t.setAttribute("aria-selected","true"))},e.prototype.setValue=function(t){var e=this.getItemData();this.isTouched=!(0,s.hX)(t),null===e.value?a.pd.setValue(null,this.inputElement,this.floatLabelType,this.showClearButton):a.pd.setValue(e.text,this.inputElement,this.floatLabelType,this.showClearButton),this.valueTemplate&&null!==this.itemData?this.setValueTemplate():(0,s.hX)(this.valueTempElement)||this.inputElement.previousSibling!==this.valueTempElement||((0,s.Yo)(this.valueTempElement),this.inputElement.style.display="block"),(0,s.hX)(e.value)||this.enableVirtualization||!this.allowFiltering||(this.activeIndex=this.getIndexByValueFilter(e.value,this.actionCompleteData.ulElement));var i=m.clearIcon,l=this.isFiltering()&&this.filterInput&&"combobox"===this.getModuleName()&&this.filterInput.parentElement.querySelector("."+i);return(this.isFiltering()&&l&&l.style.removeProperty("visibility"),!this.allowObjectBinding&&this.previousValue===e.value||this.allowObjectBinding&&null!=this.previousValue&&this.isObjectInArray(this.previousValue,[this.allowCustom&&this.isObjectCustomValue?this.value?this.value:e:e.value?this.getDataByValue(e.value):e]))?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)},e.prototype.setSelection=function(t,e){if(this.isValidLI(t)&&(!t.classList.contains(r.fu.selected)||this.isPopupOpen&&this.isSelected&&t.classList.contains(r.fu.selected)))this.updateSelectedItem(t,e,!1,!0);else if(this.setSelectOptions(t,e),this.enableVirtualization&&this.value){var i=this.fields.value?this.fields.value:"",l=this.allowObjectBinding&&!(0,s.hX)(this.value)?(0,s._W)(this.fields.value?this.fields.value:"",this.value):this.value;if(this.dataSource instanceof u.M){var n=new u.M(this.virtualGroupDataSource).executeLocal(new p.X().where(new p.m(i,"equal",l)));if(n&&n.length>0){this.itemData=n[0];var o=this.getItemData(),a=this.allowObjectBinding?this.getDataByValue(o.value):o.value;(this.value===o.value&&this.text!==o.text||this.value!==o.value&&this.text===o.text)&&this.setProperties({text:o.text?o.text.toString():o.text,value:a})}}else{var n=new u.M(this.dataSource).executeLocal(new p.X().where(new p.m(i,"equal",l)));if(n&&n.length>0){this.itemData=n[0];var o=this.getItemData(),a=this.allowObjectBinding?this.getDataByValue(o.value):o.value;(this.value===o.value&&this.text!==o.text||this.value!==o.value&&this.text===o.text)&&this.setProperties({text:o.text?o.text.toString():o.text,value:a})}}}},e.prototype.setSelectOptions=function(t,e){this.list&&this.removeHover(),this.previousSelectedLI=(0,s.hX)(this.selectedLI)?null:this.selectedLI,this.selectedLI=t,!this.setValue(e)&&((this.isPopupOpen||(0,s.hX)(t))&&(!this.isPopupOpen||(0,s.hX)(e)||"keydown"===e.type&&("keydown"!==e.type||"enter"!==e.action))||(this.isSelectCustom=!1,this.onChangeEvent(e)),!this.isPopupOpen||(0,s.hX)(this.selectedLI)||null===this.itemData||e&&"click"===e.type||this.setScrollPosition(e),"mozilla"!==s.Pw.info.name&&this.targetElement()&&((0,s.uK)(this.targetElement(),{"aria-describedby":""!==this.inputElement.id?this.inputElement.id:this.element.id}),this.targetElement().removeAttribute("aria-live")),!this.isPopupOpen||(0,s.hX)(this.ulElement)||(0,s.hX)(this.ulElement.getElementsByClassName("e-item-focus")[0])?!this.isPopupOpen||(0,s.hX)(this.ulElement)||(0,s.hX)(this.ulElement.getElementsByClassName("e-active")[0])||(0,s.uK)(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):(0,s.uK)(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}))},e.prototype.dropdownCompiler=function(t){var e=!1;if("function"!=typeof t&&t)try{e=!!document.querySelectorAll(t).length}catch(t){e=!1}return e},e.prototype.setValueTemplate=function(){this.isReact&&(this.clearTemplate(["valueTemplate"]),this.valueTempElement&&((0,s.Yo)(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null)),this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:m.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.isReact||(this.valueTempElement.innerHTML="");var t=this.dropdownCompiler(this.valueTemplate),e=("function"!=typeof this.valueTemplate&&t?(0,s.wE)(document.querySelector(this.valueTemplate).innerHTML.trim()):(0,s.wE)(this.valueTemplate))(this.itemData,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,this.valueTempElement);e&&e.length>0&&(0,s.BC)(e,this.valueTempElement),this.renderReactTemplates()},e.prototype.removeSelection=function(){if(this.list){var t=this.list.querySelectorAll("."+r.fu.selected);t.length&&((0,s.vy)(t,r.fu.selected),t[0].removeAttribute("aria-selected"))}},e.prototype.getItemData=function(){var t,e,i=this.fields,l=null;return l=this.itemData,(0,s.hX)(l)||(t=(0,s._W)(i.value,l),e=(0,s._W)(i.text,l)),{value:(0,s.hX)(l)||(0,s.b0)(t)?l:t,text:(0,s.hX)(l)||(0,s.b0)(t)?l:e}},e.prototype.onChangeEvent=function(t,e){var i=this,l=this.getItemData(),n=this.isSelectCustom?null:this.activeIndex;if(this.enableVirtualization){var o=this.dataSource instanceof u.M?this.virtualGroupDataSource:this.dataSource;if(l.value&&o&&o.length>0){var a=o.findIndex(function(t){return!(0,s.hX)(l.value)&&(0,s._W)(i.fields.value,t)===l.value});-1!==a&&(n=a)}}var h=this.allowObjectBinding?e?this.value:this.getDataByValue(l.value):l.value;this.setProperties({index:n,text:l.text?l.text.toString():l.text,value:h},!0),this.detachChangeEvent(t)},e.prototype.detachChanges=function(t){return"string"==typeof t||"boolean"==typeof t||"number"==typeof t?Object.defineProperties({},{value:{value:t,enumerable:!0},text:{value:t,enumerable:!0}}):t},e.prototype.detachChangeEvent=function(t){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.enableVirtualization?this.getIndexByValue(this.value):this.index,this.typedString=(0,s.hX)(this.text)?"":this.text,!this.initial){var e=this.detachChanges(this.itemData),i=void 0;i="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData,this.setHiddenValue();var l={e:t,item:this.item,itemData:e,previousItem:this.previousSelectedLI,previousItemData:i,isInteracted:!!t,value:this.value,element:this.element,event:t};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",l)}((0,s.hX)(this.value)||""===this.value)&&"Always"!==this.floatLabelType&&(0,s.vy)([this.inputWrapper.container],"e-valid-input")},e.prototype.setHiddenValue=function(){if((0,s.hX)(this.value))this.hiddenElement.innerHTML="";else{var t=this.allowObjectBinding&&!(0,s.hX)(this.value)?(0,s._W)(this.fields.value?this.fields.value:"",this.value):this.value;if(this.hiddenElement.querySelector("option")){var e=this.hiddenElement.querySelector("option");e.textContent=this.text,e.setAttribute("value",t.toString())}else if(!(0,s.hX)(this.hiddenElement)){var i=document.createElement("option");i.text=this.text,i.setAttribute("selected",""),this.hiddenElement.appendChild(i);var e=this.hiddenElement.querySelector("option");e.setAttribute("value",t.toString())}}},e.prototype.onFilterUp=function(t){if(!(t.ctrlKey&&86===t.keyCode)&&(this.isValidKey||40===t.keyCode||38===t.keyCode))switch(this.isValidKey=!1,this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,t.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(t)),this.preventAltUp=!1,"autocomplete"!==this.getModuleName()||(0,s.hX)(this.ulElement)||(0,s.hX)(this.ulElement.getElementsByClassName("e-item-focus")[0])||(0,s.uK)(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}),t.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0?(this.preventAutoFill=!0,this.searchLists(t)):""===this.typedString&&""===this.queryString&&"autocomplete"!==this.getModuleName()?(this.preventAutoFill=!0,this.searchLists(t)):""===this.typedString&&(this.list&&this.resetFocusElement(),this.activeIndex=null,"dropdownlist"!==this.getModuleName()&&(this.preventAutoFill=!0,this.searchLists(t),"autocomplete"===this.getModuleName()&&this.hidePopup())),t.preventDefault();break;default:this.isFiltering()&&"combobox"===this.getModuleName()&&(0,s.hX)(this.list)&&(this.getInitialData=!0,this.renderList()),this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(t),(this.enableVirtualization&&"autocomplete"!==this.getModuleName()||"autocomplete"===this.getModuleName()&&!(this.dataSource instanceof u.M)||"autocomplete"===this.getModuleName()&&this.dataSource instanceof u.M&&0!==this.totalItemCount)&&this.getFilteringSkeletonCount()}else this.isValidKey=!1},e.prototype.onFilterDown=function(t){switch(t.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,t.preventDefault();break;case 9:this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&t.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}},e.prototype.removeFillSelection=function(){if(this.isInteracted){var t=this.getSelectionPoints();this.inputElement.setSelectionRange(t.end,t.end)}},e.prototype.getQuery=function(t){var e;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){e=t?t.clone():this.query?this.query.clone():new p.X;var i=""===this.typedString?"contains":this.filterType,l=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof u.M||"string"!==l)&&"number"!==l){if("combobox"!==this.getModuleName()||this.isFiltering()&&"combobox"===this.getModuleName()&&""!==this.typedString){var n=this.fields.text?this.fields.text:"";e.where(n,i,this.typedString,this.ignoreCase,this.ignoreAccent)}}else e.where("",i,this.typedString,this.ignoreCase,this.ignoreAccent)}else e=this.enableVirtualization&&!(0,s.hX)(this.customFilterQuery)?this.customFilterQuery.clone():t?t.clone():this.query?this.query.clone():new p.X;if(this.enableVirtualization&&0!==this.viewPortInfo.endIndex){var o=this.getTakeValue(),a=!1;if(e){for(var h=0;h<e.queries.length;h++)if("onSkip"===e.queries[h].fn){a=!0;break}}var r=0,c=0;if(e&&e.queries.length>0)for(var h=0;h<e.queries.length;h++)"onSkip"===e.queries[h].fn&&(c=e.queries[h].e.nos),"onTake"===e.queries[h].fn&&(r=o<=e.queries[h].e.nos?e.queries[h].e.nos:o);if(r<=0&&this.query&&this.query.queries.length>0)for(var h=0;h<this.query.queries.length;h++)"onTake"===this.query.queries[h].fn&&(r=o<=this.query.queries[h].e.nos?this.query.queries[h].e.nos:o);if(e&&e.queries.length>0)for(var h=0;h<e.queries.length;h++){if("onSkip"===e.queries[h].fn){c=e.queries[h].e.nos,e.queries.splice(h,1),a=!1,--h;continue}"onTake"===e.queries[h].fn&&(r=e.queries[h].e.nos<=r?r:e.queries[h].e.nos,e.queries.splice(h,1),--h)}!this.allowFiltering&&this.isPopupOpen&&a||(c>0?e.skip(c):e.skip(this.virtualItemStartIndex)),this.isIncrementalRequest?e.take(this.incrementalEndIndex):r>0?e.take(r):e.take(o),e.requiresCount()}return e},e.prototype.getSelectionPoints=function(){var t=this.inputElement;return{start:Math.abs(t.selectionStart),end:Math.abs(t.selectionEnd)}},e.prototype.searchLists=function(t){var e=this;if(this.isTyped=!0,this.activeIndex=null,this.isListSearched=!0,this.filterInput.parentElement.querySelector("."+m.clearIcon)&&(this.filterInput.parentElement.querySelector("."+m.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible"),this.isDataFetched=!1,this.isFiltering()){this.checkAndResetCache(),this.isRequesting=!1;var i={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(t,s,l){i.cancel||(e.isCustomFilter=!0,e.customFilterQuery=s?s.clone():s,e.filteringAction(t,s,l))},baseEventArgs:t,cancel:!1};this.trigger("filtering",i,function(t){t.cancel||e.isCustomFilter||t.preventDefaultAction||e.filteringAction(e.dataSource,null,e.fields)})}},e.prototype.filter=function(t,e,i){this.isCustomFilter=!0,this.filteringAction(t,e,i)},e.prototype.filteringAction=function(t,e,i){if(!(0,s.hX)(this.filterInput)){this.beforePopupOpen=(!!this.isPopupOpen||"combobox"!==this.getModuleName()||""!==this.filterInput.value)&&!this.getInitialData;var l=this.list.classList.contains(r.fu.noData);if(""!==this.filterInput.value.trim()||this.itemTemplate){if(this.isNotSearchList=!1,e=""===this.filterInput.value.trim()?null:e,this.enableVirtualization&&this.isFiltering()&&this.isTyped&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.resetList(t,i,e),"dropdownlist"===this.getModuleName()&&this.list.classList.contains(r.fu.noData)&&(this.popupContentElement.setAttribute("role","status"),this.popupContentElement.setAttribute("id","no-record"),(0,s.uK)(this.filterInputObj.container,{"aria-activedescendant":"no-record"})),this.enableVirtualization&&l&&!this.list.classList.contains(r.fu.noData)&&(this.list.querySelector(".e-virtual-ddl-content")||this.list.appendChild(this.createElement("div",{className:"e-virtual-ddl-content",styles:this.getTransformValues()})).appendChild(this.list.querySelector(".e-list-parent")),!this.list.querySelector(".e-virtual-ddl"))){var n=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});document.getElementsByClassName("e-popup")[0].querySelector(".e-dropdownbase").appendChild(n)}}else{if(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,!(0,s.hX)(this.actionCompleteData.ulElement)&&!(0,s.hX)(this.actionCompleteData.list)){if(this.enableVirtualization&&(this.isFiltering()&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.resetList(t,i,e),l&&!this.list.classList.contains(r.fu.noData)&&(this.list.querySelector(".e-virtual-ddl-content")||this.list.appendChild(this.createElement("div",{className:"e-virtual-ddl-content",styles:this.getTransformValues()})).appendChild(this.list.querySelector(".e-list-parent")),!this.list.querySelector(".e-virtual-ddl")))){var n=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});document.getElementsByClassName("e-popup")[0].querySelector(".e-dropdownbase").appendChild(n)}this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list)}this.isTyped=!0,(0,s.hX)(this.itemData)||"dropdownlist"!==this.getModuleName()||(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0}this.enableVirtualization&&this.getFilteringSkeletonCount(),this.renderReactTemplates()}},e.prototype.setSearchBox=function(t){if(!this.isFiltering())return f;var e=t.querySelector("."+m.filterParent)?t.querySelector("."+m.filterParent):this.createElement("span",{className:m.filterParent});this.filterInput=this.createElement("input",{attrs:{type:"text"},className:m.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var i=!1;return s.Pw.isDevice&&this.isDeviceFullScreen&&(i=!0),this.filterInputObj=a.pd.createInput({element:this.filterInput,buttons:i?[m.backIcon,m.filterBarClearIcon]:[m.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),(0,s.hX)(this.cssClass)||(-1!==this.cssClass.split(" ").indexOf("e-outline")?(0,s.iQ)([this.filterInputObj.container],"e-outline"):-1!==this.cssClass.split(" ").indexOf("e-filled")&&(0,s.iQ)([this.filterInputObj.container],"e-filled")),(0,s.BC)([this.filterInputObj.container],e),(0,s.Hs)([e],t),(0,s.uK)(this.filterInput,{"aria-disabled":"false",role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+m.clearIcon),!s.Pw.isDevice&&this.clearIconElement&&(s.Jm.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),s.Pw.isDevice?this.searchKeyModule=new s.j9(this.filterInput,{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.searchKeyModule=new s.j9(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),s.Jm.add(this.filterInput,"input",this.onInput,this),s.Jm.add(this.filterInput,"keyup",this.onFilterUp,this),s.Jm.add(this.filterInput,"keydown",this.onFilterDown,this),s.Jm.add(this.filterInput,"blur",this.onBlurHandler,this),s.Jm.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj},e.prototype.onInput=function(t){!(0,s.hX)(t)&&!(0,s.hX)(t.data)&&t.data.length>1&&this.autoFill&&("combobox"===this.getModuleName()||"autocomplete"===this.getModuleName())&&(this.inputElement.value=t.data),this.isValidKey=!0,"combobox"===this.getModuleName()&&this.updateIconState(),s.Pw.isDevice&&"mozilla"===s.Pw.info.name&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(t))},e.prototype.pasteHandler=function(t){var e=this;setTimeout(function(){e.typedString=e.filterInput.value,e.searchLists(t)})},e.prototype.onActionFailure=function(e){t.prototype.onActionFailure.call(this,e),this.beforePopupOpen&&this.renderPopup()},e.prototype.getTakeValue=function(){return this.allowFiltering&&"dropdownlist"===this.getModuleName()&&s.Pw.isDevice?Math.round(window.outerHeight/this.listItemHeight):this.itemCount},e.prototype.onActionComplete=function(e,i,l,n){var o=this;if(this.dataSource instanceof u.M&&!(0,s.hX)(l)&&!this.virtualGroupDataSource&&(this.totalItemCount=l.count),this.isNotSearchList&&!this.enableVirtualization){this.isNotSearchList=!1;return}this.getInitialData&&this.updateActionCompleteDataValues(e,i),this.preventPopupOpen||"combobox"!==this.getModuleName()||(this.beforePopupOpen=!0,this.preventPopupOpen=!0);var a=this.itemCount;if(this.isActive||!(0,s.hX)(e)){var h=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(t.prototype.onActionComplete.call(this,e,i,l),this.skeletonCount=0!==this.totalItemCount&&this.totalItemCount<2*this.itemCount&&(!(this.dataSource instanceof u.M)||this.dataSource instanceof u.M&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount,this.updateSelectElementData(this.allowFiltering),this.isRequested&&!(0,s.hX)(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!(0,s.hX)(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.enableVirtualization||(this.list.scrollTop=0),(0,s.hX)(e)||(0,s.uK)(e,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false","aria-label":"listbox"}),this.initialRemoteRender){if(this.initial=!0,this.activeIndex=this.index,this.initialRemoteRender=!1,this.value&&this.dataSource instanceof u.M){var r=(0,s.hX)(this.fields.value)?this.fields.text:this.fields.value,c=this.allowObjectBinding&&!(0,s.hX)(this.value)?(0,s._W)(r,this.value):this.value,d=this.fields.value.split("."),m=i.some(function(t){return(0,s.hX)(t[r])&&d.length>1?o.checkFieldValue(t,d)===c:t[r]===c});this.enableVirtualization&&this.virtualGroupDataSource&&(m=this.virtualGroupDataSource.some(function(t){return(0,s.hX)(t[r])&&d.length>1?o.checkFieldValue(t,d)===c:t[r]===c})),m?this.updateValues():this.dataSource.executeQuery(this.getQuery(this.query).where(new p.m(r,"equal",c))).then(function(t){t.result.length>0&&o.addItem(t.result,i.length),o.updateValues()})}else this.updateValues();this.initial=!1}else"autocomplete"===this.getModuleName()&&this.value&&this.setInputValue();if("autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped){if((!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||(0,s.hX)(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof u.M||!(0,s.hX)(this.dataSource)&&!(0,s.hX)(this.dataSource.length)&&0!==this.dataSource.length))&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(function(){o.updateActionCompleteDataValues(e,i)},0):this.updateActionCompleteDataValues(e,i)),this.isDynamicData){var f=this.allowObjectBinding&&!(0,s.hX)(this.value)?(0,s._W)(this.fields.value?this.fields.value:"",this.value):this.value;this.itemData=this.getDataByValue(f),this.selectedLI=this.getElementByValue(f),this.isDynamicData=!1}if((this.allowCustom||this.allowFiltering&&!this.isValueInList(i,this.value)&&this.dataSource instanceof u.M)&&!this.enableVirtualization)this.addNewItem(i,h);else if((this.allowCustom||this.allowFiltering&&this.isValueInList(i,this.value))&&!this.enableVirtualization){var v=this.allowObjectBinding&&!(0,s.hX)(this.value)?(0,s._W)(this.fields.value?this.fields.value:"",this.value):this.value;!(0,s.hX)(this.value)&&h&&h.getAttribute("data-value")===v.toString()&&this.addNewItem(i,h)}(!(0,s.hX)(this.itemData)||(0,s.hX)(this.itemData)&&this.enableVirtualization)&&(this.getSkeletonCount(),this.skeletonCount=0!==this.totalItemCount&&this.totalItemCount<2*this.itemCount&&(!(this.dataSource instanceof u.M)||this.dataSource instanceof u.M&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount,this.UpdateSkeleton(),this.focusIndexItem()),this.enableVirtualization&&this.updateActionCompleteDataValues(e,i)}else if(this.enableVirtualization&&"autocomplete"!==this.getModuleName()&&!this.isFiltering()){var v=this.getItemData().value;this.activeIndex=this.getIndexByValue(v);var g=this.findListElement(this.list,"li","data-value",v);this.selectedLI=g}else this.enableVirtualization&&"autocomplete"===this.getModuleName()&&(this.activeIndex=this.skeletonCount);this.beforePopupOpen&&(this.renderPopup(l),this.enableVirtualization&&!this.list.querySelector(".e-virtual-list")&&(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item")),this.enableVirtualization&&a!==this.itemCount&&this.resetList(this.dataSource,this.fields))}},e.prototype.isValueInList=function(t,e){if(Array.isArray(t)){for(var i=0;i<t.length;i++)if(t[i]===e)return!0}else if("object"==typeof t&&null!==t){for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&t[s]===e)return!0}return!1},e.prototype.checkFieldValue=function(t,e){var i=t;return e.forEach(function(t){i=i[t]}),i},e.prototype.updateActionCompleteDataValues=function(t,e){this.actionCompleteData={ulElement:t.cloneNode(!0),list:e,isUpdated:!0},this.actionData.list!==this.actionCompleteData.list&&this.actionCompleteData.ulElement&&this.actionCompleteData.list&&(this.actionData=this.actionCompleteData)},e.prototype.addNewItem=function(t,e){var i=this;if(!(0,s.hX)(this.itemData)&&!(0,s.hX)(e)){var l=this.getItemData().value;t.some(function(t){return("string"==typeof t||"number"==typeof t||"boolean"==typeof t)&&t===l||(0,s._W)(i.fields.value,t)===l})||this.addItem(this.itemData)}},e.prototype.updateActionCompleteData=function(t,e,i){var s=this;"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(function(){s.actionCompleteDataUpdate(t,e,i)},0):this.actionCompleteDataUpdate(t,e,i))},e.prototype.actionCompleteDataUpdate=function(t,e,i){null!==i?this.actionCompleteData.ulElement.insertBefore(t.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[i]):this.actionCompleteData.ulElement.appendChild(t.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list&&0>this.actionCompleteData.list.indexOf(e)&&this.actionCompleteData.list.push(e)},e.prototype.focusIndexItem=function(){var t=this.getItemData().value;this.activeIndex=(!this.enableVirtualization||(0,s.hX)(t))&&this.enableVirtualization?this.activeIndex:this.getIndexByValue(t);var e=this.findListElement(this.list,"li","data-value",t);this.selectedLI=e,this.activeItem(e),this.enableVirtualization&&(0,s.hX)(e)||this.removeFocus()},e.prototype.updateSelection=function(){var t=this.list.querySelector("."+r.fu.selected);t?(this.setProperties({index:this.getIndexByValue(t.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+r.fu.li).classList.add(m.focus))},e.prototype.updateSelectionList=function(){if(!(this.list&&this.list.querySelector(".e-active"))&&!(0,s.hX)(this.value)){var t=this.allowObjectBinding?(0,s._W)(this.fields.value?this.fields.value:"",this.value):this.value,e=this.findListElement(this.list,"li","data-value",t);e&&e.classList.add("e-active")}},e.prototype.removeFocus=function(){var t=this.list.querySelectorAll("."+m.focus);t&&t.length&&(0,s.vy)(t,m.focus)},e.prototype.renderPopup=function(t){var e=this;if(this.popupObj&&document.body.contains(this.popupObj.element)){this.refreshPopup();return}this.trigger("beforeOpen",{cancel:!1},function(i){if(i.cancel)e.beforePopupOpen=!1;else{var l=e.createElement("div",{id:e.element.id+"_popup",className:"e-ddl e-popup "+(null!==e.cssClass?e.cssClass:"")});l.setAttribute("aria-label",e.element.id),l.setAttribute("role","dialog");var n=e.setSearchBox(l);if(e.listContainerHeight=e.allowFiltering&&"dropdownlist"===e.getModuleName()&&s.Pw.isDevice?(0,s.IV)(Math.round(window.outerHeight).toString()+"px"):(0,s.IV)(e.popupHeight),e.headerTemplate&&e.setHeaderTemplate(l),(0,s.BC)([e.list],l),e.footerTemplate&&e.setFooterTemplate(l),document.body.appendChild(l),l.style.top="0px",e.enableVirtualization&&e.itemTemplate){var o=l.querySelectorAll("li.e-list-item:not(.e-virtual-list)");e.listItemHeight=o.length>0?Math.ceil(o[0].getBoundingClientRect().height)+parseInt(window.getComputedStyle(o[0]).marginBottom,10):0}if(e.enableVirtualization&&!e.list.classList.contains(r.fu.noData)){if(e.getSkeletonCount(),e.skeletonCount=e.totalItemCount<2*e.itemCount&&(!(e.dataSource instanceof u.M)||e.dataSource instanceof u.M&&e.totalItemCount<=e.itemCount)?0:e.skeletonCount,e.list.querySelector(".e-virtual-ddl-content")?e.list.getElementsByClassName("e-virtual-ddl-content")[0].style=e.getTransformValues():e.list.appendChild(e.createElement("div",{className:"e-virtual-ddl-content",styles:e.getTransformValues()})).appendChild(e.list.querySelector(".e-list-parent")),e.UpdateSkeleton(),e.liCollections=e.list.querySelectorAll("."+r.fu.li),e.virtualItemCount=e.itemCount,e.list.querySelector(".e-virtual-ddl"))e.list.getElementsByClassName("e-virtual-ddl")[0].style=e.GetVirtualTrackHeight();else{var a=e.createElement("div",{id:e.element.id+"_popup",className:"e-virtual-ddl",styles:e.GetVirtualTrackHeight()});l.querySelector(".e-dropdownbase").appendChild(a)}}if(l.style.visibility="hidden","auto"!==e.popupHeight){if(e.searchBoxHeight=0,(0,s.hX)(n.container)||"combobox"===e.getModuleName()||"autocomplete"===e.getModuleName()||(e.searchBoxHeight=n.container.parentElement.getBoundingClientRect().height,e.listContainerHeight=(parseInt(e.listContainerHeight,10)-e.searchBoxHeight).toString()+"px"),e.headerTemplate){e.header=e.header?e.header:l.querySelector(".e-ddl-header");var h=Math.round(e.header.getBoundingClientRect().height);e.listContainerHeight=(parseInt(e.listContainerHeight,10)-(h+e.searchBoxHeight)).toString()+"px"}if(e.footerTemplate){e.footer=e.footer?e.footer:l.querySelector(".e-ddl-footer");var h=Math.round(e.footer.getBoundingClientRect().height);e.listContainerHeight=(parseInt(e.listContainerHeight,10)-(h+e.searchBoxHeight)).toString()+"px"}e.list.style.maxHeight=(parseInt(e.listContainerHeight,10)-2).toString()+"px",l.style.maxHeight=(0,s.IV)(e.popupHeight)}else l.style.height="auto";var p=0,c=void 0;if(e.isPreventScrollAction=!0,(0,s.hX)(e.selectedLI)||(0,s.hX)(e.activeIndex)||!(e.activeIndex>=0)?e.enableVirtualization?e.setScrollPosition():e.list.scrollTop=0:e.setScrollPosition(),s.Pw.isDevice&&e.isDeviceFullScreen&&!e.allowFiltering&&("dropdownlist"===e.getModuleName()||e.isDropDownClick&&"combobox"===e.getModuleName())){p=e.getOffsetValue(l);var d=e.isEmptyList()?e.list:e.liCollections[0];(0,s.hX)(e.inputElement)||(c=-(parseInt(getComputedStyle(d).textIndent,10)-parseInt(getComputedStyle(e.inputElement).paddingLeft,10)+parseInt(getComputedStyle(e.inputElement.parentElement).borderLeftWidth,10)))}e.createPopup(l,p,c),e.popupContentElement=e.popupObj.element.querySelector(".e-content"),e.getFocusElement(),e.checkCollision(l),s.Pw.isDevice&&(parseInt(e.popupWidth.toString(),10)>window.outerWidth&&!("dropdownlist"===e.getModuleName()&&e.allowFiltering)&&e.popupObj.element.classList.add("e-wide-popup"),e.popupObj.element.classList.add(m.device),("dropdownlist"===e.getModuleName()||"combobox"===e.getModuleName()&&!e.allowFiltering&&e.isDropDownClick)&&(e.popupObj.collision={X:"fit",Y:"fit"}),e.isFilterLayout()&&e.isDeviceFullScreen&&(e.popupObj.element.classList.add(m.mobileFilter),e.popupObj.position={X:0,Y:0},e.popupObj.dataBind(),(0,s.uK)(e.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),(0,s.iQ)([document.body,e.popupObj.element],m.popupFullScreen),e.setSearchBoxPosition(),e.backIconElement=n.container.querySelector(".e-back-icon"),e.clearIconElement=n.container.querySelector("."+m.clearIcon),s.Jm.add(e.backIconElement,"click",e.clickOnBackIcon,e),s.Jm.add(e.clearIconElement,"click",e.clearText,e))),l.style.visibility="visible",(0,s.iQ)([l],"e-popup-close");for(var f=e.popupObj.getScrollableParent(e.inputWrapper.container),v=0;v<f.length;v++){var g=f[v];s.Jm.add(g,"scroll",e.scrollHandler,e)}(0,s.hX)(e.list)||(e.unWireListEvents(),e.wireListEvents()),e.selectedElementID=e.selectedLI?e.selectedLI.id:null,e.enableVirtualization&&(e.notify("bindScrollEvent",{module:"VirtualScroll",component:e.getModuleName(),enable:e.enableVirtualization}),setTimeout(function(){(e.value||e.list.querySelector(".e-active"))&&(e.updateSelectionList(),e.selectedValueInfo&&e.viewPortInfo&&e.viewPortInfo.offsets.top?e.list.scrollTop=e.viewPortInfo.offsets.top:e.scrollBottom(!0,!0))},5)),(0,s.uK)(e.targetElement(),{"aria-expanded":"true","aria-owns":e.element.id+"_popup","aria-controls":e.element.id}),"dropdownlist"!==e.getModuleName()&&e.list.classList.contains("e-nodata")&&((0,s.uK)(e.targetElement(),{"aria-activedescendant":"no-record"}),e.popupContentElement.setAttribute("role","status"),e.popupContentElement.setAttribute("id","no-record")),e.inputElement.setAttribute("aria-expanded","true"),e.inputElement.setAttribute("aria-controls",e.element.id+"_popup");var y=e.isFiltering()?e.filterInput.parentElement:e.inputWrapper.container;(0,s.iQ)([y],[m.inputFocus]),e.beforePopupOpen=!0;var b=e.popupObj;e.trigger("open",{popup:b,event:t,cancel:!1,animation:{name:"FadeIn",duration:100}},function(t){t.cancel?(e.beforePopupOpen=!1,e.destroyPopup()):((0,s.hX)(e.inputWrapper)||(0,s.iQ)([e.inputWrapper.container],[m.iconAnimation]),e.renderReactTemplates(),(0,s.hX)(e.popupObj)||e.popupObj.show(new s.X5(t.animation),1e3===e.zIndex?e.element:null))})}})},e.prototype.checkCollision=function(t){s.Pw.isDevice&&(!s.Pw.isDevice||"dropdownlist"===this.getModuleName()||this.isDropDownClick)||((0,n.D$)(t).length>0&&(t.style.marginTop=-parseInt(getComputedStyle(t).marginTop,10)+"px"),this.popupObj.resolveCollision())},e.prototype.getOffsetValue=function(t){var e=getComputedStyle(t),i=parseInt(e.borderTopWidth,10),s=parseInt(e.borderBottomWidth,10);return this.setPopupPosition(i+s)},e.prototype.createPopup=function(t,e,i){var l=this;this.popupObj=new o.zD(t,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:this.enableRtl?{X:"fit",Y:"flip"}:{X:"flip",Y:"flip"},offsetY:e,enableRtl:this.enableRtl,offsetX:i,position:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:function(){l.isDocumentClick||l.focusDropDown(),l.isReact&&l.clearTemplate(["headerTemplate","footerTemplate"]),l.isNotSearchList=!1,l.isDocumentClick=!1,l.destroyPopup(),l.isFiltering()&&l.actionCompleteData.list&&l.actionCompleteData.list.length>0?(l.isActive=!0,l.enableVirtualization?l.onActionComplete(l.ulElement,l.listData,null,!0):l.onActionComplete(l.actionCompleteData.ulElement,l.actionCompleteData.list,null,!0)):l.enableVirtualization&&l.focusIndexItem()},open:function(){s.Jm.add(document,"mousedown",l.onDocumentClick,l),l.isPopupOpen=!0;var t=l.actionCompleteData&&l.actionCompleteData.ulElement&&l.actionCompleteData.ulElement.querySelector("li"),e=l.list.querySelector("ul li");(0,s.hX)(l.ulElement)||(0,s.hX)(l.ulElement.getElementsByClassName("e-item-focus")[0])?(0,s.hX)(l.ulElement)||(0,s.hX)(l.ulElement.getElementsByClassName("e-active")[0])||(0,s.uK)(l.targetElement(),{"aria-activedescendant":l.ulElement.getElementsByClassName("e-active")[0].id}):(0,s.uK)(l.targetElement(),{"aria-activedescendant":l.ulElement.getElementsByClassName("e-item-focus")[0].id}),l.isFiltering()&&l.itemTemplate&&l.element.tagName===l.getNgDirective()&&t&&e&&t.textContent!==e.textContent&&"EJS-COMBOBOX"!==l.element.tagName&&l.cloneElements(),l.isFilterLayout()&&((0,s.vy)([l.inputWrapper.container],[m.inputFocus]),l.isFilterFocus=!0,l.filterInput.focus(),l.inputWrapper.clearButton&&(0,s.iQ)([l.inputWrapper.clearButton],m.clearIconHide)),l.activeStateChange()},targetExitViewport:function(){s.Pw.isDevice||l.hidePopup()}})},e.prototype.isEmptyList=function(){return!(0,s.hX)(this.liCollections)&&0===this.liCollections.length},e.prototype.getFocusElement=function(){},e.prototype.isFilterLayout=function(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering},e.prototype.scrollHandler=function(){s.Pw.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.element&&!this.isElementInViewport(this.element)&&this.hidePopup()},e.prototype.isElementInViewport=function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=window.innerHeight&&e.right<=window.innerWidth},e.prototype.setSearchBoxPosition=function(){var t=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-t+"px",this.list.style.height=window.innerHeight-t+"px";var e=this.filterInput.parentElement.querySelector("."+m.clearIcon);(0,s.Yo)(this.filterInput),e.parentElement.insertBefore(this.filterInput,e)},e.prototype.setPopupPosition=function(t){var e,i=this.list.querySelector("."+m.focus)||this.selectedLI,l=this.isEmptyList()?this.list:this.liCollections[0],n=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],o=l.getBoundingClientRect().height;this.listItemHeight=o+parseInt(window.getComputedStyle(l).marginBottom,10);var a=this.list.offsetHeight/2,h=(0,s.hX)(i)?l.offsetTop:i.offsetTop;if(n.offsetTop-a<h&&!(0,s.hX)(this.liCollections)&&this.liCollections.length>0&&!(0,s.hX)(i)){var r=this.list.offsetHeight/o,u=parseInt(getComputedStyle(this.list).paddingBottom,10);e=(r-(this.liCollections.length-this.activeIndex))*o-t+u,this.list.scrollTop=i.offsetTop}else h>a&&!this.enableVirtualization?(e=a-o/2,this.list.scrollTop=h-a+o/2):e=h;return-(e=e+o+t-(o-this.inputWrapper.container.offsetHeight)/2)},e.prototype.setWidth=function(){var t=(0,s.IV)(this.popupWidth);if(t.indexOf("%")>-1&&(t=(this.inputWrapper.container.offsetWidth*parseFloat(t)/100).toString()+"px"),s.Pw.isDevice&&t.indexOf("px")>-1&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){var e=this.isEmptyList()?this.list:this.liCollections[0];t=parseInt(t,10)+(parseInt(getComputedStyle(e).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))*2+"px"}return t},e.prototype.scrollBottom=function(t,e,i){var l=this;if(void 0===e&&(e=!1),void 0===i&&(i=null),(0,s.hX)(this.selectedLI)&&this.enableVirtualization&&(this.selectedLI=this.list.querySelector("."+r.fu.li),!(0,s.hX)(this.selectedLI)&&this.selectedLI.classList.contains("e-virtual-list")&&(this.selectedLI=this.liCollections[this.skeletonCount])),!(0,s.hX)(this.selectedLI)){var n=this.selectedLI&&!isNaN(parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10))?parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10):0;this.isUpwardScrolling=!1;var o=this.list.querySelectorAll(".e-virtual-list").length,a=this.list.querySelector("li:last-of-type")?this.list.querySelector("li:last-of-type").getAttribute("data-value"):null,h=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*(this.selectedLI.offsetHeight+n):this.selectedLI.offsetTop,u=this.list.offsetHeight,p=h-o*(this.selectedLI.offsetHeight+n)+(this.selectedLI.offsetHeight+n)-this.list.scrollTop,c=this.list.scrollTop+p-u,d=!1;c=t?c+2*parseInt(getComputedStyle(this.list).paddingTop,10):c+parseInt(getComputedStyle(this.list).paddingTop,10);var m=h-o*(this.selectedLI.offsetHeight+n)+(this.selectedLI.offsetHeight+n)-this.list.scrollTop;if(m=this.fields.groupBy&&!(0,s.hX)(this.fixedHeaderElement)?m-this.fixedHeaderElement.offsetHeight:m,0!==this.activeIndex||this.enableVirtualization){if(p>u||!(m>0&&this.list.offsetHeight>m)){var f=this.selectedLI?this.selectedLI.getAttribute("data-value"):null,v="pageDown"===i?this.getPageCount()-2:1;!this.enableVirtualization||this.isKeyBoardAction||e?this.isKeyBoardAction&&this.enableVirtualization&&a&&f===a&&"end"!==i&&!this.isVirtualScrolling?(this.isPreventKeyAction=!0,this.enableVirtualization&&this.itemTemplate?this.list.scrollTop+=c:(this.enableVirtualization&&(v="pageDown"===i?this.getPageCount()+1:v),this.list.scrollTop+=(this.selectedLI.offsetHeight+n)*v),this.isPreventKeyAction=!this.IsScrollerAtEnd()&&this.isPreventKeyAction,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&"end"===i?(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1,this.list.scrollTop=this.list.scrollHeight):("pageDown"===i&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=c):this.list.scrollTop=this.virtualListInfo&&this.virtualListInfo.startIndex?this.virtualListInfo.startIndex*this.listItemHeight:0,d=this.isKeyBoardAction}}else this.list.scrollTop=0,d=this.isKeyBoardAction;this.isKeyBoardAction=d,this.enableVirtualization&&this.fields.groupBy&&this.fixedHeaderElement&&"down"===i&&setTimeout(function(){l.scrollStop(null,!0)},100)}},e.prototype.scrollTop=function(t){if(void 0===t&&(t=null),!(0,s.hX)(this.selectedLI)){var e=this.selectedLI&&!isNaN(parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10))?parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10):0,i=this.list.querySelectorAll(".e-virtual-list").length,l=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*(this.selectedLI.offsetHeight+e):this.selectedLI.offsetTop,n=l-i*(this.selectedLI.offsetHeight+e)-this.list.scrollTop,o=this.list.querySelector("li.e-list-item:not(.e-virtual-list)")?this.list.querySelector("li.e-list-item:not(.e-virtual-list)").getAttribute("data-value"):null;n=this.fields.groupBy&&!(0,s.hX)(this.fixedHeaderElement)?n-this.fixedHeaderElement.offsetHeight:n;var a=l-i*(this.selectedLI.offsetHeight+e)+(this.selectedLI.offsetHeight+e)-this.list.scrollTop,h=this.enableVirtualization&&"autocomplete"===this.getModuleName()&&n<=0;if(0!==this.activeIndex||this.enableVirtualization){if(n<0||h){var r=this.selectedLI?this.selectedLI.getAttribute("data-value"):null,u="pageUp"===t?this.getPageCount()-2:1;this.enableVirtualization&&(u="pageUp"===t?this.getPageCount():u),this.enableVirtualization&&this.isKeyBoardAction&&o&&r===o&&"home"!==t&&!this.isVirtualScrolling?(this.isUpwardScrolling=!0,this.isPreventKeyAction=!0,this.list.scrollTop-=(this.selectedLI.offsetHeight+e)*u,this.isPreventKeyAction=0!==this.list.scrollTop&&this.isPreventKeyAction,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&"home"===t?(this.isPreventScrollAction=!1,this.isPreventKeyAction=!0,this.isKeyBoardAction=!1,this.list.scrollTo(0,0)):("pageUp"===t&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=this.list.scrollTop+n)}else a>0&&this.list.offsetHeight>a||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!(0,s.hX)(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}else this.list.scrollTop=0}},e.prototype.IsScrollerAtEnd=function(){return this.list&&this.list.scrollTop+this.list.clientHeight>=this.list.scrollHeight},e.prototype.isEditTextBox=function(){return!1},e.prototype.isFiltering=function(){return this.allowFiltering},e.prototype.isPopupButton=function(){return!0},e.prototype.setScrollPosition=function(t){if(this.isPreventScrollAction=!0,(0,s.hX)(t))this.scrollBottom(!0);else switch(t.action){case"pageDown":case"down":case"end":this.isKeyBoardAction=!0,this.scrollBottom(!1,!1,t.action);break;default:this.isKeyBoardAction="up"===t.action||"pageUp"===t.action||"open"===t.action,this.scrollTop(t.action)}this.isKeyBoardAction=!1},e.prototype.clearText=function(){this.filterInput.value=this.typedString="",this.searchLists(null),this.enableVirtualization&&(this.list.scrollTop=0,this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.list.getElementsByClassName("e-virtual-ddl")[0]&&(this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight()),this.getSkeletonCount(),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues()))},e.prototype.setEleWidth=function(t){(0,s.hX)(t)||("number"==typeof t?this.inputWrapper.container.style.width=(0,s.IV)(t):"string"==typeof t&&(this.inputWrapper.container.style.width=t.match(/px|%|em/)?t:(0,s.IV)(t)))},e.prototype.closePopup=function(t,e){var i,l=this,n=!(0,s.hX)(this.filterInput)&&!(0,s.hX)(this.filterInput.value)&&""!==this.filterInput.value;if("combobox"===this.getModuleName()&&this.typedString,this.isTyped=!1,this.isVirtualTrackHeight=!1,this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen){this.keyboardEvent=null,s.Jm.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,"dropdownlist"===this.getModuleName()&&a.pd.destroy({element:this.filterInput,floatLabelType:this.floatLabelType,properties:{placeholder:this.filterBarPlaceholder},buttons:this.clearIconElement},this.clearIconElement),this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;for(var o=this.popupObj.getScrollableParent(this.inputWrapper.container),h=0;h<o.length;h++){var r=o[h];s.Jm.remove(r,"scroll",this.scrollHandler)}s.Pw.isDevice&&this.isFilterLayout()&&this.isDeviceFullScreen&&(0,s.vy)([document.body,this.popupObj.element],m.popupFullScreen),this.isFilterLayout()&&(!s.Pw.isDevice&&(this.searchKeyModule.destroy(),this.clearIconElement&&s.Jm.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(s.Jm.remove(this.backIconElement,"click",this.clickOnBackIcon),s.Jm.remove(this.clearIconElement,"click",this.clearText)),(0,s.hX)(this.filterInput)||(s.Jm.remove(this.filterInput,"input",this.onInput),s.Jm.remove(this.filterInput,"keyup",this.onFilterUp),s.Jm.remove(this.filterInput,"keydown",this.onFilterDown),s.Jm.remove(this.filterInput,"blur",this.onBlurHandler),s.Jm.remove(this.filterInput,"paste",this.pasteHandler)),this.allowFiltering&&"dropdownlist"===this.getModuleName()&&(this.filterInput.removeAttribute("aria-activedescendant"),this.filterInput.removeAttribute("aria-disabled"),this.filterInput.removeAttribute("role"),this.filterInput.removeAttribute("autocomplete"),this.filterInput.removeAttribute("autocapitalize"),this.filterInput.removeAttribute("spellcheck")),this.filterInput=null),(0,s.uK)(this.targetElement(),{"aria-expanded":"false"}),this.inputElement.setAttribute("aria-expanded","false"),this.targetElement().removeAttribute("aria-owns"),this.targetElement().removeAttribute("aria-activedescendant"),this.inputWrapper.container.classList.remove(m.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.enableVirtualization&&(null==this.value||this.isTyped?(this.viewPortInfo.endIndex=this.viewPortInfo&&this.viewPortInfo.endIndex>0?this.viewPortInfo.endIndex:this.itemCount,"autocomplete"!==this.getModuleName()&&("dropdownlist"!==this.getModuleName()||(0,s.hX)(this.typedString)||""===this.typedString)&&("combobox"!==this.getModuleName()||!this.allowFiltering||(0,s.hX)(this.typedString)||""===this.typedString)||this.checkAndResetCache()):"autocomplete"===this.getModuleName()&&this.checkAndResetCache(),("dropdownlist"===this.getModuleName()||"combobox"===this.getModuleName())&&0!==this.skeletonCount&&this.getSkeletonCount(!0)),this.beforePopupOpen=!1;var p={popup:this.popupObj,cancel:!1,animation:{name:"FadeOut",duration:100,delay:t||0},event:e||null};this.trigger("close",p,function(t){if(!(0,s.hX)(l.popupObj)&&!(0,s.hX)(l.popupObj.element.querySelector(".e-fixed-head"))){var e=l.popupObj.element.querySelector(".e-fixed-head");e.parentNode.removeChild(e),l.fixedHeaderElement=null}t.cancel||("autocomplete"===l.getModuleName()&&l.rippleFun(),l.isPopupOpen?l.popupObj.hide(new s.X5(t.animation)):l.destroyPopup())}),s.Pw.isDevice&&!p.cancel&&this.popupObj.element.classList.contains("e-wide-popup")&&this.popupObj.element.classList.remove("e-wide-popup"),i=this.dataSource instanceof u.M?this.virtualGroupDataSource&&this.virtualGroupDataSource.length?this.virtualGroupDataSource.length:0:this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.enableVirtualization&&this.isFiltering()&&n&&this.totalItemCount!==i&&(this.updateInitialData(),this.checkAndResetCache())}},e.prototype.updateInitialData=function(){var t=this.selectData,e=this.renderItems(t,this.fields);this.list.scrollTop=0,this.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount},"combobox"===this.getModuleName()&&(this.typedString=""),this.previousStartIndex=0,this.previousEndIndex=0,this.dataSource instanceof u.M?this.remoteDataCount>=0?this.totalItemCount=this.dataCount=this.remoteDataCount:this.resetList(this.dataSource):this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.list.getElementsByClassName("e-virtual-ddl")[0]&&(this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight()),"autocomplete"!==this.getModuleName()&&0!==this.totalItemCount&&this.totalItemCount>2*this.itemCount&&this.getSkeletonCount(),this.UpdateSkeleton(),this.listData=t,this.updateActionCompleteDataValues(e,t),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())},e.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.inputElement.removeAttribute("aria-controls"),this.popupObj&&(this.popupObj.destroy(),(0,s.Yo)(this.popupObj.element))},e.prototype.clickOnBackIcon=function(){this.hidePopup(),this.focusIn()},e.prototype.render=function(){this.preselectedIndex=(0,s.hX)(this.index)?null:this.index,"INPUT"===this.element.tagName?(this.inputElement=this.element,(0,s.hX)(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","combobox"),(0,s.hX)(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text"),this.inputElement.setAttribute("aria-expanded","false")):(this.inputElement=this.createElement("input",{attrs:{role:"combobox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));var t=this.cssClass;(0,s.hX)(this.cssClass)||""===this.cssClass||(t=this.cssClass.replace(/\s+/g," ").trim()),!(0,s.hX)((0,s.kp)(this.element,"fieldset"))&&(0,s.kp)(this.element,"fieldset").disabled&&(this.enabled=!1),this.inputWrapper=a.pd.createInput({element:this.inputElement,buttons:this.isPopupButton()?[m.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:t,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:m.hiddenElement}}),(0,s.Hs)([this.hiddenElement],this.inputWrapper.container),this.hiddenElement.hasAttribute("aria-label")||this.hiddenElement.setAttribute("aria-label",this.getModuleName()),this.validationAttribute(this.element,this.hiddenElement),this.setReadOnly(),this.setFields(),this.inputWrapper.container.style.width=(0,s.IV)(this.width),this.inputWrapper.container.classList.add("e-ddl"),"Never"!==this.floatLabelType&&a.pd.calculateWidth(this.inputElement,this.inputWrapper.container),!(0,s.hX)(this.inputWrapper.buttons[0])&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var e=this.element.getAttribute("id")?this.element.getAttribute("id"):(0,s.Lz)("ej2_dropdownlist");if(this.element.id=e,this.hiddenElement.id=e+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.readonly?"dropdownlist"===this.getModuleName()&&(this.targetElement().hasAttribute("aria-label")||(0,s.uK)(this.targetElement(),{"aria-label":this.getModuleName()}),this.inputElement.hasAttribute("aria-label")||this.inputElement.setAttribute("aria-label",this.getModuleName()),this.inputElement.setAttribute("aria-expanded","false")):this.inputElement.hasAttribute("aria-label")||this.inputElement.setAttribute("aria-label",this.getModuleName()),(0,s.uK)(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),this.targetElement()===this.inputElement&&this.inputElement.removeAttribute("aria-labelledby"),null!==this.value||null!==this.activeIndex||null!==this.text)this.enableVirtualization&&(this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.updateVirtualizationProperties(this.itemCount,this.allowFiltering),null!==this.index&&(this.activeIndex=this.index+this.skeletonCount)),this.initValue(),this.selectedValueInfo=this.viewPortInfo,this.enableVirtualization&&(this.activeIndex=this.activeIndex+this.skeletonCount);else if("SELECT"===this.element.tagName&&this.element.options[0]){var i=this.element;this.value=this.allowObjectBinding?this.getDataByValue(i.options[i.selectedIndex].value):i.options[i.selectedIndex].value,this.text=(0,s.hX)(this.value)?null:i.options[i.selectedIndex].textContent,this.initValue()}this.setEnabled(),this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=function(t){t.stopImmediatePropagation()},this.inputElement.onchange=function(t){t.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),(0,s.hX)(this.text)||this.inputElement.setAttribute("value",this.text),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false");var l=this.inputWrapper.container.getElementsByClassName("e-float-text")[0];(0,s.hX)(this.element.id)||""===this.element.id||(0,s.hX)(l)||(l.id="label_"+this.element.id.replace(/ /g,"_"),(0,s.uK)(this.inputElement,{"aria-labelledby":l.id})),this.renderComplete(),this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.enableVirtualization&&this.updateVirtualizationProperties(this.itemCount,this.allowFiltering),this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.viewPortInfo.startIndex>0?this.viewPortInfo.endIndex:this.itemCount},e.prototype.getListHeight=function(){var t=this.createElement("div",{className:"e-dropdownbase"}),e=this.createElement("li",{className:"e-list-item"}),i=(0,s.IV)(this.popupHeight);t.style.height=parseInt(i,10).toString()+"px",t.appendChild(e),document.body.appendChild(t),this.virtualListHeight=t.getBoundingClientRect().height;var l=Math.ceil(e.getBoundingClientRect().height)+parseInt(window.getComputedStyle(e).marginBottom,10);return t.remove(),l},e.prototype.setFooterTemplate=function(t){this.footer?this.isReact&&"function"==typeof this.footerTemplate?this.clearTemplate(["footerTemplate"]):this.footer.innerHTML="":(this.footer=this.createElement("div"),(0,s.iQ)([this.footer],m.footer));var e=this.dropdownCompiler(this.footerTemplate),i=("function"!=typeof this.footerTemplate&&e?(0,s.wE)((0,s.Lt)(this.footerTemplate,document).innerHTML.trim()):(0,s.wE)(this.footerTemplate))({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);i&&i.length>0&&(0,s.BC)(i,this.footer),(0,s.BC)([this.footer],t)},e.prototype.setHeaderTemplate=function(t){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),(0,s.iQ)([this.header],m.header));var e=this.dropdownCompiler(this.headerTemplate),i=("function"!=typeof this.headerTemplate&&e?(0,s.wE)((0,s.Lt)(this.headerTemplate,document).innerHTML.trim()):(0,s.wE)(this.headerTemplate))({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);i&&i.length&&(0,s.BC)(i,this.header);var l=t.querySelector("div.e-content");t.insertBefore(this.header,l)},e.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},e.prototype.setOldText=function(t){this.text=t},e.prototype.setOldValue=function(t){this.value=t},e.prototype.refreshPopup=function(){!(0,s.hX)(this.popupObj)&&document.body.contains(this.popupObj.element)&&(this.allowFiltering&&!(s.Pw.isDevice&&this.isFilterLayout())||"autocomplete"===this.getModuleName())&&((0,s.vy)([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())},e.prototype.checkData=function(t){t.dataSource&&!(0,s.hX)(Object.keys(t.dataSource))&&this.itemTemplate&&this.allowFiltering&&!(this.isListSearched&&t.dataSource instanceof u.M)&&(this.list&&!this.isReact?this.list.innerHTML="":this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1}),this.isListSearched=!1;var e=-1!==Object.keys(t).indexOf("value")&&(0,s.hX)(t.value),i=-1!==Object.keys(t).indexOf("text")&&(0,s.hX)(t.text);"autocomplete"!==this.getModuleName()&&this.allowFiltering&&(e||i)&&(this.itemData=null),this.allowFiltering&&t.dataSource&&!(0,s.hX)(Object.keys(t.dataSource))?(this.actionCompleteData={ulElement:null,list:null,isUpdated:!1},this.actionData=this.actionCompleteData):this.allowFiltering&&t.query&&!(0,s.hX)(Object.keys(t.query))&&(this.actionCompleteData="combobox"===this.getModuleName()?{ulElement:null,list:null,isUpdated:!1}:this.actionCompleteData,this.actionData=this.actionCompleteData)},e.prototype.updateDataSource=function(t,e){(""!==this.inputElement.value||!(0,s.hX)(t)&&((0,s.hX)(t.dataSource)||!(t.dataSource instanceof u.M)&&0===t.dataSource.length))&&this.clearAll(null,t),this.fields.groupBy&&t.fields&&!this.isGroupChecking&&this.list&&(s.Jm.remove(this.list,"scroll",this.setFloatingHeader),s.Jm.add(this.list,"scroll",this.setFloatingHeader,this)),(!(!(0,s.hX)(t)&&((0,s.hX)(t.dataSource)||!(t.dataSource instanceof u.M)&&0===t.dataSource.length))||t.dataSource instanceof u.M||!(0,s.hX)(t)&&Array.isArray(t.dataSource)&&!(0,s.hX)(e)&&Array.isArray(e.dataSource)&&t.dataSource.length!==e.dataSource.length)&&(this.typedString="",this.resetList(this.dataSource)),this.isCustomFilter||this.isFilterFocus||document.activeElement===this.filterInput||this.checkCustomValue()},e.prototype.checkCustomValue=function(){var t=this.allowObjectBinding&&!(0,s.hX)(this.value)?(0,s._W)(this.fields.value?this.fields.value:"",this.value):this.value;this.itemData=this.getDataByValue(t);var e=this.getItemData(),i=this.allowObjectBinding?this.itemData:e.value,l=(0,s.hX)(i)?null:this.index;(0,s.hX)(l)&&t===i||this.isAngular?this.setProperties({text:e.text?e.text.toString():e.text,value:i}):this.setProperties({text:e.text?e.text.toString():e.text,index:l,value:i})},e.prototype.updateInputFields=function(){"dropdownlist"===this.getModuleName()&&a.pd.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.onPropertyChanged=function(e,i){var l=this;!(0,s.hX)(e.dataSource)&&!this.isTouched&&(0,s.hX)(e.value)&&(0,s.hX)(e.index)&&!(0,s.hX)(this.preselectedIndex)&&!(0,s.hX)(this.index)&&(e.index=this.index),(0,s.hX)(e.value)&&(0,s.hX)(e.index)||(this.isTouched=!0),"dropdownlist"===this.getModuleName()&&(this.checkData(e),this.setUpdateInitial(["fields","query","dataSource"],e));for(var n=this,o=0,h=Object.keys(e);o<h.length;o++){var r=function(o){switch(o){case"query":case"dataSource":n.getSkeletonCount(),n.checkAndResetCache();break;case"htmlAttributes":n.setHTMLAttributes();break;case"width":n.setEleWidth(e.width),a.pd.calculateWidth(n.inputElement,n.inputWrapper.container);break;case"placeholder":a.pd.setPlaceholder(e.placeholder,n.inputElement);break;case"filterBarPlaceholder":n.filterInput&&a.pd.setPlaceholder(e.filterBarPlaceholder,n.filterInput);break;case"readonly":"dropdownlist"!==n.getModuleName()&&a.pd.setReadonly(e.readonly,n.inputElement),n.setReadOnly();break;case"cssClass":n.setCssClass(e.cssClass,i.cssClass),a.pd.calculateWidth(n.inputElement,n.inputWrapper.container);break;case"enableRtl":n.setEnableRtl();break;case"enabled":n.setEnable();break;case"text":if(n.fields.disabled&&(e.text=e.text&&!n.isDisabledItemByIndex(n.getIndexByValue(n.getValueByText(e.text)))?e.text:null),null===e.text){n.clearAll();break}if(n.enableVirtualization){n.updateValues(),n.updateInputFields(),n.notify("setCurrentViewDataAsync",{module:"VirtualScroll"});break}if(n.list||(n.dataSource instanceof u.M&&(n.initialRemoteRender=!0),n.renderList()),!n.initialRemoteRender){var h=n.getElementByText(e.text);if(!n.checkValidLi(h)){if(n.liCollections&&100===n.liCollections.length&&"autocomplete"===n.getModuleName()&&n.listData.length>100)n.setSelectionData(e.text,i.text,"text");else if(e.text&&n.dataSource instanceof u.M){var r=n.getItems().length,c=(0,s.hX)(n.fields.text)?n.fields.value:n.fields.text;n.typedString="",n.dataSource.executeQuery(n.getQuery(n.query).where(new p.m(c,"equal",e.text))).then(function(t){t.result.length>0?(l.addItem(t.result,r),l.updateValues()):l.setOldText(i.text)})}else"autocomplete"===n.getModuleName()?n.setInputValue(e,i):n.setOldText(i.text)}n.updateInputFields()}break;case"value":if(n.fields.disabled&&(e.value=null==e.value||n.isDisableItemValue(e.value)?null:e.value),null===e.value){n.clearAll();break}if(n.allowObjectBinding&&!(0,s.hX)(e.value)&&!(0,s.hX)(i.value)&&n.isObjectInArray(e.value,[i.value]))return{value:void 0};if(n.enableVirtualization){n.updateValues(),n.updateInputFields(),n.notify("setCurrentViewDataAsync",{module:"VirtualScroll"}),n.preventChange=n.isAngular&&n.preventChange?!n.preventChange:n.preventChange;break}if(n.notify("beforeValueChange",{newProp:e}),n.list||(n.dataSource instanceof u.M&&(n.initialRemoteRender=!0),n.renderList()),!n.initialRemoteRender){var d=n.allowObjectBinding&&!(0,s.hX)(e.value)?(0,s._W)(n.fields.value?n.fields.value:"",e.value):e.value,m=n.getElementByValue(d);if(!n.checkValidLi(m)){if(n.liCollections&&100===n.liCollections.length&&"autocomplete"===n.getModuleName()&&n.listData.length>100)n.setSelectionData(e.value,i.value,"value");else if(e.value&&n.dataSource instanceof u.M){var f=n.getItems().length,c=(0,s.hX)(n.fields.value)?n.fields.text:n.fields.value;n.typedString="";var v=n.allowObjectBinding&&!(0,s.hX)(e.value)?(0,s._W)(c,e.value):e.value;n.dataSource.executeQuery(n.getQuery(n.query).where(new p.m(c,"equal",v))).then(function(t){t.result.length>0?(l.addItem(t.result,f),l.updateValues()):l.setOldValue(i.value)})}else"autocomplete"===n.getModuleName()?n.setInputValue(e,i):n.setOldValue(i.value)}n.updateInputFields(),n.preventChange=n.isAngular&&n.preventChange?!n.preventChange:n.preventChange}break;case"index":if(n.fields.disabled&&(e.index=null==e.index||n.isDisabledItemByIndex(e.index)?null:e.index),null===e.index){n.clearAll();break}if(n.list||(n.dataSource instanceof u.M&&(n.initialRemoteRender=!0),n.renderList()),!n.initialRemoteRender&&n.liCollections){var g=n.liCollections[e.index];n.checkValidLi(g)||(n.liCollections&&100===n.liCollections.length&&"autocomplete"===n.getModuleName()&&n.listData.length>100?n.setSelectionData(e.index,i.index,"index"):n.index=i.index),n.updateInputFields()}break;case"footerTemplate":n.popupObj&&n.setFooterTemplate(n.popupObj.element);break;case"headerTemplate":n.popupObj&&n.setHeaderTemplate(n.popupObj.element);break;case"valueTemplate":(0,s.hX)(n.itemData)||null===n.valueTemplate||n.setValueTemplate();break;case"allowFiltering":n.allowFiltering&&(n.actionCompleteData={ulElement:n.ulElement,list:n.listData,isUpdated:!0},n.actionData=n.actionCompleteData,n.updateSelectElementData(n.allowFiltering));break;case"floatLabelType":a.pd.removeFloating(n.inputWrapper),a.pd.addFloating(n.inputElement,e.floatLabelType,n.placeholder,n.createElement),!(0,s.hX)(n.inputWrapper.buttons[0])&&n.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]&&"Never"!==n.floatLabelType&&n.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"showClearButton":n.inputWrapper.clearButton||(a.pd.setClearButton(e.showClearButton,n.inputElement,n.inputWrapper,null,n.createElement),n.bindClearEvent());break;default:var y=n.getPropObject(o,e,i);t.prototype.onPropertyChanged.call(n,y.newProperty,y.oldProperty)}}(h[o]);if("object"==typeof r)return r.value}},e.prototype.checkValidLi=function(t){return!!this.isValidLI(t)&&(this.setSelection(t,null),!0)},e.prototype.setSelectionData=function(t,e,i){var l,n=this;this.updateListValues=function(){if("text"===i)l=n.getElementByText(t),n.checkValidLi(l)||n.setOldText(e);else if("value"===i){var o=n.fields.value?n.fields.value:"";n.allowObjectBinding&&!(0,s.hX)(t)&&(0,s._W)(o,t),l=n.getElementByValue(t),n.checkValidLi(l)||n.setOldValue(e)}else"index"!==i||(l=n.liCollections[t],n.checkValidLi(l)||(n.index=e))}},e.prototype.updatePopupState=function(){this.beforePopupOpen&&(this.beforePopupOpen=!1,this.showPopup())},e.prototype.setReadOnly=function(){this.readonly?(0,s.iQ)([this.inputWrapper.container],["e-readonly"]):(0,s.vy)([this.inputWrapper.container],["e-readonly"])},e.prototype.setInputValue=function(t,e){},e.prototype.setCssClass=function(t,e){(0,s.hX)(e)||(e=e.replace(/\s+/g," ").trim()),(0,s.hX)(t)||(t=t.replace(/\s+/g," ").trim()),a.pd.setCssClass(t,[this.inputWrapper.container],e),this.popupObj&&a.pd.setCssClass(t,[this.popupObj.element],e)},e.prototype.getModuleName=function(){return"dropdownlist"},e.prototype.showPopup=function(t){if(this.enabled){if(this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,this.isReact&&"combobox"===this.getModuleName()&&this.itemTemplate&&this.isCustomFilter&&this.isAddNewItemTemplate&&(this.renderList(),this.isAddNewItemTemplate=!1),this.isFiltering()&&this.dataSource instanceof u.M&&this.actionData.list!==this.actionCompleteData.list&&this.actionData.list&&this.actionData.ulElement&&(this.actionCompleteData=this.actionData,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)),this.beforePopupOpen){this.refreshPopup();return}this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):((0,s.hX)(this.list)||!(0,s.b0)(this.list)&&(this.list.classList.contains(r.fu.noData)||this.list.querySelectorAll("."+r.fu.li).length<=0))&&(this.isReact&&this.isFiltering()&&null!=this.itemTemplate&&(this.isSecondClick=!1),this.renderList(t)),this.enableVirtualization&&this.listData&&this.listData.length&&((0,s.hX)(this.value)||"dropdownlist"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.removeHover(),this.beforePopupOpen||this.notify("setCurrentViewDataAsync",{module:"VirtualScroll"})),this.beforePopupOpen&&this.invokeRenderPopup(t),this.enableVirtualization&&!this.allowFiltering&&null!=this.selectedValueInfo&&this.selectedValueInfo.startIndex>0&&null!=this.value&&this.notify("dataProcessAsync",{module:"VirtualScroll",isOpen:!0})}},e.prototype.invokeRenderPopup=function(t){if(s.Pw.isDevice&&this.isFilterLayout()){var e=this;window.onpopstate=function(){e.hidePopup()},history.pushState({},"")}!(0,s.hX)(this.list)&&(!(0,s.hX)(this.list.children[0])||this.list.classList.contains(r.fu.noData))&&this.renderPopup(t)},e.prototype.renderHightSearch=function(){},e.prototype.hidePopup=function(t){if(this.isEscapeKey&&"dropdownlist"===this.getModuleName()){if((0,s.hX)(this.inputElement)||a.pd.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,(0,s.hX)(this.index))this.resetSelection();else{var e=this.allowObjectBinding?(0,s._W)(this.fields.value?this.fields.value:"",this.value):this.value,i=this.findListElement(this.ulElement,"li","data-value",e);this.selectedLI=this.liCollections[this.index]||i,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())}}this.isVirtualTrackHeight=!1,this.customFilterQuery=null,this.closePopup(0,t);var l=this.getItemData(),n=!(0,s.hX)(this.selectedLI);n&&this.enableVirtualization&&this.selectedLI.classList&&(n=this.selectedLI.classList.contains("e-active")),this.inputElement&&""===this.inputElement.value.trim()&&!this.isInteracted&&(this.isSelectCustom||n&&this.inputElement.value!==l.text)&&(this.isSelectCustom=!1,this.clearAll(t))},e.prototype.focusIn=function(t){if(!(!this.enabled||this.targetElement().classList.contains(m.disable))){var e=!1;this.preventFocus&&s.Pw.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,e=!0),e||this.targetElement().focus(),(0,s.iQ)([this.inputWrapper.container],[m.inputFocus]),this.onFocus(t),"Never"!==this.floatLabelType&&a.pd.calculateWidth(this.inputElement,this.inputWrapper.container)}},e.prototype.focusOut=function(t){this.enabled&&(this.enableVirtualization||"combobox"!==this.getModuleName()&&"autocomplete"!==this.getModuleName()||(this.isTyped=!0),this.hidePopup(t),this.targetElement()&&this.targetElement().blur(),(0,s.vy)([this.inputWrapper.container],[m.inputFocus]),"Never"!==this.floatLabelType&&a.pd.calculateWidth(this.inputElement,this.inputWrapper.container))},e.prototype.disableItem=function(t){if(this.fields.disabled){this.list||this.renderList();var e=-1;if(this.liCollections&&this.liCollections.length>0&&this.listData&&this.fields.disabled){if("string"==typeof t)e=this.getIndexByValue(t);else if("object"==typeof t){if(t instanceof HTMLLIElement){for(var i=0;i<this.liCollections.length;i++)if(this.liCollections[i]===t){e=this.getIndexByValue(t.getAttribute("data-value"));break}}else for(var s=JSON.parse(JSON.stringify(t))[this.fields.value],i=0;i<this.listData.length;i++)if(JSON.parse(JSON.stringify(this.listData[i]))[this.fields.value]===s){e=this.getIndexByValue(s);break}}else e=t;if(e<this.liCollections.length&&e>-1&&!JSON.parse(JSON.stringify(this.listData[e]))[this.fields.disabled]){var l=this.liCollections[e];if(l){this.disableListItem(l);var n=JSON.parse(JSON.stringify(this.listData[e]));n[this.fields.disabled]=!0,this.listData[e]=n,this.dataSource=this.listData,l.classList.contains(m.focus)&&this.removeFocus(),l.classList.contains(m.selected)&&this.clear()}}}}},e.prototype.destroy=function(){if(this.isActive=!1,this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),(0,h.up)(this.element.id),this.isReact&&this.clearTemplate(),this.hidePopup(),this.popupObj&&this.popupObj.hide(),this.unWireEvent(),this.list&&this.unWireListEvents(),!this.element||this.element.classList.contains("e-"+this.getModuleName())){if(this.inputElement){for(var e=["readonly","aria-disabled","placeholder","aria-labelledby","aria-expanded","autocomplete","aria-readonly","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"],i=0;i<e.length;i++)this.inputElement.removeAttribute(e[i]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),a.pd.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)}this.element.style.display="block",this.inputWrapper.container&&this.inputWrapper.container.parentElement&&(this.inputWrapper.container.parentElement.tagName===this.getNgDirective()||this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),(0,s.Yo)(this.inputWrapper.container)),delete this.hiddenElement,this.filterInput=null,this.keyboardModule=null,this.ulElement=null,this.list=null,this.clearIconElement=null,this.popupObj=null,this.popupContentElement=null,this.rippleFun=null,this.selectedLI=null,this.liCollections=null,this.item=null,this.footer=null,this.header=null,this.previousSelectedLI=null,this.valueTempElement=null,this.actionData.ulElement=null,this.inputElement&&!(0,s.hX)(this.inputElement.onchange)&&(this.inputElement.onchange=null),this.inputElement&&!(0,s.hX)(this.inputElement.onselect)&&(this.inputElement.onselect=null),a.pd.destroy({element:this.inputElement,floatLabelType:this.floatLabelType,properties:this.properties,buttons:this.inputWrapper.container.querySelectorAll(".e-input-group-icon")[0]},this.clearButton),this.clearButton=null,this.inputElement=null,this.inputWrapper=null,t.prototype.destroy.call(this)}},e.prototype.getItems=function(){return this.list||(this.dataSource instanceof u.M&&(this.initialRemoteRender=!0),this.renderList()),this.ulElement?t.prototype.getItems.call(this):[]},e.prototype.getDataByValue=function(e){return t.prototype.getDataByValue.call(this,e)},e.prototype.clear=function(){this.value=null},d([(0,s.mA)(null)],e.prototype,"cssClass",void 0),d([(0,s.mA)("100%")],e.prototype,"width",void 0),d([(0,s.mA)(!0)],e.prototype,"enabled",void 0),d([(0,s.mA)(!1)],e.prototype,"enablePersistence",void 0),d([(0,s.mA)("300px")],e.prototype,"popupHeight",void 0),d([(0,s.mA)("100%")],e.prototype,"popupWidth",void 0),d([(0,s.mA)(null)],e.prototype,"placeholder",void 0),d([(0,s.mA)(null)],e.prototype,"filterBarPlaceholder",void 0),d([(0,s.mA)({})],e.prototype,"htmlAttributes",void 0),d([(0,s.mA)(null)],e.prototype,"query",void 0),d([(0,s.mA)(null)],e.prototype,"valueTemplate",void 0),d([(0,s.mA)(null)],e.prototype,"headerTemplate",void 0),d([(0,s.mA)(null)],e.prototype,"footerTemplate",void 0),d([(0,s.mA)(!1)],e.prototype,"allowFiltering",void 0),d([(0,s.mA)(!0)],e.prototype,"isDeviceFullScreen",void 0),d([(0,s.mA)(!1)],e.prototype,"readonly",void 0),d([(0,s.mA)(!1)],e.prototype,"enableVirtualization",void 0),d([(0,s.mA)(null)],e.prototype,"text",void 0),d([(0,s.mA)(null)],e.prototype,"value",void 0),d([(0,s.mA)(!1)],e.prototype,"allowObjectBinding",void 0),d([(0,s.mA)(null)],e.prototype,"index",void 0),d([(0,s.mA)("Never")],e.prototype,"floatLabelType",void 0),d([(0,s.mA)(!1)],e.prototype,"showClearButton",void 0),d([(0,s.Jh)()],e.prototype,"filtering",void 0),d([(0,s.Jh)()],e.prototype,"change",void 0),d([(0,s.Jh)()],e.prototype,"beforeOpen",void 0),d([(0,s.Jh)()],e.prototype,"open",void 0),d([(0,s.Jh)()],e.prototype,"close",void 0),d([(0,s.Jh)()],e.prototype,"blur",void 0),d([(0,s.Jh)()],e.prototype,"focus",void 0),e=d([s.kc],e)}(r.$J)}}]);